(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const u of o)if(u.type==="childList")for(const h of u.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function n(o){const u={};return o.integrity&&(u.integrity=o.integrity),o.referrerPolicy&&(u.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?u.credentials="include":o.crossOrigin==="anonymous"?u.credentials="omit":u.credentials="same-origin",u}function r(o){if(o.ep)return;o.ep=!0;const u=n(o);fetch(o.href,u)}})();function ME(s){return s&&s.__esModule&&Object.prototype.hasOwnProperty.call(s,"default")?s.default:s}var wm={exports:{}},Fl={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jv;function Qb(){if(jv)return Fl;jv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,o,u){var h=null;if(u!==void 0&&(h=""+u),o.key!==void 0&&(h=""+o.key),"key"in o){u={};for(var m in o)m!=="key"&&(u[m]=o[m])}else u=o;return o=u.ref,{$$typeof:s,type:r,key:h,ref:o!==void 0?o:null,props:u}}return Fl.Fragment=t,Fl.jsx=n,Fl.jsxs=n,Fl}var Bv;function Kb(){return Bv||(Bv=1,wm.exports=Qb()),wm.exports}var N=Kb(),Im={exports:{}},Dt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qv;function Yb(){if(qv)return Dt;qv=1;var s=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),u=Symbol.for("react.consumer"),h=Symbol.for("react.context"),m=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),y=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),A=Symbol.for("react.activity"),S=Symbol.iterator;function U(O){return O===null||typeof O!="object"?null:(O=S&&O[S]||O["@@iterator"],typeof O=="function"?O:null)}var W={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Q=Object.assign,X={};function st(O,J,ot){this.props=O,this.context=J,this.refs=X,this.updater=ot||W}st.prototype.isReactComponent={},st.prototype.setState=function(O,J){if(typeof O!="object"&&typeof O!="function"&&O!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,O,J,"setState")},st.prototype.forceUpdate=function(O){this.updater.enqueueForceUpdate(this,O,"forceUpdate")};function rt(){}rt.prototype=st.prototype;function at(O,J,ot){this.props=O,this.context=J,this.refs=X,this.updater=ot||W}var At=at.prototype=new rt;At.constructor=at,Q(At,st.prototype),At.isPureReactComponent=!0;var St=Array.isArray;function yt(){}var D={H:null,A:null,T:null,S:null},I=Object.prototype.hasOwnProperty;function C(O,J,ot){var ut=ot.ref;return{$$typeof:s,type:O,key:J,ref:ut!==void 0?ut:null,props:ot}}function R(O,J){return C(O.type,J,O.props)}function x(O){return typeof O=="object"&&O!==null&&O.$$typeof===s}function P(O){var J={"=":"=0",":":"=2"};return"$"+O.replace(/[=:]/g,function(ot){return J[ot]})}var w=/\/+/g;function wt(O,J){return typeof O=="object"&&O!==null&&O.key!=null?P(""+O.key):J.toString(36)}function Ot(O){switch(O.status){case"fulfilled":return O.value;case"rejected":throw O.reason;default:switch(typeof O.status=="string"?O.then(yt,yt):(O.status="pending",O.then(function(J){O.status==="pending"&&(O.status="fulfilled",O.value=J)},function(J){O.status==="pending"&&(O.status="rejected",O.reason=J)})),O.status){case"fulfilled":return O.value;case"rejected":throw O.reason}}throw O}function q(O,J,ot,ut,Et){var xt=typeof O;(xt==="undefined"||xt==="boolean")&&(O=null);var Lt=!1;if(O===null)Lt=!0;else switch(xt){case"bigint":case"string":case"number":Lt=!0;break;case"object":switch(O.$$typeof){case s:case t:Lt=!0;break;case E:return Lt=O._init,q(Lt(O._payload),J,ot,ut,Et)}}if(Lt)return Et=Et(O),Lt=ut===""?"."+wt(O,0):ut,St(Et)?(ot="",Lt!=null&&(ot=Lt.replace(w,"$&/")+"/"),q(Et,J,ot,"",function(Hi){return Hi})):Et!=null&&(x(Et)&&(Et=R(Et,ot+(Et.key==null||O&&O.key===Et.key?"":(""+Et.key).replace(w,"$&/")+"/")+Lt)),J.push(Et)),1;Lt=0;var ve=ut===""?".":ut+":";if(St(O))for(var he=0;he<O.length;he++)ut=O[he],xt=ve+wt(ut,he),Lt+=q(ut,J,ot,xt,Et);else if(he=U(O),typeof he=="function")for(O=he.call(O),he=0;!(ut=O.next()).done;)ut=ut.value,xt=ve+wt(ut,he++),Lt+=q(ut,J,ot,xt,Et);else if(xt==="object"){if(typeof O.then=="function")return q(Ot(O),J,ot,ut,Et);throw J=String(O),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(O).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return Lt}function tt(O,J,ot){if(O==null)return O;var ut=[],Et=0;return q(O,ut,"","",function(xt){return J.call(ot,xt,Et++)}),ut}function ct(O){if(O._status===-1){var J=O._result;J=J(),J.then(function(ot){(O._status===0||O._status===-1)&&(O._status=1,O._result=ot)},function(ot){(O._status===0||O._status===-1)&&(O._status=2,O._result=ot)}),O._status===-1&&(O._status=0,O._result=J)}if(O._status===1)return O._result.default;throw O._result}var Pt=typeof reportError=="function"?reportError:function(O){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof O=="object"&&O!==null&&typeof O.message=="string"?String(O.message):String(O),error:O});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",O);return}console.error(O)},kt={map:tt,forEach:function(O,J,ot){tt(O,function(){J.apply(this,arguments)},ot)},count:function(O){var J=0;return tt(O,function(){J++}),J},toArray:function(O){return tt(O,function(J){return J})||[]},only:function(O){if(!x(O))throw Error("React.Children.only expected to receive a single React element child.");return O}};return Dt.Activity=A,Dt.Children=kt,Dt.Component=st,Dt.Fragment=n,Dt.Profiler=o,Dt.PureComponent=at,Dt.StrictMode=r,Dt.Suspense=g,Dt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=D,Dt.__COMPILER_RUNTIME={__proto__:null,c:function(O){return D.H.useMemoCache(O)}},Dt.cache=function(O){return function(){return O.apply(null,arguments)}},Dt.cacheSignal=function(){return null},Dt.cloneElement=function(O,J,ot){if(O==null)throw Error("The argument must be a React element, but you passed "+O+".");var ut=Q({},O.props),Et=O.key;if(J!=null)for(xt in J.key!==void 0&&(Et=""+J.key),J)!I.call(J,xt)||xt==="key"||xt==="__self"||xt==="__source"||xt==="ref"&&J.ref===void 0||(ut[xt]=J[xt]);var xt=arguments.length-2;if(xt===1)ut.children=ot;else if(1<xt){for(var Lt=Array(xt),ve=0;ve<xt;ve++)Lt[ve]=arguments[ve+2];ut.children=Lt}return C(O.type,Et,ut)},Dt.createContext=function(O){return O={$$typeof:h,_currentValue:O,_currentValue2:O,_threadCount:0,Provider:null,Consumer:null},O.Provider=O,O.Consumer={$$typeof:u,_context:O},O},Dt.createElement=function(O,J,ot){var ut,Et={},xt=null;if(J!=null)for(ut in J.key!==void 0&&(xt=""+J.key),J)I.call(J,ut)&&ut!=="key"&&ut!=="__self"&&ut!=="__source"&&(Et[ut]=J[ut]);var Lt=arguments.length-2;if(Lt===1)Et.children=ot;else if(1<Lt){for(var ve=Array(Lt),he=0;he<Lt;he++)ve[he]=arguments[he+2];Et.children=ve}if(O&&O.defaultProps)for(ut in Lt=O.defaultProps,Lt)Et[ut]===void 0&&(Et[ut]=Lt[ut]);return C(O,xt,Et)},Dt.createRef=function(){return{current:null}},Dt.forwardRef=function(O){return{$$typeof:m,render:O}},Dt.isValidElement=x,Dt.lazy=function(O){return{$$typeof:E,_payload:{_status:-1,_result:O},_init:ct}},Dt.memo=function(O,J){return{$$typeof:y,type:O,compare:J===void 0?null:J}},Dt.startTransition=function(O){var J=D.T,ot={};D.T=ot;try{var ut=O(),Et=D.S;Et!==null&&Et(ot,ut),typeof ut=="object"&&ut!==null&&typeof ut.then=="function"&&ut.then(yt,Pt)}catch(xt){Pt(xt)}finally{J!==null&&ot.types!==null&&(J.types=ot.types),D.T=J}},Dt.unstable_useCacheRefresh=function(){return D.H.useCacheRefresh()},Dt.use=function(O){return D.H.use(O)},Dt.useActionState=function(O,J,ot){return D.H.useActionState(O,J,ot)},Dt.useCallback=function(O,J){return D.H.useCallback(O,J)},Dt.useContext=function(O){return D.H.useContext(O)},Dt.useDebugValue=function(){},Dt.useDeferredValue=function(O,J){return D.H.useDeferredValue(O,J)},Dt.useEffect=function(O,J){return D.H.useEffect(O,J)},Dt.useEffectEvent=function(O){return D.H.useEffectEvent(O)},Dt.useId=function(){return D.H.useId()},Dt.useImperativeHandle=function(O,J,ot){return D.H.useImperativeHandle(O,J,ot)},Dt.useInsertionEffect=function(O,J){return D.H.useInsertionEffect(O,J)},Dt.useLayoutEffect=function(O,J){return D.H.useLayoutEffect(O,J)},Dt.useMemo=function(O,J){return D.H.useMemo(O,J)},Dt.useOptimistic=function(O,J){return D.H.useOptimistic(O,J)},Dt.useReducer=function(O,J,ot){return D.H.useReducer(O,J,ot)},Dt.useRef=function(O){return D.H.useRef(O)},Dt.useState=function(O){return D.H.useState(O)},Dt.useSyncExternalStore=function(O,J,ot){return D.H.useSyncExternalStore(O,J,ot)},Dt.useTransition=function(){return D.H.useTransition()},Dt.version="19.2.0",Dt}var Fv;function Rg(){return Fv||(Fv=1,Im.exports=Yb()),Im.exports}var gt=Rg();const Xb=ME(gt);var Rm={exports:{}},Hl={},xm={exports:{}},Dm={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Hv;function Zb(){return Hv||(Hv=1,(function(s){function t(q,tt){var ct=q.length;q.push(tt);t:for(;0<ct;){var Pt=ct-1>>>1,kt=q[Pt];if(0<o(kt,tt))q[Pt]=tt,q[ct]=kt,ct=Pt;else break t}}function n(q){return q.length===0?null:q[0]}function r(q){if(q.length===0)return null;var tt=q[0],ct=q.pop();if(ct!==tt){q[0]=ct;t:for(var Pt=0,kt=q.length,O=kt>>>1;Pt<O;){var J=2*(Pt+1)-1,ot=q[J],ut=J+1,Et=q[ut];if(0>o(ot,ct))ut<kt&&0>o(Et,ot)?(q[Pt]=Et,q[ut]=ct,Pt=ut):(q[Pt]=ot,q[J]=ct,Pt=J);else if(ut<kt&&0>o(Et,ct))q[Pt]=Et,q[ut]=ct,Pt=ut;else break t}}return tt}function o(q,tt){var ct=q.sortIndex-tt.sortIndex;return ct!==0?ct:q.id-tt.id}if(s.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var u=performance;s.unstable_now=function(){return u.now()}}else{var h=Date,m=h.now();s.unstable_now=function(){return h.now()-m}}var g=[],y=[],E=1,A=null,S=3,U=!1,W=!1,Q=!1,X=!1,st=typeof setTimeout=="function"?setTimeout:null,rt=typeof clearTimeout=="function"?clearTimeout:null,at=typeof setImmediate<"u"?setImmediate:null;function At(q){for(var tt=n(y);tt!==null;){if(tt.callback===null)r(y);else if(tt.startTime<=q)r(y),tt.sortIndex=tt.expirationTime,t(g,tt);else break;tt=n(y)}}function St(q){if(Q=!1,At(q),!W)if(n(g)!==null)W=!0,yt||(yt=!0,P());else{var tt=n(y);tt!==null&&Ot(St,tt.startTime-q)}}var yt=!1,D=-1,I=5,C=-1;function R(){return X?!0:!(s.unstable_now()-C<I)}function x(){if(X=!1,yt){var q=s.unstable_now();C=q;var tt=!0;try{t:{W=!1,Q&&(Q=!1,rt(D),D=-1),U=!0;var ct=S;try{e:{for(At(q),A=n(g);A!==null&&!(A.expirationTime>q&&R());){var Pt=A.callback;if(typeof Pt=="function"){A.callback=null,S=A.priorityLevel;var kt=Pt(A.expirationTime<=q);if(q=s.unstable_now(),typeof kt=="function"){A.callback=kt,At(q),tt=!0;break e}A===n(g)&&r(g),At(q)}else r(g);A=n(g)}if(A!==null)tt=!0;else{var O=n(y);O!==null&&Ot(St,O.startTime-q),tt=!1}}break t}finally{A=null,S=ct,U=!1}tt=void 0}}finally{tt?P():yt=!1}}}var P;if(typeof at=="function")P=function(){at(x)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,wt=w.port2;w.port1.onmessage=x,P=function(){wt.postMessage(null)}}else P=function(){st(x,0)};function Ot(q,tt){D=st(function(){q(s.unstable_now())},tt)}s.unstable_IdlePriority=5,s.unstable_ImmediatePriority=1,s.unstable_LowPriority=4,s.unstable_NormalPriority=3,s.unstable_Profiling=null,s.unstable_UserBlockingPriority=2,s.unstable_cancelCallback=function(q){q.callback=null},s.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<q?Math.floor(1e3/q):5},s.unstable_getCurrentPriorityLevel=function(){return S},s.unstable_next=function(q){switch(S){case 1:case 2:case 3:var tt=3;break;default:tt=S}var ct=S;S=tt;try{return q()}finally{S=ct}},s.unstable_requestPaint=function(){X=!0},s.unstable_runWithPriority=function(q,tt){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var ct=S;S=q;try{return tt()}finally{S=ct}},s.unstable_scheduleCallback=function(q,tt,ct){var Pt=s.unstable_now();switch(typeof ct=="object"&&ct!==null?(ct=ct.delay,ct=typeof ct=="number"&&0<ct?Pt+ct:Pt):ct=Pt,q){case 1:var kt=-1;break;case 2:kt=250;break;case 5:kt=1073741823;break;case 4:kt=1e4;break;default:kt=5e3}return kt=ct+kt,q={id:E++,callback:tt,priorityLevel:q,startTime:ct,expirationTime:kt,sortIndex:-1},ct>Pt?(q.sortIndex=ct,t(y,q),n(g)===null&&q===n(y)&&(Q?(rt(D),D=-1):Q=!0,Ot(St,ct-Pt))):(q.sortIndex=kt,t(g,q),W||U||(W=!0,yt||(yt=!0,P()))),q},s.unstable_shouldYield=R,s.unstable_wrapCallback=function(q){var tt=S;return function(){var ct=S;S=tt;try{return q.apply(this,arguments)}finally{S=ct}}}})(Dm)),Dm}var Gv;function Jb(){return Gv||(Gv=1,xm.exports=Zb()),xm.exports}var Cm={exports:{}},an={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qv;function $b(){if(Qv)return an;Qv=1;var s=Rg();function t(g){var y="https://react.dev/errors/"+g;if(1<arguments.length){y+="?args[]="+encodeURIComponent(arguments[1]);for(var E=2;E<arguments.length;E++)y+="&args[]="+encodeURIComponent(arguments[E])}return"Minified React error #"+g+"; visit "+y+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},o=Symbol.for("react.portal");function u(g,y,E){var A=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:A==null?null:""+A,children:g,containerInfo:y,implementation:E}}var h=s.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function m(g,y){if(g==="font")return"";if(typeof y=="string")return y==="use-credentials"?y:""}return an.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,an.createPortal=function(g,y){var E=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!y||y.nodeType!==1&&y.nodeType!==9&&y.nodeType!==11)throw Error(t(299));return u(g,y,null,E)},an.flushSync=function(g){var y=h.T,E=r.p;try{if(h.T=null,r.p=2,g)return g()}finally{h.T=y,r.p=E,r.d.f()}},an.preconnect=function(g,y){typeof g=="string"&&(y?(y=y.crossOrigin,y=typeof y=="string"?y==="use-credentials"?y:"":void 0):y=null,r.d.C(g,y))},an.prefetchDNS=function(g){typeof g=="string"&&r.d.D(g)},an.preinit=function(g,y){if(typeof g=="string"&&y&&typeof y.as=="string"){var E=y.as,A=m(E,y.crossOrigin),S=typeof y.integrity=="string"?y.integrity:void 0,U=typeof y.fetchPriority=="string"?y.fetchPriority:void 0;E==="style"?r.d.S(g,typeof y.precedence=="string"?y.precedence:void 0,{crossOrigin:A,integrity:S,fetchPriority:U}):E==="script"&&r.d.X(g,{crossOrigin:A,integrity:S,fetchPriority:U,nonce:typeof y.nonce=="string"?y.nonce:void 0})}},an.preinitModule=function(g,y){if(typeof g=="string")if(typeof y=="object"&&y!==null){if(y.as==null||y.as==="script"){var E=m(y.as,y.crossOrigin);r.d.M(g,{crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0})}}else y==null&&r.d.M(g)},an.preload=function(g,y){if(typeof g=="string"&&typeof y=="object"&&y!==null&&typeof y.as=="string"){var E=y.as,A=m(E,y.crossOrigin);r.d.L(g,E,{crossOrigin:A,integrity:typeof y.integrity=="string"?y.integrity:void 0,nonce:typeof y.nonce=="string"?y.nonce:void 0,type:typeof y.type=="string"?y.type:void 0,fetchPriority:typeof y.fetchPriority=="string"?y.fetchPriority:void 0,referrerPolicy:typeof y.referrerPolicy=="string"?y.referrerPolicy:void 0,imageSrcSet:typeof y.imageSrcSet=="string"?y.imageSrcSet:void 0,imageSizes:typeof y.imageSizes=="string"?y.imageSizes:void 0,media:typeof y.media=="string"?y.media:void 0})}},an.preloadModule=function(g,y){if(typeof g=="string")if(y){var E=m(y.as,y.crossOrigin);r.d.m(g,{as:typeof y.as=="string"&&y.as!=="script"?y.as:void 0,crossOrigin:E,integrity:typeof y.integrity=="string"?y.integrity:void 0})}else r.d.m(g)},an.requestFormReset=function(g){r.d.r(g)},an.unstable_batchedUpdates=function(g,y){return g(y)},an.useFormState=function(g,y,E){return h.H.useFormState(g,y,E)},an.useFormStatus=function(){return h.H.useHostTransitionStatus()},an.version="19.2.0",an}var Kv;function Wb(){if(Kv)return Cm.exports;Kv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Cm.exports=$b(),Cm.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yv;function tS(){if(Yv)return Hl;Yv=1;var s=Jb(),t=Rg(),n=Wb();function r(e){var i="https://react.dev/errors/"+e;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var a=2;a<arguments.length;a++)i+="&args[]="+encodeURIComponent(arguments[a])}return"Minified React error #"+e+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function u(e){var i=e,a=e;if(e.alternate)for(;i.return;)i=i.return;else{e=i;do i=e,(i.flags&4098)!==0&&(a=i.return),e=i.return;while(e)}return i.tag===3?a:null}function h(e){if(e.tag===13){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function m(e){if(e.tag===31){var i=e.memoizedState;if(i===null&&(e=e.alternate,e!==null&&(i=e.memoizedState)),i!==null)return i.dehydrated}return null}function g(e){if(u(e)!==e)throw Error(r(188))}function y(e){var i=e.alternate;if(!i){if(i=u(e),i===null)throw Error(r(188));return i!==e?null:e}for(var a=e,l=i;;){var f=a.return;if(f===null)break;var d=f.alternate;if(d===null){if(l=f.return,l!==null){a=l;continue}break}if(f.child===d.child){for(d=f.child;d;){if(d===a)return g(f),e;if(d===l)return g(f),i;d=d.sibling}throw Error(r(188))}if(a.return!==l.return)a=f,l=d;else{for(var _=!1,T=f.child;T;){if(T===a){_=!0,a=f,l=d;break}if(T===l){_=!0,l=f,a=d;break}T=T.sibling}if(!_){for(T=d.child;T;){if(T===a){_=!0,a=d,l=f;break}if(T===l){_=!0,l=d,a=f;break}T=T.sibling}if(!_)throw Error(r(189))}}if(a.alternate!==l)throw Error(r(190))}if(a.tag!==3)throw Error(r(188));return a.stateNode.current===a?e:i}function E(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e;for(e=e.child;e!==null;){if(i=E(e),i!==null)return i;e=e.sibling}return null}var A=Object.assign,S=Symbol.for("react.element"),U=Symbol.for("react.transitional.element"),W=Symbol.for("react.portal"),Q=Symbol.for("react.fragment"),X=Symbol.for("react.strict_mode"),st=Symbol.for("react.profiler"),rt=Symbol.for("react.consumer"),at=Symbol.for("react.context"),At=Symbol.for("react.forward_ref"),St=Symbol.for("react.suspense"),yt=Symbol.for("react.suspense_list"),D=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),C=Symbol.for("react.activity"),R=Symbol.for("react.memo_cache_sentinel"),x=Symbol.iterator;function P(e){return e===null||typeof e!="object"?null:(e=x&&e[x]||e["@@iterator"],typeof e=="function"?e:null)}var w=Symbol.for("react.client.reference");function wt(e){if(e==null)return null;if(typeof e=="function")return e.$$typeof===w?null:e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Q:return"Fragment";case st:return"Profiler";case X:return"StrictMode";case St:return"Suspense";case yt:return"SuspenseList";case C:return"Activity"}if(typeof e=="object")switch(e.$$typeof){case W:return"Portal";case at:return e.displayName||"Context";case rt:return(e._context.displayName||"Context")+".Consumer";case At:var i=e.render;return e=e.displayName,e||(e=i.displayName||i.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case D:return i=e.displayName||null,i!==null?i:wt(e.type)||"Memo";case I:i=e._payload,e=e._init;try{return wt(e(i))}catch{}}return null}var Ot=Array.isArray,q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,tt=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ct={pending:!1,data:null,method:null,action:null},Pt=[],kt=-1;function O(e){return{current:e}}function J(e){0>kt||(e.current=Pt[kt],Pt[kt]=null,kt--)}function ot(e,i){kt++,Pt[kt]=e.current,e.current=i}var ut=O(null),Et=O(null),xt=O(null),Lt=O(null);function ve(e,i){switch(ot(xt,i),ot(Et,e),ot(ut,null),i.nodeType){case 9:case 11:e=(e=i.documentElement)&&(e=e.namespaceURI)?uv(e):0;break;default:if(e=i.tagName,i=i.namespaceURI)i=uv(i),e=cv(i,e);else switch(e){case"svg":e=1;break;case"math":e=2;break;default:e=0}}J(ut),ot(ut,e)}function he(){J(ut),J(Et),J(xt)}function Hi(e){e.memoizedState!==null&&ot(Lt,e);var i=ut.current,a=cv(i,e.type);i!==a&&(ot(Et,e),ot(ut,a))}function Tr(e){Et.current===e&&(J(ut),J(Et)),Lt.current===e&&(J(Lt),Ul._currentValue=ct)}var Gi,wn;function Xe(e){if(Gi===void 0)try{throw Error()}catch(a){var i=a.stack.trim().match(/\n( *(at )?)/);Gi=i&&i[1]||"",wn=-1<a.stack.indexOf(`
    at`)?" (<anonymous>)":-1<a.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Gi+e+wn}var ys=!1;function Qi(e,i){if(!e||ys)return"";ys=!0;var a=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var l={DetermineComponentFrameRoot:function(){try{if(i){var $=function(){throw Error()};if(Object.defineProperty($.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct($,[])}catch(G){var F=G}Reflect.construct(e,[],$)}else{try{$.call()}catch(G){F=G}e.call($.prototype)}}else{try{throw Error()}catch(G){F=G}($=e())&&typeof $.catch=="function"&&$.catch(function(){})}}catch(G){if(G&&F&&typeof G.stack=="string")return[G.stack,F.stack]}return[null,null]}};l.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var f=Object.getOwnPropertyDescriptor(l.DetermineComponentFrameRoot,"name");f&&f.configurable&&Object.defineProperty(l.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var d=l.DetermineComponentFrameRoot(),_=d[0],T=d[1];if(_&&T){var V=_.split(`
`),B=T.split(`
`);for(f=l=0;l<V.length&&!V[l].includes("DetermineComponentFrameRoot");)l++;for(;f<B.length&&!B[f].includes("DetermineComponentFrameRoot");)f++;if(l===V.length||f===B.length)for(l=V.length-1,f=B.length-1;1<=l&&0<=f&&V[l]!==B[f];)f--;for(;1<=l&&0<=f;l--,f--)if(V[l]!==B[f]){if(l!==1||f!==1)do if(l--,f--,0>f||V[l]!==B[f]){var Y=`
`+V[l].replace(" at new "," at ");return e.displayName&&Y.includes("<anonymous>")&&(Y=Y.replace("<anonymous>",e.displayName)),Y}while(1<=l&&0<=f);break}}}finally{ys=!1,Error.prepareStackTrace=a}return(a=e?e.displayName||e.name:"")?Xe(a):""}function _s(e,i){switch(e.tag){case 26:case 27:case 5:return Xe(e.type);case 16:return Xe("Lazy");case 13:return e.child!==i&&i!==null?Xe("Suspense Fallback"):Xe("Suspense");case 19:return Xe("SuspenseList");case 0:case 15:return Qi(e.type,!1);case 11:return Qi(e.type.render,!1);case 1:return Qi(e.type,!0);case 31:return Xe("Activity");default:return""}}function fe(e){try{var i="",a=null;do i+=_s(e,a),a=e,e=e.return;while(e);return i}catch(l){return`
Error generating stack: `+l.message+`
`+l.stack}}var bt=Object.prototype.hasOwnProperty,dt=s.unstable_scheduleCallback,Nt=s.unstable_cancelCallback,pn=s.unstable_shouldYield,te=s.unstable_requestPaint,De=s.unstable_now,vs=s.unstable_getCurrentPriorityLevel,qo=s.unstable_ImmediatePriority,Fo=s.unstable_UserBlockingPriority,Ar=s.unstable_NormalPriority,xf=s.unstable_LowPriority,Uu=s.unstable_IdlePriority,ju=s.log,Bu=s.unstable_setDisableYieldValue,ii=null,Ze=null;function Ln(e){if(typeof ju=="function"&&Bu(e),Ze&&typeof Ze.setStrictMode=="function")try{Ze.setStrictMode(ii,e)}catch{}}var Se=Math.clz32?Math.clz32:Fu,qu=Math.log,Ea=Math.LN2;function Fu(e){return e>>>=0,e===0?32:31-(qu(e)/Ea|0)|0}var pi=256,Es=262144,Ce=4194304;function yi(e){var i=e&42;if(i!==0)return i;switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return e&261888;case 262144:case 524288:case 1048576:case 2097152:return e&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return e&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return e}}function _i(e,i,a){var l=e.pendingLanes;if(l===0)return 0;var f=0,d=e.suspendedLanes,_=e.pingedLanes;e=e.warmLanes;var T=l&134217727;return T!==0?(l=T&~d,l!==0?f=yi(l):(_&=T,_!==0?f=yi(_):a||(a=T&~e,a!==0&&(f=yi(a))))):(T=l&~d,T!==0?f=yi(T):_!==0?f=yi(_):a||(a=l&~e,a!==0&&(f=yi(a)))),f===0?0:i!==0&&i!==f&&(i&d)===0&&(d=f&-f,a=i&-i,d>=a||d===32&&(a&4194048)!==0)?i:f}function ri(e,i){return(e.pendingLanes&~(e.suspendedLanes&~e.pingedLanes)&i)===0}function Df(e,i){switch(e){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Hu(){var e=Ce;return Ce<<=1,(Ce&62914560)===0&&(Ce=4194304),e}function vi(e){for(var i=[],a=0;31>a;a++)i.push(e);return i}function Ts(e,i){e.pendingLanes|=i,i!==268435456&&(e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0)}function Cf(e,i,a,l,f,d){var _=e.pendingLanes;e.pendingLanes=a,e.suspendedLanes=0,e.pingedLanes=0,e.warmLanes=0,e.expiredLanes&=a,e.entangledLanes&=a,e.errorRecoveryDisabledLanes&=a,e.shellSuspendCounter=0;var T=e.entanglements,V=e.expirationTimes,B=e.hiddenUpdates;for(a=_&~a;0<a;){var Y=31-Se(a),$=1<<Y;T[Y]=0,V[Y]=-1;var F=B[Y];if(F!==null)for(B[Y]=null,Y=0;Y<F.length;Y++){var G=F[Y];G!==null&&(G.lane&=-536870913)}a&=~$}l!==0&&As(e,l,0),d!==0&&f===0&&e.tag!==0&&(e.suspendedLanes|=d&~(_&~i))}function As(e,i,a){e.pendingLanes|=i,e.suspendedLanes&=~i;var l=31-Se(i);e.entangledLanes|=i,e.entanglements[l]=e.entanglements[l]|1073741824|a&261930}function Ho(e,i){var a=e.entangledLanes|=i;for(e=e.entanglements;a;){var l=31-Se(a),f=1<<l;f&i|e[l]&i&&(e[l]|=i),a&=~f}}function Go(e,i){var a=i&-i;return a=(a&42)!==0?1:bs(a),(a&(e.suspendedLanes|i))!==0?0:a}function bs(e){switch(e){case 2:e=1;break;case 8:e=4;break;case 32:e=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:e=128;break;case 268435456:e=134217728;break;default:e=0}return e}function Ki(e){return e&=-e,2<e?8<e?(e&134217727)!==0?32:268435456:8:2}function Gu(){var e=tt.p;return e!==0?e:(e=window.event,e===void 0?32:Mv(e.type))}function si(e,i){var a=tt.p;try{return tt.p=e,i()}finally{tt.p=a}}var ai=Math.random().toString(36).slice(2),Ve="__reactFiber$"+ai,He="__reactProps$"+ai,Ei="__reactContainer$"+ai,Ta="__reactEvents$"+ai,Vf="__reactListeners$"+ai,Qu="__reactHandles$"+ai,Ku="__reactResources$"+ai,Ti="__reactMarker$"+ai;function Aa(e){delete e[Ve],delete e[He],delete e[Ta],delete e[Vf],delete e[Qu]}function Ai(e){var i=e[Ve];if(i)return i;for(var a=e.parentNode;a;){if(i=a[Ei]||a[Ve]){if(a=i.alternate,i.child!==null||a!==null&&a.child!==null)for(e=yv(e);e!==null;){if(a=e[Ve])return a;e=yv(e)}return i}e=a,a=e.parentNode}return null}function Un(e){if(e=e[Ve]||e[Ei]){var i=e.tag;if(i===5||i===6||i===13||i===31||i===26||i===27||i===3)return e}return null}function In(e){var i=e.tag;if(i===5||i===26||i===27||i===6)return e.stateNode;throw Error(r(33))}function bi(e){var i=e[Ku];return i||(i=e[Ku]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function Ne(e){e[Ti]=!0}var Qo=new Set,Ko={};function Si(e,i){wi(e,i),wi(e+"Capture",i)}function wi(e,i){for(Ko[e]=i,e=0;e<i.length;e++)Qo.add(i[e])}var Yo=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Xo={},Zo={};function Yu(e){return bt.call(Zo,e)?!0:bt.call(Xo,e)?!1:Yo.test(e)?Zo[e]=!0:(Xo[e]=!0,!1)}function ba(e,i,a){if(Yu(i))if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":e.removeAttribute(i);return;case"boolean":var l=i.toLowerCase().slice(0,5);if(l!=="data-"&&l!=="aria-"){e.removeAttribute(i);return}}e.setAttribute(i,""+a)}}function Rn(e,i,a){if(a===null)e.removeAttribute(i);else{switch(typeof a){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(i);return}e.setAttribute(i,""+a)}}function Me(e,i,a,l){if(l===null)e.removeAttribute(a);else{switch(typeof l){case"undefined":case"function":case"symbol":case"boolean":e.removeAttribute(a);return}e.setAttributeNS(i,a,""+l)}}function Ge(e){switch(typeof e){case"bigint":case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function br(e){var i=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function Jo(e,i,a){var l=Object.getOwnPropertyDescriptor(e.constructor.prototype,i);if(!e.hasOwnProperty(i)&&typeof l<"u"&&typeof l.get=="function"&&typeof l.set=="function"){var f=l.get,d=l.set;return Object.defineProperty(e,i,{configurable:!0,get:function(){return f.call(this)},set:function(_){a=""+_,d.call(this,_)}}),Object.defineProperty(e,i,{enumerable:l.enumerable}),{getValue:function(){return a},setValue:function(_){a=""+_},stopTracking:function(){e._valueTracker=null,delete e[i]}}}}function ee(e){if(!e._valueTracker){var i=br(e)?"checked":"value";e._valueTracker=Jo(e,i,""+e[i])}}function Ss(e){if(!e)return!1;var i=e._valueTracker;if(!i)return!0;var a=i.getValue(),l="";return e&&(l=br(e)?e.checked?"true":"false":e.value),e=l,e!==a?(i.setValue(e),!0):!1}function Ii(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}var ws=/[\n"\\]/g;function yn(e){return e.replace(ws,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function Sa(e,i,a,l,f,d,_,T){e.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?e.type=_:e.removeAttribute("type"),i!=null?_==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+Ge(i)):e.value!==""+Ge(i)&&(e.value=""+Ge(i)):_!=="submit"&&_!=="reset"||e.removeAttribute("value"),i!=null?$o(e,_,Ge(i)):a!=null?$o(e,_,Ge(a)):l!=null&&e.removeAttribute("value"),f==null&&d!=null&&(e.defaultChecked=!!d),f!=null&&(e.checked=f&&typeof f!="function"&&typeof f!="symbol"),T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"?e.name=""+Ge(T):e.removeAttribute("name")}function Xu(e,i,a,l,f,d,_,T){if(d!=null&&typeof d!="function"&&typeof d!="symbol"&&typeof d!="boolean"&&(e.type=d),i!=null||a!=null){if(!(d!=="submit"&&d!=="reset"||i!=null)){ee(e);return}a=a!=null?""+Ge(a):"",i=i!=null?""+Ge(i):a,T||i===e.value||(e.value=i),e.defaultValue=i}l=l??f,l=typeof l!="function"&&typeof l!="symbol"&&!!l,e.checked=T?e.checked:!!l,e.defaultChecked=!!l,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(e.name=_),ee(e)}function $o(e,i,a){i==="number"&&Ii(e.ownerDocument)===e||e.defaultValue===""+a||(e.defaultValue=""+a)}function Sr(e,i,a,l){if(e=e.options,i){i={};for(var f=0;f<a.length;f++)i["$"+a[f]]=!0;for(a=0;a<e.length;a++)f=i.hasOwnProperty("$"+e[a].value),e[a].selected!==f&&(e[a].selected=f),f&&l&&(e[a].defaultSelected=!0)}else{for(a=""+Ge(a),i=null,f=0;f<e.length;f++){if(e[f].value===a){e[f].selected=!0,l&&(e[f].defaultSelected=!0);return}i!==null||e[f].disabled||(i=e[f])}i!==null&&(i.selected=!0)}}function Zu(e,i,a){if(i!=null&&(i=""+Ge(i),i!==e.value&&(e.value=i),a==null)){e.defaultValue!==i&&(e.defaultValue=i);return}e.defaultValue=a!=null?""+Ge(a):""}function wr(e,i,a,l){if(i==null){if(l!=null){if(a!=null)throw Error(r(92));if(Ot(l)){if(1<l.length)throw Error(r(93));l=l[0]}a=l}a==null&&(a=""),i=a}a=Ge(i),e.defaultValue=a,l=e.textContent,l===a&&l!==""&&l!==null&&(e.value=l),ee(e)}function _n(e,i){if(i){var a=e.firstChild;if(a&&a===e.lastChild&&a.nodeType===3){a.nodeValue=i;return}}e.textContent=i}var Ju=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wo(e,i,a){var l=i.indexOf("--")===0;a==null||typeof a=="boolean"||a===""?l?e.setProperty(i,""):i==="float"?e.cssFloat="":e[i]="":l?e.setProperty(i,a):typeof a!="number"||a===0||Ju.has(i)?i==="float"?e.cssFloat=a:e[i]=(""+a).trim():e[i]=a+"px"}function tl(e,i,a){if(i!=null&&typeof i!="object")throw Error(r(62));if(e=e.style,a!=null){for(var l in a)!a.hasOwnProperty(l)||i!=null&&i.hasOwnProperty(l)||(l.indexOf("--")===0?e.setProperty(l,""):l==="float"?e.cssFloat="":e[l]="");for(var f in i)l=i[f],i.hasOwnProperty(f)&&a[f]!==l&&Wo(e,f,l)}else for(var d in i)i.hasOwnProperty(d)&&Wo(e,d,i[d])}function wa(e){if(e.indexOf("-")===-1)return!1;switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var $u=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Ir=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Ia(e){return Ir.test(""+e)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":e}function oi(){}var el=null;function jn(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var Rr=null,Ri=null;function Is(e){var i=Un(e);if(i&&(e=i.stateNode)){var a=e[He]||null;t:switch(e=i.stateNode,i.type){case"input":if(Sa(e,a.value,a.defaultValue,a.defaultValue,a.checked,a.defaultChecked,a.type,a.name),i=a.name,a.type==="radio"&&i!=null){for(a=e;a.parentNode;)a=a.parentNode;for(a=a.querySelectorAll('input[name="'+yn(""+i)+'"][type="radio"]'),i=0;i<a.length;i++){var l=a[i];if(l!==e&&l.form===e.form){var f=l[He]||null;if(!f)throw Error(r(90));Sa(l,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name)}}for(i=0;i<a.length;i++)l=a[i],l.form===e.form&&Ss(l)}break t;case"textarea":Zu(e,a.value,a.defaultValue);break t;case"select":i=a.value,i!=null&&Sr(e,!!a.multiple,i,!1)}}}var Ra=!1;function xr(e,i,a){if(Ra)return e(i,a);Ra=!0;try{var l=e(i);return l}finally{if(Ra=!1,(Rr!==null||Ri!==null)&&(Gc(),Rr&&(i=Rr,e=Ri,Ri=Rr=null,Is(i),e)))for(i=0;i<e.length;i++)Is(e[i])}}function li(e,i){var a=e.stateNode;if(a===null)return null;var l=a[He]||null;if(l===null)return null;a=l[i];t:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(l=!l.disabled)||(e=e.type,l=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!l;break t;default:e=!1}if(e)return null;if(a&&typeof a!="function")throw Error(r(231,i,typeof a));return a}var Bn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Rs=!1;if(Bn)try{var ae={};Object.defineProperty(ae,"passive",{get:function(){Rs=!0}}),window.addEventListener("test",ae,ae),window.removeEventListener("test",ae,ae)}catch{Rs=!1}var xi=null,nl=null,xs=null;function il(){if(xs)return xs;var e,i=nl,a=i.length,l,f="value"in xi?xi.value:xi.textContent,d=f.length;for(e=0;e<a&&i[e]===f[e];e++);var _=a-e;for(l=1;l<=_&&i[a-l]===f[d-l];l++);return xs=f.slice(e,1<l?1-l:void 0)}function Ds(e){var i=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&i===13&&(e=13)):e=i,e===10&&(e=13),32<=e||e===13?e:0}function Yi(){return!0}function ui(){return!1}function Je(e){function i(a,l,f,d,_){this._reactName=a,this._targetInst=f,this.type=l,this.nativeEvent=d,this.target=_,this.currentTarget=null;for(var T in e)e.hasOwnProperty(T)&&(a=e[T],this[T]=a?a(d):d[T]);return this.isDefaultPrevented=(d.defaultPrevented!=null?d.defaultPrevented:d.returnValue===!1)?Yi:ui,this.isPropagationStopped=ui,this}return A(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var a=this.nativeEvent;a&&(a.preventDefault?a.preventDefault():typeof a.returnValue!="unknown"&&(a.returnValue=!1),this.isDefaultPrevented=Yi)},stopPropagation:function(){var a=this.nativeEvent;a&&(a.stopPropagation?a.stopPropagation():typeof a.cancelBubble!="unknown"&&(a.cancelBubble=!0),this.isPropagationStopped=Yi)},persist:function(){},isPersistent:Yi}),i}var Xi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Di=Je(Xi),Dr=A({},Xi,{view:0,detail:0}),rl=Je(Dr),Cr,xa,Ci,Da=A({},Dr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Vr,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Ci&&(Ci&&e.type==="mousemove"?(Cr=e.screenX-Ci.screenX,xa=e.screenY-Ci.screenY):xa=Cr=0,Ci=e),Cr)},movementY:function(e){return"movementY"in e?e.movementY:xa}}),sl=Je(Da),Cs=A({},Da,{dataTransfer:0}),Wu=Je(Cs),tc=A({},Dr,{relatedTarget:0}),Vs=Je(tc),al=A({},Xi,{animationName:0,elapsedTime:0,pseudoElement:0}),ec=Je(al),Ca=A({},Xi,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),nc=Je(Ca),ic=A({},Xi,{data:0}),Vi=Je(ic),rc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sc={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ac={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function oc(e){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(e):(e=ac[e])?!!i[e]:!1}function Vr(){return oc}var fn=A({},Dr,{key:function(e){if(e.key){var i=rc[e.key]||e.key;if(i!=="Unidentified")return i}return e.type==="keypress"?(e=Ds(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?sc[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Vr,charCode:function(e){return e.type==="keypress"?Ds(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Ds(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),lc=Je(fn),uc=A({},Da,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zi=Je(uc),c=A({},Dr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Vr}),p=Je(c),v=A({},Xi,{propertyName:0,elapsedTime:0,pseudoElement:0}),b=Je(v),L=A({},Da,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),H=Je(L),it=A({},Xi,{newState:0,oldState:0}),Ct=Je(it),we=[9,13,27,32],Jt=Bn&&"CompositionEvent"in window,ge=null;Bn&&"documentMode"in document&&(ge=document.documentMode);var qn=Bn&&"TextEvent"in window&&!ge,Ni=Bn&&(!Jt||ge&&8<ge&&11>=ge),ci=" ",hi=!1;function Ns(e,i){switch(e){case"keyup":return we.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Va(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Na=!1;function pA(e,i){switch(e){case"compositionend":return Va(i);case"keypress":return i.which!==32?null:(hi=!0,ci);case"textInput":return e=i.data,e===ci&&hi?null:e;default:return null}}function yA(e,i){if(Na)return e==="compositionend"||!Jt&&Ns(e,i)?(e=il(),xs=nl=xi=null,Na=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Ni&&i.locale!=="ko"?null:i.data;default:return null}}var _A={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i==="input"?!!_A[e.type]:i==="textarea"}function Tp(e,i,a,l){Rr?Ri?Ri.push(l):Ri=[l]:Rr=l,i=$c(i,"onChange"),0<i.length&&(a=new Di("onChange","change",null,a,l),e.push({event:a,listeners:i}))}var ol=null,ll=null;function vA(e){iv(e,0)}function cc(e){var i=In(e);if(Ss(i))return e}function Ap(e,i){if(e==="change")return i}var bp=!1;if(Bn){var Nf;if(Bn){var Mf="oninput"in document;if(!Mf){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),Mf=typeof Sp.oninput=="function"}Nf=Mf}else Nf=!1;bp=Nf&&(!document.documentMode||9<document.documentMode)}function wp(){ol&&(ol.detachEvent("onpropertychange",Ip),ll=ol=null)}function Ip(e){if(e.propertyName==="value"&&cc(ll)){var i=[];Tp(i,ll,e,jn(e)),xr(vA,i)}}function EA(e,i,a){e==="focusin"?(wp(),ol=i,ll=a,ol.attachEvent("onpropertychange",Ip)):e==="focusout"&&wp()}function TA(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return cc(ll)}function AA(e,i){if(e==="click")return cc(i)}function bA(e,i){if(e==="input"||e==="change")return cc(i)}function SA(e,i){return e===i&&(e!==0||1/e===1/i)||e!==e&&i!==i}var xn=typeof Object.is=="function"?Object.is:SA;function ul(e,i){if(xn(e,i))return!0;if(typeof e!="object"||e===null||typeof i!="object"||i===null)return!1;var a=Object.keys(e),l=Object.keys(i);if(a.length!==l.length)return!1;for(l=0;l<a.length;l++){var f=a[l];if(!bt.call(i,f)||!xn(e[f],i[f]))return!1}return!0}function Rp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function xp(e,i){var a=Rp(e);e=0;for(var l;a;){if(a.nodeType===3){if(l=e+a.textContent.length,e<=i&&l>=i)return{node:a,offset:i-e};e=l}t:{for(;a;){if(a.nextSibling){a=a.nextSibling;break t}a=a.parentNode}a=void 0}a=Rp(a)}}function Dp(e,i){return e&&i?e===i?!0:e&&e.nodeType===3?!1:i&&i.nodeType===3?Dp(e,i.parentNode):"contains"in e?e.contains(i):e.compareDocumentPosition?!!(e.compareDocumentPosition(i)&16):!1:!1}function Cp(e){e=e!=null&&e.ownerDocument!=null&&e.ownerDocument.defaultView!=null?e.ownerDocument.defaultView:window;for(var i=Ii(e.document);i instanceof e.HTMLIFrameElement;){try{var a=typeof i.contentWindow.location.href=="string"}catch{a=!1}if(a)e=i.contentWindow;else break;i=Ii(e.document)}return i}function Of(e){var i=e&&e.nodeName&&e.nodeName.toLowerCase();return i&&(i==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||i==="textarea"||e.contentEditable==="true")}var wA=Bn&&"documentMode"in document&&11>=document.documentMode,Ma=null,Pf=null,cl=null,zf=!1;function Vp(e,i,a){var l=a.window===a?a.document:a.nodeType===9?a:a.ownerDocument;zf||Ma==null||Ma!==Ii(l)||(l=Ma,"selectionStart"in l&&Of(l)?l={start:l.selectionStart,end:l.selectionEnd}:(l=(l.ownerDocument&&l.ownerDocument.defaultView||window).getSelection(),l={anchorNode:l.anchorNode,anchorOffset:l.anchorOffset,focusNode:l.focusNode,focusOffset:l.focusOffset}),cl&&ul(cl,l)||(cl=l,l=$c(Pf,"onSelect"),0<l.length&&(i=new Di("onSelect","select",null,i,a),e.push({event:i,listeners:l}),i.target=Ma)))}function Ms(e,i){var a={};return a[e.toLowerCase()]=i.toLowerCase(),a["Webkit"+e]="webkit"+i,a["Moz"+e]="moz"+i,a}var Oa={animationend:Ms("Animation","AnimationEnd"),animationiteration:Ms("Animation","AnimationIteration"),animationstart:Ms("Animation","AnimationStart"),transitionrun:Ms("Transition","TransitionRun"),transitionstart:Ms("Transition","TransitionStart"),transitioncancel:Ms("Transition","TransitionCancel"),transitionend:Ms("Transition","TransitionEnd")},kf={},Np={};Bn&&(Np=document.createElement("div").style,"AnimationEvent"in window||(delete Oa.animationend.animation,delete Oa.animationiteration.animation,delete Oa.animationstart.animation),"TransitionEvent"in window||delete Oa.transitionend.transition);function Os(e){if(kf[e])return kf[e];if(!Oa[e])return e;var i=Oa[e],a;for(a in i)if(i.hasOwnProperty(a)&&a in Np)return kf[e]=i[a];return e}var Mp=Os("animationend"),Op=Os("animationiteration"),Pp=Os("animationstart"),IA=Os("transitionrun"),RA=Os("transitionstart"),xA=Os("transitioncancel"),zp=Os("transitionend"),kp=new Map,Lf="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Lf.push("scrollEnd");function fi(e,i){kp.set(e,i),Si(i,[e])}var hc=typeof reportError=="function"?reportError:function(e){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof e=="object"&&e!==null&&typeof e.message=="string"?String(e.message):String(e),error:e});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",e);return}console.error(e)},Fn=[],Pa=0,Uf=0;function fc(){for(var e=Pa,i=Uf=Pa=0;i<e;){var a=Fn[i];Fn[i++]=null;var l=Fn[i];Fn[i++]=null;var f=Fn[i];Fn[i++]=null;var d=Fn[i];if(Fn[i++]=null,l!==null&&f!==null){var _=l.pending;_===null?f.next=f:(f.next=_.next,_.next=f),l.pending=f}d!==0&&Lp(a,f,d)}}function dc(e,i,a,l){Fn[Pa++]=e,Fn[Pa++]=i,Fn[Pa++]=a,Fn[Pa++]=l,Uf|=l,e.lanes|=l,e=e.alternate,e!==null&&(e.lanes|=l)}function jf(e,i,a,l){return dc(e,i,a,l),mc(e)}function Ps(e,i){return dc(e,null,null,i),mc(e)}function Lp(e,i,a){e.lanes|=a;var l=e.alternate;l!==null&&(l.lanes|=a);for(var f=!1,d=e.return;d!==null;)d.childLanes|=a,l=d.alternate,l!==null&&(l.childLanes|=a),d.tag===22&&(e=d.stateNode,e===null||e._visibility&1||(f=!0)),e=d,d=d.return;return e.tag===3?(d=e.stateNode,f&&i!==null&&(f=31-Se(a),e=d.hiddenUpdates,l=e[f],l===null?e[f]=[i]:l.push(i),i.lane=a|536870912),d):null}function mc(e){if(50<Nl)throw Nl=0,Xd=null,Error(r(185));for(var i=e.return;i!==null;)e=i,i=e.return;return e.tag===3?e.stateNode:null}var za={};function DA(e,i,a,l){this.tag=e,this.key=a,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=l,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Dn(e,i,a,l){return new DA(e,i,a,l)}function Bf(e){return e=e.prototype,!(!e||!e.isReactComponent)}function Ji(e,i){var a=e.alternate;return a===null?(a=Dn(e.tag,i,e.key,e.mode),a.elementType=e.elementType,a.type=e.type,a.stateNode=e.stateNode,a.alternate=e,e.alternate=a):(a.pendingProps=i,a.type=e.type,a.flags=0,a.subtreeFlags=0,a.deletions=null),a.flags=e.flags&65011712,a.childLanes=e.childLanes,a.lanes=e.lanes,a.child=e.child,a.memoizedProps=e.memoizedProps,a.memoizedState=e.memoizedState,a.updateQueue=e.updateQueue,i=e.dependencies,a.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},a.sibling=e.sibling,a.index=e.index,a.ref=e.ref,a.refCleanup=e.refCleanup,a}function Up(e,i){e.flags&=65011714;var a=e.alternate;return a===null?(e.childLanes=0,e.lanes=i,e.child=null,e.subtreeFlags=0,e.memoizedProps=null,e.memoizedState=null,e.updateQueue=null,e.dependencies=null,e.stateNode=null):(e.childLanes=a.childLanes,e.lanes=a.lanes,e.child=a.child,e.subtreeFlags=0,e.deletions=null,e.memoizedProps=a.memoizedProps,e.memoizedState=a.memoizedState,e.updateQueue=a.updateQueue,e.type=a.type,i=a.dependencies,e.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),e}function gc(e,i,a,l,f,d){var _=0;if(l=e,typeof e=="function")Bf(e)&&(_=1);else if(typeof e=="string")_=Ob(e,a,ut.current)?26:e==="html"||e==="head"||e==="body"?27:5;else t:switch(e){case C:return e=Dn(31,a,i,f),e.elementType=C,e.lanes=d,e;case Q:return zs(a.children,f,d,i);case X:_=8,f|=24;break;case st:return e=Dn(12,a,i,f|2),e.elementType=st,e.lanes=d,e;case St:return e=Dn(13,a,i,f),e.elementType=St,e.lanes=d,e;case yt:return e=Dn(19,a,i,f),e.elementType=yt,e.lanes=d,e;default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case at:_=10;break t;case rt:_=9;break t;case At:_=11;break t;case D:_=14;break t;case I:_=16,l=null;break t}_=29,a=Error(r(130,e===null?"null":typeof e,"")),l=null}return i=Dn(_,a,i,f),i.elementType=e,i.type=l,i.lanes=d,i}function zs(e,i,a,l){return e=Dn(7,e,l,i),e.lanes=a,e}function qf(e,i,a){return e=Dn(6,e,null,i),e.lanes=a,e}function jp(e){var i=Dn(18,null,null,0);return i.stateNode=e,i}function Ff(e,i,a){return i=Dn(4,e.children!==null?e.children:[],e.key,i),i.lanes=a,i.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},i}var Bp=new WeakMap;function Hn(e,i){if(typeof e=="object"&&e!==null){var a=Bp.get(e);return a!==void 0?a:(i={value:e,source:i,stack:fe(i)},Bp.set(e,i),i)}return{value:e,source:i,stack:fe(i)}}var ka=[],La=0,pc=null,hl=0,Gn=[],Qn=0,Nr=null,Mi=1,Oi="";function $i(e,i){ka[La++]=hl,ka[La++]=pc,pc=e,hl=i}function qp(e,i,a){Gn[Qn++]=Mi,Gn[Qn++]=Oi,Gn[Qn++]=Nr,Nr=e;var l=Mi;e=Oi;var f=32-Se(l)-1;l&=~(1<<f),a+=1;var d=32-Se(i)+f;if(30<d){var _=f-f%5;d=(l&(1<<_)-1).toString(32),l>>=_,f-=_,Mi=1<<32-Se(i)+f|a<<f|l,Oi=d+e}else Mi=1<<d|a<<f|l,Oi=e}function Hf(e){e.return!==null&&($i(e,1),qp(e,1,0))}function Gf(e){for(;e===pc;)pc=ka[--La],ka[La]=null,hl=ka[--La],ka[La]=null;for(;e===Nr;)Nr=Gn[--Qn],Gn[Qn]=null,Oi=Gn[--Qn],Gn[Qn]=null,Mi=Gn[--Qn],Gn[Qn]=null}function Fp(e,i){Gn[Qn++]=Mi,Gn[Qn++]=Oi,Gn[Qn++]=Nr,Mi=i.id,Oi=i.overflow,Nr=e}var $e=null,de=null,Ht=!1,Mr=null,Kn=!1,Qf=Error(r(519));function Or(e){var i=Error(r(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw fl(Hn(i,e)),Qf}function Hp(e){var i=e.stateNode,a=e.type,l=e.memoizedProps;switch(i[Ve]=e,i[He]=l,a){case"dialog":jt("cancel",i),jt("close",i);break;case"iframe":case"object":case"embed":jt("load",i);break;case"video":case"audio":for(a=0;a<Ol.length;a++)jt(Ol[a],i);break;case"source":jt("error",i);break;case"img":case"image":case"link":jt("error",i),jt("load",i);break;case"details":jt("toggle",i);break;case"input":jt("invalid",i),Xu(i,l.value,l.defaultValue,l.checked,l.defaultChecked,l.type,l.name,!0);break;case"select":jt("invalid",i);break;case"textarea":jt("invalid",i),wr(i,l.value,l.defaultValue,l.children)}a=l.children,typeof a!="string"&&typeof a!="number"&&typeof a!="bigint"||i.textContent===""+a||l.suppressHydrationWarning===!0||ov(i.textContent,a)?(l.popover!=null&&(jt("beforetoggle",i),jt("toggle",i)),l.onScroll!=null&&jt("scroll",i),l.onScrollEnd!=null&&jt("scrollend",i),l.onClick!=null&&(i.onclick=oi),i=!0):i=!1,i||Or(e,!0)}function Gp(e){for($e=e.return;$e;)switch($e.tag){case 5:case 31:case 13:Kn=!1;return;case 27:case 3:Kn=!0;return;default:$e=$e.return}}function Ua(e){if(e!==$e)return!1;if(!Ht)return Gp(e),Ht=!0,!1;var i=e.tag,a;if((a=i!==3&&i!==27)&&((a=i===5)&&(a=e.type,a=!(a!=="form"&&a!=="button")||cm(e.type,e.memoizedProps)),a=!a),a&&de&&Or(e),Gp(e),i===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));de=pv(e)}else if(i===31){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(317));de=pv(e)}else i===27?(i=de,Yr(e.type)?(e=gm,gm=null,de=e):de=i):de=$e?Xn(e.stateNode.nextSibling):null;return!0}function ks(){de=$e=null,Ht=!1}function Kf(){var e=Mr;return e!==null&&(An===null?An=e:An.push.apply(An,e),Mr=null),e}function fl(e){Mr===null?Mr=[e]:Mr.push(e)}var Yf=O(null),Ls=null,Wi=null;function Pr(e,i,a){ot(Yf,i._currentValue),i._currentValue=a}function tr(e){e._currentValue=Yf.current,J(Yf)}function Xf(e,i,a){for(;e!==null;){var l=e.alternate;if((e.childLanes&i)!==i?(e.childLanes|=i,l!==null&&(l.childLanes|=i)):l!==null&&(l.childLanes&i)!==i&&(l.childLanes|=i),e===a)break;e=e.return}}function Zf(e,i,a,l){var f=e.child;for(f!==null&&(f.return=e);f!==null;){var d=f.dependencies;if(d!==null){var _=f.child;d=d.firstContext;t:for(;d!==null;){var T=d;d=f;for(var V=0;V<i.length;V++)if(T.context===i[V]){d.lanes|=a,T=d.alternate,T!==null&&(T.lanes|=a),Xf(d.return,a,e),l||(_=null);break t}d=T.next}}else if(f.tag===18){if(_=f.return,_===null)throw Error(r(341));_.lanes|=a,d=_.alternate,d!==null&&(d.lanes|=a),Xf(_,a,e),_=null}else _=f.child;if(_!==null)_.return=f;else for(_=f;_!==null;){if(_===e){_=null;break}if(f=_.sibling,f!==null){f.return=_.return,_=f;break}_=_.return}f=_}}function ja(e,i,a,l){e=null;for(var f=i,d=!1;f!==null;){if(!d){if((f.flags&524288)!==0)d=!0;else if((f.flags&262144)!==0)break}if(f.tag===10){var _=f.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var T=f.type;xn(f.pendingProps.value,_.value)||(e!==null?e.push(T):e=[T])}}else if(f===Lt.current){if(_=f.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==f.memoizedState.memoizedState&&(e!==null?e.push(Ul):e=[Ul])}f=f.return}e!==null&&Zf(i,e,a,l),i.flags|=262144}function yc(e){for(e=e.firstContext;e!==null;){if(!xn(e.context._currentValue,e.memoizedValue))return!0;e=e.next}return!1}function Us(e){Ls=e,Wi=null,e=e.dependencies,e!==null&&(e.firstContext=null)}function We(e){return Qp(Ls,e)}function _c(e,i){return Ls===null&&Us(e),Qp(e,i)}function Qp(e,i){var a=i._currentValue;if(i={context:i,memoizedValue:a,next:null},Wi===null){if(e===null)throw Error(r(308));Wi=i,e.dependencies={lanes:0,firstContext:i},e.flags|=524288}else Wi=Wi.next=i;return a}var CA=typeof AbortController<"u"?AbortController:function(){var e=[],i=this.signal={aborted:!1,addEventListener:function(a,l){e.push(l)}};this.abort=function(){i.aborted=!0,e.forEach(function(a){return a()})}},VA=s.unstable_scheduleCallback,NA=s.unstable_NormalPriority,Oe={$$typeof:at,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Jf(){return{controller:new CA,data:new Map,refCount:0}}function dl(e){e.refCount--,e.refCount===0&&VA(NA,function(){e.controller.abort()})}var ml=null,$f=0,Ba=0,qa=null;function MA(e,i){if(ml===null){var a=ml=[];$f=0,Ba=em(),qa={status:"pending",value:void 0,then:function(l){a.push(l)}}}return $f++,i.then(Kp,Kp),i}function Kp(){if(--$f===0&&ml!==null){qa!==null&&(qa.status="fulfilled");var e=ml;ml=null,Ba=0,qa=null;for(var i=0;i<e.length;i++)(0,e[i])()}}function OA(e,i){var a=[],l={status:"pending",value:null,reason:null,then:function(f){a.push(f)}};return e.then(function(){l.status="fulfilled",l.value=i;for(var f=0;f<a.length;f++)(0,a[f])(i)},function(f){for(l.status="rejected",l.reason=f,f=0;f<a.length;f++)(0,a[f])(void 0)}),l}var Yp=q.S;q.S=function(e,i){V_=De(),typeof i=="object"&&i!==null&&typeof i.then=="function"&&MA(e,i),Yp!==null&&Yp(e,i)};var js=O(null);function Wf(){var e=js.current;return e!==null?e:ce.pooledCache}function vc(e,i){i===null?ot(js,js.current):ot(js,i.pool)}function Xp(){var e=Wf();return e===null?null:{parent:Oe._currentValue,pool:e}}var Fa=Error(r(460)),td=Error(r(474)),Ec=Error(r(542)),Tc={then:function(){}};function Zp(e){return e=e.status,e==="fulfilled"||e==="rejected"}function Jp(e,i,a){switch(a=e[a],a===void 0?e.push(i):a!==i&&(i.then(oi,oi),i=a),i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Wp(e),e;default:if(typeof i.status=="string")i.then(oi,oi);else{if(e=ce,e!==null&&100<e.shellSuspendCounter)throw Error(r(482));e=i,e.status="pending",e.then(function(l){if(i.status==="pending"){var f=i;f.status="fulfilled",f.value=l}},function(l){if(i.status==="pending"){var f=i;f.status="rejected",f.reason=l}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw e=i.reason,Wp(e),e}throw qs=i,Fa}}function Bs(e){try{var i=e._init;return i(e._payload)}catch(a){throw a!==null&&typeof a=="object"&&typeof a.then=="function"?(qs=a,Fa):a}}var qs=null;function $p(){if(qs===null)throw Error(r(459));var e=qs;return qs=null,e}function Wp(e){if(e===Fa||e===Ec)throw Error(r(483))}var Ha=null,gl=0;function Ac(e){var i=gl;return gl+=1,Ha===null&&(Ha=[]),Jp(Ha,e,i)}function pl(e,i){i=i.props.ref,e.ref=i!==void 0?i:null}function bc(e,i){throw i.$$typeof===S?Error(r(525)):(e=Object.prototype.toString.call(i),Error(r(31,e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)))}function ty(e){function i(z,M){if(e){var j=z.deletions;j===null?(z.deletions=[M],z.flags|=16):j.push(M)}}function a(z,M){if(!e)return null;for(;M!==null;)i(z,M),M=M.sibling;return null}function l(z){for(var M=new Map;z!==null;)z.key!==null?M.set(z.key,z):M.set(z.index,z),z=z.sibling;return M}function f(z,M){return z=Ji(z,M),z.index=0,z.sibling=null,z}function d(z,M,j){return z.index=j,e?(j=z.alternate,j!==null?(j=j.index,j<M?(z.flags|=67108866,M):j):(z.flags|=67108866,M)):(z.flags|=1048576,M)}function _(z){return e&&z.alternate===null&&(z.flags|=67108866),z}function T(z,M,j,Z){return M===null||M.tag!==6?(M=qf(j,z.mode,Z),M.return=z,M):(M=f(M,j),M.return=z,M)}function V(z,M,j,Z){var _t=j.type;return _t===Q?Y(z,M,j.props.children,Z,j.key):M!==null&&(M.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===I&&Bs(_t)===M.type)?(M=f(M,j.props),pl(M,j),M.return=z,M):(M=gc(j.type,j.key,j.props,null,z.mode,Z),pl(M,j),M.return=z,M)}function B(z,M,j,Z){return M===null||M.tag!==4||M.stateNode.containerInfo!==j.containerInfo||M.stateNode.implementation!==j.implementation?(M=Ff(j,z.mode,Z),M.return=z,M):(M=f(M,j.children||[]),M.return=z,M)}function Y(z,M,j,Z,_t){return M===null||M.tag!==7?(M=zs(j,z.mode,Z,_t),M.return=z,M):(M=f(M,j),M.return=z,M)}function $(z,M,j){if(typeof M=="string"&&M!==""||typeof M=="number"||typeof M=="bigint")return M=qf(""+M,z.mode,j),M.return=z,M;if(typeof M=="object"&&M!==null){switch(M.$$typeof){case U:return j=gc(M.type,M.key,M.props,null,z.mode,j),pl(j,M),j.return=z,j;case W:return M=Ff(M,z.mode,j),M.return=z,M;case I:return M=Bs(M),$(z,M,j)}if(Ot(M)||P(M))return M=zs(M,z.mode,j,null),M.return=z,M;if(typeof M.then=="function")return $(z,Ac(M),j);if(M.$$typeof===at)return $(z,_c(z,M),j);bc(z,M)}return null}function F(z,M,j,Z){var _t=M!==null?M.key:null;if(typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint")return _t!==null?null:T(z,M,""+j,Z);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case U:return j.key===_t?V(z,M,j,Z):null;case W:return j.key===_t?B(z,M,j,Z):null;case I:return j=Bs(j),F(z,M,j,Z)}if(Ot(j)||P(j))return _t!==null?null:Y(z,M,j,Z,null);if(typeof j.then=="function")return F(z,M,Ac(j),Z);if(j.$$typeof===at)return F(z,M,_c(z,j),Z);bc(z,j)}return null}function G(z,M,j,Z,_t){if(typeof Z=="string"&&Z!==""||typeof Z=="number"||typeof Z=="bigint")return z=z.get(j)||null,T(M,z,""+Z,_t);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case U:return z=z.get(Z.key===null?j:Z.key)||null,V(M,z,Z,_t);case W:return z=z.get(Z.key===null?j:Z.key)||null,B(M,z,Z,_t);case I:return Z=Bs(Z),G(z,M,j,Z,_t)}if(Ot(Z)||P(Z))return z=z.get(j)||null,Y(M,z,Z,_t,null);if(typeof Z.then=="function")return G(z,M,j,Ac(Z),_t);if(Z.$$typeof===at)return G(z,M,j,_c(M,Z),_t);bc(M,Z)}return null}function ht(z,M,j,Z){for(var _t=null,Xt=null,mt=M,Mt=M=0,qt=null;mt!==null&&Mt<j.length;Mt++){mt.index>Mt?(qt=mt,mt=null):qt=mt.sibling;var Zt=F(z,mt,j[Mt],Z);if(Zt===null){mt===null&&(mt=qt);break}e&&mt&&Zt.alternate===null&&i(z,mt),M=d(Zt,M,Mt),Xt===null?_t=Zt:Xt.sibling=Zt,Xt=Zt,mt=qt}if(Mt===j.length)return a(z,mt),Ht&&$i(z,Mt),_t;if(mt===null){for(;Mt<j.length;Mt++)mt=$(z,j[Mt],Z),mt!==null&&(M=d(mt,M,Mt),Xt===null?_t=mt:Xt.sibling=mt,Xt=mt);return Ht&&$i(z,Mt),_t}for(mt=l(mt);Mt<j.length;Mt++)qt=G(mt,z,Mt,j[Mt],Z),qt!==null&&(e&&qt.alternate!==null&&mt.delete(qt.key===null?Mt:qt.key),M=d(qt,M,Mt),Xt===null?_t=qt:Xt.sibling=qt,Xt=qt);return e&&mt.forEach(function(Wr){return i(z,Wr)}),Ht&&$i(z,Mt),_t}function Tt(z,M,j,Z){if(j==null)throw Error(r(151));for(var _t=null,Xt=null,mt=M,Mt=M=0,qt=null,Zt=j.next();mt!==null&&!Zt.done;Mt++,Zt=j.next()){mt.index>Mt?(qt=mt,mt=null):qt=mt.sibling;var Wr=F(z,mt,Zt.value,Z);if(Wr===null){mt===null&&(mt=qt);break}e&&mt&&Wr.alternate===null&&i(z,mt),M=d(Wr,M,Mt),Xt===null?_t=Wr:Xt.sibling=Wr,Xt=Wr,mt=qt}if(Zt.done)return a(z,mt),Ht&&$i(z,Mt),_t;if(mt===null){for(;!Zt.done;Mt++,Zt=j.next())Zt=$(z,Zt.value,Z),Zt!==null&&(M=d(Zt,M,Mt),Xt===null?_t=Zt:Xt.sibling=Zt,Xt=Zt);return Ht&&$i(z,Mt),_t}for(mt=l(mt);!Zt.done;Mt++,Zt=j.next())Zt=G(mt,z,Mt,Zt.value,Z),Zt!==null&&(e&&Zt.alternate!==null&&mt.delete(Zt.key===null?Mt:Zt.key),M=d(Zt,M,Mt),Xt===null?_t=Zt:Xt.sibling=Zt,Xt=Zt);return e&&mt.forEach(function(Gb){return i(z,Gb)}),Ht&&$i(z,Mt),_t}function ue(z,M,j,Z){if(typeof j=="object"&&j!==null&&j.type===Q&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case U:t:{for(var _t=j.key;M!==null;){if(M.key===_t){if(_t=j.type,_t===Q){if(M.tag===7){a(z,M.sibling),Z=f(M,j.props.children),Z.return=z,z=Z;break t}}else if(M.elementType===_t||typeof _t=="object"&&_t!==null&&_t.$$typeof===I&&Bs(_t)===M.type){a(z,M.sibling),Z=f(M,j.props),pl(Z,j),Z.return=z,z=Z;break t}a(z,M);break}else i(z,M);M=M.sibling}j.type===Q?(Z=zs(j.props.children,z.mode,Z,j.key),Z.return=z,z=Z):(Z=gc(j.type,j.key,j.props,null,z.mode,Z),pl(Z,j),Z.return=z,z=Z)}return _(z);case W:t:{for(_t=j.key;M!==null;){if(M.key===_t)if(M.tag===4&&M.stateNode.containerInfo===j.containerInfo&&M.stateNode.implementation===j.implementation){a(z,M.sibling),Z=f(M,j.children||[]),Z.return=z,z=Z;break t}else{a(z,M);break}else i(z,M);M=M.sibling}Z=Ff(j,z.mode,Z),Z.return=z,z=Z}return _(z);case I:return j=Bs(j),ue(z,M,j,Z)}if(Ot(j))return ht(z,M,j,Z);if(P(j)){if(_t=P(j),typeof _t!="function")throw Error(r(150));return j=_t.call(j),Tt(z,M,j,Z)}if(typeof j.then=="function")return ue(z,M,Ac(j),Z);if(j.$$typeof===at)return ue(z,M,_c(z,j),Z);bc(z,j)}return typeof j=="string"&&j!==""||typeof j=="number"||typeof j=="bigint"?(j=""+j,M!==null&&M.tag===6?(a(z,M.sibling),Z=f(M,j),Z.return=z,z=Z):(a(z,M),Z=qf(j,z.mode,Z),Z.return=z,z=Z),_(z)):a(z,M)}return function(z,M,j,Z){try{gl=0;var _t=ue(z,M,j,Z);return Ha=null,_t}catch(mt){if(mt===Fa||mt===Ec)throw mt;var Xt=Dn(29,mt,null,z.mode);return Xt.lanes=Z,Xt.return=z,Xt}finally{}}}var Fs=ty(!0),ey=ty(!1),zr=!1;function ed(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function nd(e,i){e=e.updateQueue,i.updateQueue===e&&(i.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,callbacks:null})}function kr(e){return{lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(e,i,a){var l=e.updateQueue;if(l===null)return null;if(l=l.shared,($t&2)!==0){var f=l.pending;return f===null?i.next=i:(i.next=f.next,f.next=i),l.pending=i,i=mc(e),Lp(e,null,a),i}return dc(e,l,i,a),mc(e)}function yl(e,i,a){if(i=i.updateQueue,i!==null&&(i=i.shared,(a&4194048)!==0)){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Ho(e,a)}}function id(e,i){var a=e.updateQueue,l=e.alternate;if(l!==null&&(l=l.updateQueue,a===l)){var f=null,d=null;if(a=a.firstBaseUpdate,a!==null){do{var _={lane:a.lane,tag:a.tag,payload:a.payload,callback:null,next:null};d===null?f=d=_:d=d.next=_,a=a.next}while(a!==null);d===null?f=d=i:d=d.next=i}else f=d=i;a={baseState:l.baseState,firstBaseUpdate:f,lastBaseUpdate:d,shared:l.shared,callbacks:l.callbacks},e.updateQueue=a;return}e=a.lastBaseUpdate,e===null?a.firstBaseUpdate=i:e.next=i,a.lastBaseUpdate=i}var rd=!1;function _l(){if(rd){var e=qa;if(e!==null)throw e}}function vl(e,i,a,l){rd=!1;var f=e.updateQueue;zr=!1;var d=f.firstBaseUpdate,_=f.lastBaseUpdate,T=f.shared.pending;if(T!==null){f.shared.pending=null;var V=T,B=V.next;V.next=null,_===null?d=B:_.next=B,_=V;var Y=e.alternate;Y!==null&&(Y=Y.updateQueue,T=Y.lastBaseUpdate,T!==_&&(T===null?Y.firstBaseUpdate=B:T.next=B,Y.lastBaseUpdate=V))}if(d!==null){var $=f.baseState;_=0,Y=B=V=null,T=d;do{var F=T.lane&-536870913,G=F!==T.lane;if(G?(Bt&F)===F:(l&F)===F){F!==0&&F===Ba&&(rd=!0),Y!==null&&(Y=Y.next={lane:0,tag:T.tag,payload:T.payload,callback:null,next:null});t:{var ht=e,Tt=T;F=i;var ue=a;switch(Tt.tag){case 1:if(ht=Tt.payload,typeof ht=="function"){$=ht.call(ue,$,F);break t}$=ht;break t;case 3:ht.flags=ht.flags&-65537|128;case 0:if(ht=Tt.payload,F=typeof ht=="function"?ht.call(ue,$,F):ht,F==null)break t;$=A({},$,F);break t;case 2:zr=!0}}F=T.callback,F!==null&&(e.flags|=64,G&&(e.flags|=8192),G=f.callbacks,G===null?f.callbacks=[F]:G.push(F))}else G={lane:F,tag:T.tag,payload:T.payload,callback:T.callback,next:null},Y===null?(B=Y=G,V=$):Y=Y.next=G,_|=F;if(T=T.next,T===null){if(T=f.shared.pending,T===null)break;G=T,T=G.next,G.next=null,f.lastBaseUpdate=G,f.shared.pending=null}}while(!0);Y===null&&(V=$),f.baseState=V,f.firstBaseUpdate=B,f.lastBaseUpdate=Y,d===null&&(f.shared.lanes=0),Fr|=_,e.lanes=_,e.memoizedState=$}}function ny(e,i){if(typeof e!="function")throw Error(r(191,e));e.call(i)}function iy(e,i){var a=e.callbacks;if(a!==null)for(e.callbacks=null,e=0;e<a.length;e++)ny(a[e],i)}var Ga=O(null),Sc=O(0);function ry(e,i){e=ur,ot(Sc,e),ot(Ga,i),ur=e|i.baseLanes}function sd(){ot(Sc,ur),ot(Ga,Ga.current)}function ad(){ur=Sc.current,J(Ga),J(Sc)}var Cn=O(null),Yn=null;function Ur(e){var i=e.alternate;ot(Ie,Ie.current&1),ot(Cn,e),Yn===null&&(i===null||Ga.current!==null||i.memoizedState!==null)&&(Yn=e)}function od(e){ot(Ie,Ie.current),ot(Cn,e),Yn===null&&(Yn=e)}function sy(e){e.tag===22?(ot(Ie,Ie.current),ot(Cn,e),Yn===null&&(Yn=e)):jr()}function jr(){ot(Ie,Ie.current),ot(Cn,Cn.current)}function Vn(e){J(Cn),Yn===e&&(Yn=null),J(Ie)}var Ie=O(0);function wc(e){for(var i=e;i!==null;){if(i.tag===13){var a=i.memoizedState;if(a!==null&&(a=a.dehydrated,a===null||dm(a)||mm(a)))return i}else if(i.tag===19&&(i.memoizedProps.revealOrder==="forwards"||i.memoizedProps.revealOrder==="backwards"||i.memoizedProps.revealOrder==="unstable_legacy-backwards"||i.memoizedProps.revealOrder==="together")){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}var er=0,Vt=null,oe=null,Pe=null,Ic=!1,Qa=!1,Hs=!1,Rc=0,El=0,Ka=null,PA=0;function Te(){throw Error(r(321))}function ld(e,i){if(i===null)return!1;for(var a=0;a<i.length&&a<e.length;a++)if(!xn(e[a],i[a]))return!1;return!0}function ud(e,i,a,l,f,d){return er=d,Vt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,q.H=e===null||e.memoizedState===null?qy:Sd,Hs=!1,d=a(l,f),Hs=!1,Qa&&(d=oy(i,a,l,f)),ay(e),d}function ay(e){q.H=bl;var i=oe!==null&&oe.next!==null;if(er=0,Pe=oe=Vt=null,Ic=!1,El=0,Ka=null,i)throw Error(r(300));e===null||ze||(e=e.dependencies,e!==null&&yc(e)&&(ze=!0))}function oy(e,i,a,l){Vt=e;var f=0;do{if(Qa&&(Ka=null),El=0,Qa=!1,25<=f)throw Error(r(301));if(f+=1,Pe=oe=null,e.updateQueue!=null){var d=e.updateQueue;d.lastEffect=null,d.events=null,d.stores=null,d.memoCache!=null&&(d.memoCache.index=0)}q.H=Fy,d=i(a,l)}while(Qa);return d}function zA(){var e=q.H,i=e.useState()[0];return i=typeof i.then=="function"?Tl(i):i,e=e.useState()[0],(oe!==null?oe.memoizedState:null)!==e&&(Vt.flags|=1024),i}function cd(){var e=Rc!==0;return Rc=0,e}function hd(e,i,a){i.updateQueue=e.updateQueue,i.flags&=-2053,e.lanes&=~a}function fd(e){if(Ic){for(e=e.memoizedState;e!==null;){var i=e.queue;i!==null&&(i.pending=null),e=e.next}Ic=!1}er=0,Pe=oe=Vt=null,Qa=!1,El=Rc=0,Ka=null}function dn(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pe===null?Vt.memoizedState=Pe=e:Pe=Pe.next=e,Pe}function Re(){if(oe===null){var e=Vt.alternate;e=e!==null?e.memoizedState:null}else e=oe.next;var i=Pe===null?Vt.memoizedState:Pe.next;if(i!==null)Pe=i,oe=e;else{if(e===null)throw Vt.alternate===null?Error(r(467)):Error(r(310));oe=e,e={memoizedState:oe.memoizedState,baseState:oe.baseState,baseQueue:oe.baseQueue,queue:oe.queue,next:null},Pe===null?Vt.memoizedState=Pe=e:Pe=Pe.next=e}return Pe}function xc(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tl(e){var i=El;return El+=1,Ka===null&&(Ka=[]),e=Jp(Ka,e,i),i=Vt,(Pe===null?i.memoizedState:Pe.next)===null&&(i=i.alternate,q.H=i===null||i.memoizedState===null?qy:Sd),e}function Dc(e){if(e!==null&&typeof e=="object"){if(typeof e.then=="function")return Tl(e);if(e.$$typeof===at)return We(e)}throw Error(r(438,String(e)))}function dd(e){var i=null,a=Vt.updateQueue;if(a!==null&&(i=a.memoCache),i==null){var l=Vt.alternate;l!==null&&(l=l.updateQueue,l!==null&&(l=l.memoCache,l!=null&&(i={data:l.data.map(function(f){return f.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),a===null&&(a=xc(),Vt.updateQueue=a),a.memoCache=i,a=i.data[i.index],a===void 0)for(a=i.data[i.index]=Array(e),l=0;l<e;l++)a[l]=R;return i.index++,a}function nr(e,i){return typeof i=="function"?i(e):i}function Cc(e){var i=Re();return md(i,oe,e)}function md(e,i,a){var l=e.queue;if(l===null)throw Error(r(311));l.lastRenderedReducer=a;var f=e.baseQueue,d=l.pending;if(d!==null){if(f!==null){var _=f.next;f.next=d.next,d.next=_}i.baseQueue=f=d,l.pending=null}if(d=e.baseState,f===null)e.memoizedState=d;else{i=f.next;var T=_=null,V=null,B=i,Y=!1;do{var $=B.lane&-536870913;if($!==B.lane?(Bt&$)===$:(er&$)===$){var F=B.revertLane;if(F===0)V!==null&&(V=V.next={lane:0,revertLane:0,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null}),$===Ba&&(Y=!0);else if((er&F)===F){B=B.next,F===Ba&&(Y=!0);continue}else $={lane:0,revertLane:B.revertLane,gesture:null,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},V===null?(T=V=$,_=d):V=V.next=$,Vt.lanes|=F,Fr|=F;$=B.action,Hs&&a(d,$),d=B.hasEagerState?B.eagerState:a(d,$)}else F={lane:$,revertLane:B.revertLane,gesture:B.gesture,action:B.action,hasEagerState:B.hasEagerState,eagerState:B.eagerState,next:null},V===null?(T=V=F,_=d):V=V.next=F,Vt.lanes|=$,Fr|=$;B=B.next}while(B!==null&&B!==i);if(V===null?_=d:V.next=T,!xn(d,e.memoizedState)&&(ze=!0,Y&&(a=qa,a!==null)))throw a;e.memoizedState=d,e.baseState=_,e.baseQueue=V,l.lastRenderedState=d}return f===null&&(l.lanes=0),[e.memoizedState,l.dispatch]}function gd(e){var i=Re(),a=i.queue;if(a===null)throw Error(r(311));a.lastRenderedReducer=e;var l=a.dispatch,f=a.pending,d=i.memoizedState;if(f!==null){a.pending=null;var _=f=f.next;do d=e(d,_.action),_=_.next;while(_!==f);xn(d,i.memoizedState)||(ze=!0),i.memoizedState=d,i.baseQueue===null&&(i.baseState=d),a.lastRenderedState=d}return[d,l]}function ly(e,i,a){var l=Vt,f=Re(),d=Ht;if(d){if(a===void 0)throw Error(r(407));a=a()}else a=i();var _=!xn((oe||f).memoizedState,a);if(_&&(f.memoizedState=a,ze=!0),f=f.queue,_d(hy.bind(null,l,f,e),[e]),f.getSnapshot!==i||_||Pe!==null&&Pe.memoizedState.tag&1){if(l.flags|=2048,Ya(9,{destroy:void 0},cy.bind(null,l,f,a,i),null),ce===null)throw Error(r(349));d||(er&127)!==0||uy(l,i,a)}return a}function uy(e,i,a){e.flags|=16384,e={getSnapshot:i,value:a},i=Vt.updateQueue,i===null?(i=xc(),Vt.updateQueue=i,i.stores=[e]):(a=i.stores,a===null?i.stores=[e]:a.push(e))}function cy(e,i,a,l){i.value=a,i.getSnapshot=l,fy(i)&&dy(e)}function hy(e,i,a){return a(function(){fy(i)&&dy(e)})}function fy(e){var i=e.getSnapshot;e=e.value;try{var a=i();return!xn(e,a)}catch{return!0}}function dy(e){var i=Ps(e,2);i!==null&&bn(i,e,2)}function pd(e){var i=dn();if(typeof e=="function"){var a=e;if(e=a(),Hs){Ln(!0);try{a()}finally{Ln(!1)}}}return i.memoizedState=i.baseState=e,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:e},i}function my(e,i,a,l){return e.baseState=a,md(e,oe,typeof l=="function"?l:nr)}function kA(e,i,a,l,f){if(Mc(e))throw Error(r(485));if(e=i.action,e!==null){var d={payload:f,action:e,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){d.listeners.push(_)}};q.T!==null?a(!0):d.isTransition=!1,l(d),a=i.pending,a===null?(d.next=i.pending=d,gy(i,d)):(d.next=a.next,i.pending=a.next=d)}}function gy(e,i){var a=i.action,l=i.payload,f=e.state;if(i.isTransition){var d=q.T,_={};q.T=_;try{var T=a(f,l),V=q.S;V!==null&&V(_,T),py(e,i,T)}catch(B){yd(e,i,B)}finally{d!==null&&_.types!==null&&(d.types=_.types),q.T=d}}else try{d=a(f,l),py(e,i,d)}catch(B){yd(e,i,B)}}function py(e,i,a){a!==null&&typeof a=="object"&&typeof a.then=="function"?a.then(function(l){yy(e,i,l)},function(l){return yd(e,i,l)}):yy(e,i,a)}function yy(e,i,a){i.status="fulfilled",i.value=a,_y(i),e.state=a,i=e.pending,i!==null&&(a=i.next,a===i?e.pending=null:(a=a.next,i.next=a,gy(e,a)))}function yd(e,i,a){var l=e.pending;if(e.pending=null,l!==null){l=l.next;do i.status="rejected",i.reason=a,_y(i),i=i.next;while(i!==l)}e.action=null}function _y(e){e=e.listeners;for(var i=0;i<e.length;i++)(0,e[i])()}function vy(e,i){return i}function Ey(e,i){if(Ht){var a=ce.formState;if(a!==null){t:{var l=Vt;if(Ht){if(de){e:{for(var f=de,d=Kn;f.nodeType!==8;){if(!d){f=null;break e}if(f=Xn(f.nextSibling),f===null){f=null;break e}}d=f.data,f=d==="F!"||d==="F"?f:null}if(f){de=Xn(f.nextSibling),l=f.data==="F!";break t}}Or(l)}l=!1}l&&(i=a[0])}}return a=dn(),a.memoizedState=a.baseState=i,l={pending:null,lanes:0,dispatch:null,lastRenderedReducer:vy,lastRenderedState:i},a.queue=l,a=Uy.bind(null,Vt,l),l.dispatch=a,l=pd(!1),d=bd.bind(null,Vt,!1,l.queue),l=dn(),f={state:i,dispatch:null,action:e,pending:null},l.queue=f,a=kA.bind(null,Vt,f,d,a),f.dispatch=a,l.memoizedState=e,[i,a,!1]}function Ty(e){var i=Re();return Ay(i,oe,e)}function Ay(e,i,a){if(i=md(e,i,vy)[0],e=Cc(nr)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var l=Tl(i)}catch(_){throw _===Fa?Ec:_}else l=i;i=Re();var f=i.queue,d=f.dispatch;return a!==i.memoizedState&&(Vt.flags|=2048,Ya(9,{destroy:void 0},LA.bind(null,f,a),null)),[l,d,e]}function LA(e,i){e.action=i}function by(e){var i=Re(),a=oe;if(a!==null)return Ay(i,a,e);Re(),i=i.memoizedState,a=Re();var l=a.queue.dispatch;return a.memoizedState=e,[i,l,!1]}function Ya(e,i,a,l){return e={tag:e,create:a,deps:l,inst:i,next:null},i=Vt.updateQueue,i===null&&(i=xc(),Vt.updateQueue=i),a=i.lastEffect,a===null?i.lastEffect=e.next=e:(l=a.next,a.next=e,e.next=l,i.lastEffect=e),e}function Sy(){return Re().memoizedState}function Vc(e,i,a,l){var f=dn();Vt.flags|=e,f.memoizedState=Ya(1|i,{destroy:void 0},a,l===void 0?null:l)}function Nc(e,i,a,l){var f=Re();l=l===void 0?null:l;var d=f.memoizedState.inst;oe!==null&&l!==null&&ld(l,oe.memoizedState.deps)?f.memoizedState=Ya(i,d,a,l):(Vt.flags|=e,f.memoizedState=Ya(1|i,d,a,l))}function wy(e,i){Vc(8390656,8,e,i)}function _d(e,i){Nc(2048,8,e,i)}function UA(e){Vt.flags|=4;var i=Vt.updateQueue;if(i===null)i=xc(),Vt.updateQueue=i,i.events=[e];else{var a=i.events;a===null?i.events=[e]:a.push(e)}}function Iy(e){var i=Re().memoizedState;return UA({ref:i,nextImpl:e}),function(){if(($t&2)!==0)throw Error(r(440));return i.impl.apply(void 0,arguments)}}function Ry(e,i){return Nc(4,2,e,i)}function xy(e,i){return Nc(4,4,e,i)}function Dy(e,i){if(typeof i=="function"){e=e();var a=i(e);return function(){typeof a=="function"?a():i(null)}}if(i!=null)return e=e(),i.current=e,function(){i.current=null}}function Cy(e,i,a){a=a!=null?a.concat([e]):null,Nc(4,4,Dy.bind(null,i,e),a)}function vd(){}function Vy(e,i){var a=Re();i=i===void 0?null:i;var l=a.memoizedState;return i!==null&&ld(i,l[1])?l[0]:(a.memoizedState=[e,i],e)}function Ny(e,i){var a=Re();i=i===void 0?null:i;var l=a.memoizedState;if(i!==null&&ld(i,l[1]))return l[0];if(l=e(),Hs){Ln(!0);try{e()}finally{Ln(!1)}}return a.memoizedState=[l,i],l}function Ed(e,i,a){return a===void 0||(er&1073741824)!==0&&(Bt&261930)===0?e.memoizedState=i:(e.memoizedState=a,e=M_(),Vt.lanes|=e,Fr|=e,a)}function My(e,i,a,l){return xn(a,i)?a:Ga.current!==null?(e=Ed(e,a,l),xn(e,i)||(ze=!0),e):(er&42)===0||(er&1073741824)!==0&&(Bt&261930)===0?(ze=!0,e.memoizedState=a):(e=M_(),Vt.lanes|=e,Fr|=e,i)}function Oy(e,i,a,l,f){var d=tt.p;tt.p=d!==0&&8>d?d:8;var _=q.T,T={};q.T=T,bd(e,!1,i,a);try{var V=f(),B=q.S;if(B!==null&&B(T,V),V!==null&&typeof V=="object"&&typeof V.then=="function"){var Y=OA(V,l);Al(e,i,Y,On(e))}else Al(e,i,l,On(e))}catch($){Al(e,i,{then:function(){},status:"rejected",reason:$},On())}finally{tt.p=d,_!==null&&T.types!==null&&(_.types=T.types),q.T=_}}function jA(){}function Td(e,i,a,l){if(e.tag!==5)throw Error(r(476));var f=Py(e).queue;Oy(e,f,i,ct,a===null?jA:function(){return zy(e),a(l)})}function Py(e){var i=e.memoizedState;if(i!==null)return i;i={memoizedState:ct,baseState:ct,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:ct},next:null};var a={};return i.next={memoizedState:a,baseState:a,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:nr,lastRenderedState:a},next:null},e.memoizedState=i,e=e.alternate,e!==null&&(e.memoizedState=i),i}function zy(e){var i=Py(e);i.next===null&&(i=e.alternate.memoizedState),Al(e,i.next.queue,{},On())}function Ad(){return We(Ul)}function ky(){return Re().memoizedState}function Ly(){return Re().memoizedState}function BA(e){for(var i=e.return;i!==null;){switch(i.tag){case 24:case 3:var a=On();e=kr(a);var l=Lr(i,e,a);l!==null&&(bn(l,i,a),yl(l,i,a)),i={cache:Jf()},e.payload=i;return}i=i.return}}function qA(e,i,a){var l=On();a={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null},Mc(e)?jy(i,a):(a=jf(e,i,a,l),a!==null&&(bn(a,e,l),By(a,i,l)))}function Uy(e,i,a){var l=On();Al(e,i,a,l)}function Al(e,i,a,l){var f={lane:l,revertLane:0,gesture:null,action:a,hasEagerState:!1,eagerState:null,next:null};if(Mc(e))jy(i,f);else{var d=e.alternate;if(e.lanes===0&&(d===null||d.lanes===0)&&(d=i.lastRenderedReducer,d!==null))try{var _=i.lastRenderedState,T=d(_,a);if(f.hasEagerState=!0,f.eagerState=T,xn(T,_))return dc(e,i,f,0),ce===null&&fc(),!1}catch{}finally{}if(a=jf(e,i,f,l),a!==null)return bn(a,e,l),By(a,i,l),!0}return!1}function bd(e,i,a,l){if(l={lane:2,revertLane:em(),gesture:null,action:l,hasEagerState:!1,eagerState:null,next:null},Mc(e)){if(i)throw Error(r(479))}else i=jf(e,a,l,2),i!==null&&bn(i,e,2)}function Mc(e){var i=e.alternate;return e===Vt||i!==null&&i===Vt}function jy(e,i){Qa=Ic=!0;var a=e.pending;a===null?i.next=i:(i.next=a.next,a.next=i),e.pending=i}function By(e,i,a){if((a&4194048)!==0){var l=i.lanes;l&=e.pendingLanes,a|=l,i.lanes=a,Ho(e,a)}}var bl={readContext:We,use:Dc,useCallback:Te,useContext:Te,useEffect:Te,useImperativeHandle:Te,useLayoutEffect:Te,useInsertionEffect:Te,useMemo:Te,useReducer:Te,useRef:Te,useState:Te,useDebugValue:Te,useDeferredValue:Te,useTransition:Te,useSyncExternalStore:Te,useId:Te,useHostTransitionStatus:Te,useFormState:Te,useActionState:Te,useOptimistic:Te,useMemoCache:Te,useCacheRefresh:Te};bl.useEffectEvent=Te;var qy={readContext:We,use:Dc,useCallback:function(e,i){return dn().memoizedState=[e,i===void 0?null:i],e},useContext:We,useEffect:wy,useImperativeHandle:function(e,i,a){a=a!=null?a.concat([e]):null,Vc(4194308,4,Dy.bind(null,i,e),a)},useLayoutEffect:function(e,i){return Vc(4194308,4,e,i)},useInsertionEffect:function(e,i){Vc(4,2,e,i)},useMemo:function(e,i){var a=dn();i=i===void 0?null:i;var l=e();if(Hs){Ln(!0);try{e()}finally{Ln(!1)}}return a.memoizedState=[l,i],l},useReducer:function(e,i,a){var l=dn();if(a!==void 0){var f=a(i);if(Hs){Ln(!0);try{a(i)}finally{Ln(!1)}}}else f=i;return l.memoizedState=l.baseState=f,e={pending:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:f},l.queue=e,e=e.dispatch=qA.bind(null,Vt,e),[l.memoizedState,e]},useRef:function(e){var i=dn();return e={current:e},i.memoizedState=e},useState:function(e){e=pd(e);var i=e.queue,a=Uy.bind(null,Vt,i);return i.dispatch=a,[e.memoizedState,a]},useDebugValue:vd,useDeferredValue:function(e,i){var a=dn();return Ed(a,e,i)},useTransition:function(){var e=pd(!1);return e=Oy.bind(null,Vt,e.queue,!0,!1),dn().memoizedState=e,[!1,e]},useSyncExternalStore:function(e,i,a){var l=Vt,f=dn();if(Ht){if(a===void 0)throw Error(r(407));a=a()}else{if(a=i(),ce===null)throw Error(r(349));(Bt&127)!==0||uy(l,i,a)}f.memoizedState=a;var d={value:a,getSnapshot:i};return f.queue=d,wy(hy.bind(null,l,d,e),[e]),l.flags|=2048,Ya(9,{destroy:void 0},cy.bind(null,l,d,a,i),null),a},useId:function(){var e=dn(),i=ce.identifierPrefix;if(Ht){var a=Oi,l=Mi;a=(l&~(1<<32-Se(l)-1)).toString(32)+a,i="_"+i+"R_"+a,a=Rc++,0<a&&(i+="H"+a.toString(32)),i+="_"}else a=PA++,i="_"+i+"r_"+a.toString(32)+"_";return e.memoizedState=i},useHostTransitionStatus:Ad,useFormState:Ey,useActionState:Ey,useOptimistic:function(e){var i=dn();i.memoizedState=i.baseState=e;var a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=a,i=bd.bind(null,Vt,!0,a),a.dispatch=i,[e,i]},useMemoCache:dd,useCacheRefresh:function(){return dn().memoizedState=BA.bind(null,Vt)},useEffectEvent:function(e){var i=dn(),a={impl:e};return i.memoizedState=a,function(){if(($t&2)!==0)throw Error(r(440));return a.impl.apply(void 0,arguments)}}},Sd={readContext:We,use:Dc,useCallback:Vy,useContext:We,useEffect:_d,useImperativeHandle:Cy,useInsertionEffect:Ry,useLayoutEffect:xy,useMemo:Ny,useReducer:Cc,useRef:Sy,useState:function(){return Cc(nr)},useDebugValue:vd,useDeferredValue:function(e,i){var a=Re();return My(a,oe.memoizedState,e,i)},useTransition:function(){var e=Cc(nr)[0],i=Re().memoizedState;return[typeof e=="boolean"?e:Tl(e),i]},useSyncExternalStore:ly,useId:ky,useHostTransitionStatus:Ad,useFormState:Ty,useActionState:Ty,useOptimistic:function(e,i){var a=Re();return my(a,oe,e,i)},useMemoCache:dd,useCacheRefresh:Ly};Sd.useEffectEvent=Iy;var Fy={readContext:We,use:Dc,useCallback:Vy,useContext:We,useEffect:_d,useImperativeHandle:Cy,useInsertionEffect:Ry,useLayoutEffect:xy,useMemo:Ny,useReducer:gd,useRef:Sy,useState:function(){return gd(nr)},useDebugValue:vd,useDeferredValue:function(e,i){var a=Re();return oe===null?Ed(a,e,i):My(a,oe.memoizedState,e,i)},useTransition:function(){var e=gd(nr)[0],i=Re().memoizedState;return[typeof e=="boolean"?e:Tl(e),i]},useSyncExternalStore:ly,useId:ky,useHostTransitionStatus:Ad,useFormState:by,useActionState:by,useOptimistic:function(e,i){var a=Re();return oe!==null?my(a,oe,e,i):(a.baseState=e,[e,a.queue.dispatch])},useMemoCache:dd,useCacheRefresh:Ly};Fy.useEffectEvent=Iy;function wd(e,i,a,l){i=e.memoizedState,a=a(l,i),a=a==null?i:A({},i,a),e.memoizedState=a,e.lanes===0&&(e.updateQueue.baseState=a)}var Id={enqueueSetState:function(e,i,a){e=e._reactInternals;var l=On(),f=kr(l);f.payload=i,a!=null&&(f.callback=a),i=Lr(e,f,l),i!==null&&(bn(i,e,l),yl(i,e,l))},enqueueReplaceState:function(e,i,a){e=e._reactInternals;var l=On(),f=kr(l);f.tag=1,f.payload=i,a!=null&&(f.callback=a),i=Lr(e,f,l),i!==null&&(bn(i,e,l),yl(i,e,l))},enqueueForceUpdate:function(e,i){e=e._reactInternals;var a=On(),l=kr(a);l.tag=2,i!=null&&(l.callback=i),i=Lr(e,l,a),i!==null&&(bn(i,e,a),yl(i,e,a))}};function Hy(e,i,a,l,f,d,_){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(l,d,_):i.prototype&&i.prototype.isPureReactComponent?!ul(a,l)||!ul(f,d):!0}function Gy(e,i,a,l){e=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(a,l),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(a,l),i.state!==e&&Id.enqueueReplaceState(i,i.state,null)}function Gs(e,i){var a=i;if("ref"in i){a={};for(var l in i)l!=="ref"&&(a[l]=i[l])}if(e=e.defaultProps){a===i&&(a=A({},a));for(var f in e)a[f]===void 0&&(a[f]=e[f])}return a}function Qy(e){hc(e)}function Ky(e){console.error(e)}function Yy(e){hc(e)}function Oc(e,i){try{var a=e.onUncaughtError;a(i.value,{componentStack:i.stack})}catch(l){setTimeout(function(){throw l})}}function Xy(e,i,a){try{var l=e.onCaughtError;l(a.value,{componentStack:a.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(f){setTimeout(function(){throw f})}}function Rd(e,i,a){return a=kr(a),a.tag=3,a.payload={element:null},a.callback=function(){Oc(e,i)},a}function Zy(e){return e=kr(e),e.tag=3,e}function Jy(e,i,a,l){var f=a.type.getDerivedStateFromError;if(typeof f=="function"){var d=l.value;e.payload=function(){return f(d)},e.callback=function(){Xy(i,a,l)}}var _=a.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(e.callback=function(){Xy(i,a,l),typeof f!="function"&&(Hr===null?Hr=new Set([this]):Hr.add(this));var T=l.stack;this.componentDidCatch(l.value,{componentStack:T!==null?T:""})})}function FA(e,i,a,l,f){if(a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){if(i=a.alternate,i!==null&&ja(i,a,f,!0),a=Cn.current,a!==null){switch(a.tag){case 31:case 13:return Yn===null?Qc():a.alternate===null&&Ae===0&&(Ae=3),a.flags&=-257,a.flags|=65536,a.lanes=f,l===Tc?a.flags|=16384:(i=a.updateQueue,i===null?a.updateQueue=new Set([l]):i.add(l),$d(e,l,f)),!1;case 22:return a.flags|=65536,l===Tc?a.flags|=16384:(i=a.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([l])},a.updateQueue=i):(a=i.retryQueue,a===null?i.retryQueue=new Set([l]):a.add(l)),$d(e,l,f)),!1}throw Error(r(435,a.tag))}return $d(e,l,f),Qc(),!1}if(Ht)return i=Cn.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=f,l!==Qf&&(e=Error(r(422),{cause:l}),fl(Hn(e,a)))):(l!==Qf&&(i=Error(r(423),{cause:l}),fl(Hn(i,a))),e=e.current.alternate,e.flags|=65536,f&=-f,e.lanes|=f,l=Hn(l,a),f=Rd(e.stateNode,l,f),id(e,f),Ae!==4&&(Ae=2)),!1;var d=Error(r(520),{cause:l});if(d=Hn(d,a),Vl===null?Vl=[d]:Vl.push(d),Ae!==4&&(Ae=2),i===null)return!0;l=Hn(l,a),a=i;do{switch(a.tag){case 3:return a.flags|=65536,e=f&-f,a.lanes|=e,e=Rd(a.stateNode,l,e),id(a,e),!1;case 1:if(i=a.type,d=a.stateNode,(a.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||d!==null&&typeof d.componentDidCatch=="function"&&(Hr===null||!Hr.has(d))))return a.flags|=65536,f&=-f,a.lanes|=f,f=Zy(f),Jy(f,e,a,l),id(a,f),!1}a=a.return}while(a!==null);return!1}var xd=Error(r(461)),ze=!1;function tn(e,i,a,l){i.child=e===null?ey(i,null,a,l):Fs(i,e.child,a,l)}function $y(e,i,a,l,f){a=a.render;var d=i.ref;if("ref"in l){var _={};for(var T in l)T!=="ref"&&(_[T]=l[T])}else _=l;return Us(i),l=ud(e,i,a,_,d,f),T=cd(),e!==null&&!ze?(hd(e,i,f),ir(e,i,f)):(Ht&&T&&Hf(i),i.flags|=1,tn(e,i,l,f),i.child)}function Wy(e,i,a,l,f){if(e===null){var d=a.type;return typeof d=="function"&&!Bf(d)&&d.defaultProps===void 0&&a.compare===null?(i.tag=15,i.type=d,t_(e,i,d,l,f)):(e=gc(a.type,null,l,i,i.mode,f),e.ref=i.ref,e.return=i,i.child=e)}if(d=e.child,!zd(e,f)){var _=d.memoizedProps;if(a=a.compare,a=a!==null?a:ul,a(_,l)&&e.ref===i.ref)return ir(e,i,f)}return i.flags|=1,e=Ji(d,l),e.ref=i.ref,e.return=i,i.child=e}function t_(e,i,a,l,f){if(e!==null){var d=e.memoizedProps;if(ul(d,l)&&e.ref===i.ref)if(ze=!1,i.pendingProps=l=d,zd(e,f))(e.flags&131072)!==0&&(ze=!0);else return i.lanes=e.lanes,ir(e,i,f)}return Dd(e,i,a,l,f)}function e_(e,i,a,l){var f=l.children,d=e!==null?e.memoizedState:null;if(e===null&&i.stateNode===null&&(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),l.mode==="hidden"){if((i.flags&128)!==0){if(d=d!==null?d.baseLanes|a:a,e!==null){for(l=i.child=e.child,f=0;l!==null;)f=f|l.lanes|l.childLanes,l=l.sibling;l=f&~d}else l=0,i.child=null;return n_(e,i,d,a,l)}if((a&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},e!==null&&vc(i,d!==null?d.cachePool:null),d!==null?ry(i,d):sd(),sy(i);else return l=i.lanes=536870912,n_(e,i,d!==null?d.baseLanes|a:a,a,l)}else d!==null?(vc(i,d.cachePool),ry(i,d),jr(),i.memoizedState=null):(e!==null&&vc(i,null),sd(),jr());return tn(e,i,f,a),i.child}function Sl(e,i){return e!==null&&e.tag===22||i.stateNode!==null||(i.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),i.sibling}function n_(e,i,a,l,f){var d=Wf();return d=d===null?null:{parent:Oe._currentValue,pool:d},i.memoizedState={baseLanes:a,cachePool:d},e!==null&&vc(i,null),sd(),sy(i),e!==null&&ja(e,i,l,!0),i.childLanes=f,null}function Pc(e,i){return i=kc({mode:i.mode,children:i.children},e.mode),i.ref=e.ref,e.child=i,i.return=e,i}function i_(e,i,a){return Fs(i,e.child,null,a),e=Pc(i,i.pendingProps),e.flags|=2,Vn(i),i.memoizedState=null,e}function HA(e,i,a){var l=i.pendingProps,f=(i.flags&128)!==0;if(i.flags&=-129,e===null){if(Ht){if(l.mode==="hidden")return e=Pc(i,l),i.lanes=536870912,Sl(null,e);if(od(i),(e=de)?(e=gv(e,Kn),e=e!==null&&e.data==="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Nr!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=jp(e),a.return=i,i.child=a,$e=i,de=null)):e=null,e===null)throw Or(i);return i.lanes=536870912,null}return Pc(i,l)}var d=e.memoizedState;if(d!==null){var _=d.dehydrated;if(od(i),f)if(i.flags&256)i.flags&=-257,i=i_(e,i,a);else if(i.memoizedState!==null)i.child=e.child,i.flags|=128,i=null;else throw Error(r(558));else if(ze||ja(e,i,a,!1),f=(a&e.childLanes)!==0,ze||f){if(l=ce,l!==null&&(_=Go(l,a),_!==0&&_!==d.retryLane))throw d.retryLane=_,Ps(e,_),bn(l,e,_),xd;Qc(),i=i_(e,i,a)}else e=d.treeContext,de=Xn(_.nextSibling),$e=i,Ht=!0,Mr=null,Kn=!1,e!==null&&Fp(i,e),i=Pc(i,l),i.flags|=4096;return i}return e=Ji(e.child,{mode:l.mode,children:l.children}),e.ref=i.ref,i.child=e,e.return=i,e}function zc(e,i){var a=i.ref;if(a===null)e!==null&&e.ref!==null&&(i.flags|=4194816);else{if(typeof a!="function"&&typeof a!="object")throw Error(r(284));(e===null||e.ref!==a)&&(i.flags|=4194816)}}function Dd(e,i,a,l,f){return Us(i),a=ud(e,i,a,l,void 0,f),l=cd(),e!==null&&!ze?(hd(e,i,f),ir(e,i,f)):(Ht&&l&&Hf(i),i.flags|=1,tn(e,i,a,f),i.child)}function r_(e,i,a,l,f,d){return Us(i),i.updateQueue=null,a=oy(i,l,a,f),ay(e),l=cd(),e!==null&&!ze?(hd(e,i,d),ir(e,i,d)):(Ht&&l&&Hf(i),i.flags|=1,tn(e,i,a,d),i.child)}function s_(e,i,a,l,f){if(Us(i),i.stateNode===null){var d=za,_=a.contextType;typeof _=="object"&&_!==null&&(d=We(_)),d=new a(l,d),i.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,d.updater=Id,i.stateNode=d,d._reactInternals=i,d=i.stateNode,d.props=l,d.state=i.memoizedState,d.refs={},ed(i),_=a.contextType,d.context=typeof _=="object"&&_!==null?We(_):za,d.state=i.memoizedState,_=a.getDerivedStateFromProps,typeof _=="function"&&(wd(i,a,_,l),d.state=i.memoizedState),typeof a.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(_=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),_!==d.state&&Id.enqueueReplaceState(d,d.state,null),vl(i,l,d,f),_l(),d.state=i.memoizedState),typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!0}else if(e===null){d=i.stateNode;var T=i.memoizedProps,V=Gs(a,T);d.props=V;var B=d.context,Y=a.contextType;_=za,typeof Y=="object"&&Y!==null&&(_=We(Y));var $=a.getDerivedStateFromProps;Y=typeof $=="function"||typeof d.getSnapshotBeforeUpdate=="function",T=i.pendingProps!==T,Y||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(T||B!==_)&&Gy(i,d,l,_),zr=!1;var F=i.memoizedState;d.state=F,vl(i,l,d,f),_l(),B=i.memoizedState,T||F!==B||zr?(typeof $=="function"&&(wd(i,a,$,l),B=i.memoizedState),(V=zr||Hy(i,a,V,l,F,B,_))?(Y||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount()),typeof d.componentDidMount=="function"&&(i.flags|=4194308)):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=l,i.memoizedState=B),d.props=l,d.state=B,d.context=_,l=V):(typeof d.componentDidMount=="function"&&(i.flags|=4194308),l=!1)}else{d=i.stateNode,nd(e,i),_=i.memoizedProps,Y=Gs(a,_),d.props=Y,$=i.pendingProps,F=d.context,B=a.contextType,V=za,typeof B=="object"&&B!==null&&(V=We(B)),T=a.getDerivedStateFromProps,(B=typeof T=="function"||typeof d.getSnapshotBeforeUpdate=="function")||typeof d.UNSAFE_componentWillReceiveProps!="function"&&typeof d.componentWillReceiveProps!="function"||(_!==$||F!==V)&&Gy(i,d,l,V),zr=!1,F=i.memoizedState,d.state=F,vl(i,l,d,f),_l();var G=i.memoizedState;_!==$||F!==G||zr||e!==null&&e.dependencies!==null&&yc(e.dependencies)?(typeof T=="function"&&(wd(i,a,T,l),G=i.memoizedState),(Y=zr||Hy(i,a,Y,l,F,G,V)||e!==null&&e.dependencies!==null&&yc(e.dependencies))?(B||typeof d.UNSAFE_componentWillUpdate!="function"&&typeof d.componentWillUpdate!="function"||(typeof d.componentWillUpdate=="function"&&d.componentWillUpdate(l,G,V),typeof d.UNSAFE_componentWillUpdate=="function"&&d.UNSAFE_componentWillUpdate(l,G,V)),typeof d.componentDidUpdate=="function"&&(i.flags|=4),typeof d.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),i.memoizedProps=l,i.memoizedState=G),d.props=l,d.state=G,d.context=V,l=Y):(typeof d.componentDidUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=4),typeof d.getSnapshotBeforeUpdate!="function"||_===e.memoizedProps&&F===e.memoizedState||(i.flags|=1024),l=!1)}return d=l,zc(e,i),l=(i.flags&128)!==0,d||l?(d=i.stateNode,a=l&&typeof a.getDerivedStateFromError!="function"?null:d.render(),i.flags|=1,e!==null&&l?(i.child=Fs(i,e.child,null,f),i.child=Fs(i,null,a,f)):tn(e,i,a,f),i.memoizedState=d.state,e=i.child):e=ir(e,i,f),e}function a_(e,i,a,l){return ks(),i.flags|=256,tn(e,i,a,l),i.child}var Cd={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vd(e){return{baseLanes:e,cachePool:Xp()}}function Nd(e,i,a){return e=e!==null?e.childLanes&~a:0,i&&(e|=Mn),e}function o_(e,i,a){var l=i.pendingProps,f=!1,d=(i.flags&128)!==0,_;if((_=d)||(_=e!==null&&e.memoizedState===null?!1:(Ie.current&2)!==0),_&&(f=!0,i.flags&=-129),_=(i.flags&32)!==0,i.flags&=-33,e===null){if(Ht){if(f?Ur(i):jr(),(e=de)?(e=gv(e,Kn),e=e!==null&&e.data!=="&"?e:null,e!==null&&(i.memoizedState={dehydrated:e,treeContext:Nr!==null?{id:Mi,overflow:Oi}:null,retryLane:536870912,hydrationErrors:null},a=jp(e),a.return=i,i.child=a,$e=i,de=null)):e=null,e===null)throw Or(i);return mm(e)?i.lanes=32:i.lanes=536870912,null}var T=l.children;return l=l.fallback,f?(jr(),f=i.mode,T=kc({mode:"hidden",children:T},f),l=zs(l,f,a,null),T.return=i,l.return=i,T.sibling=l,i.child=T,l=i.child,l.memoizedState=Vd(a),l.childLanes=Nd(e,_,a),i.memoizedState=Cd,Sl(null,l)):(Ur(i),Md(i,T))}var V=e.memoizedState;if(V!==null&&(T=V.dehydrated,T!==null)){if(d)i.flags&256?(Ur(i),i.flags&=-257,i=Od(e,i,a)):i.memoizedState!==null?(jr(),i.child=e.child,i.flags|=128,i=null):(jr(),T=l.fallback,f=i.mode,l=kc({mode:"visible",children:l.children},f),T=zs(T,f,a,null),T.flags|=2,l.return=i,T.return=i,l.sibling=T,i.child=l,Fs(i,e.child,null,a),l=i.child,l.memoizedState=Vd(a),l.childLanes=Nd(e,_,a),i.memoizedState=Cd,i=Sl(null,l));else if(Ur(i),mm(T)){if(_=T.nextSibling&&T.nextSibling.dataset,_)var B=_.dgst;_=B,l=Error(r(419)),l.stack="",l.digest=_,fl({value:l,source:null,stack:null}),i=Od(e,i,a)}else if(ze||ja(e,i,a,!1),_=(a&e.childLanes)!==0,ze||_){if(_=ce,_!==null&&(l=Go(_,a),l!==0&&l!==V.retryLane))throw V.retryLane=l,Ps(e,l),bn(_,e,l),xd;dm(T)||Qc(),i=Od(e,i,a)}else dm(T)?(i.flags|=192,i.child=e.child,i=null):(e=V.treeContext,de=Xn(T.nextSibling),$e=i,Ht=!0,Mr=null,Kn=!1,e!==null&&Fp(i,e),i=Md(i,l.children),i.flags|=4096);return i}return f?(jr(),T=l.fallback,f=i.mode,V=e.child,B=V.sibling,l=Ji(V,{mode:"hidden",children:l.children}),l.subtreeFlags=V.subtreeFlags&65011712,B!==null?T=Ji(B,T):(T=zs(T,f,a,null),T.flags|=2),T.return=i,l.return=i,l.sibling=T,i.child=l,Sl(null,l),l=i.child,T=e.child.memoizedState,T===null?T=Vd(a):(f=T.cachePool,f!==null?(V=Oe._currentValue,f=f.parent!==V?{parent:V,pool:V}:f):f=Xp(),T={baseLanes:T.baseLanes|a,cachePool:f}),l.memoizedState=T,l.childLanes=Nd(e,_,a),i.memoizedState=Cd,Sl(e.child,l)):(Ur(i),a=e.child,e=a.sibling,a=Ji(a,{mode:"visible",children:l.children}),a.return=i,a.sibling=null,e!==null&&(_=i.deletions,_===null?(i.deletions=[e],i.flags|=16):_.push(e)),i.child=a,i.memoizedState=null,a)}function Md(e,i){return i=kc({mode:"visible",children:i},e.mode),i.return=e,e.child=i}function kc(e,i){return e=Dn(22,e,null,i),e.lanes=0,e}function Od(e,i,a){return Fs(i,e.child,null,a),e=Md(i,i.pendingProps.children),e.flags|=2,i.memoizedState=null,e}function l_(e,i,a){e.lanes|=i;var l=e.alternate;l!==null&&(l.lanes|=i),Xf(e.return,i,a)}function Pd(e,i,a,l,f,d){var _=e.memoizedState;_===null?e.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:l,tail:a,tailMode:f,treeForkCount:d}:(_.isBackwards=i,_.rendering=null,_.renderingStartTime=0,_.last=l,_.tail=a,_.tailMode=f,_.treeForkCount=d)}function u_(e,i,a){var l=i.pendingProps,f=l.revealOrder,d=l.tail;l=l.children;var _=Ie.current,T=(_&2)!==0;if(T?(_=_&1|2,i.flags|=128):_&=1,ot(Ie,_),tn(e,i,l,a),l=Ht?hl:0,!T&&e!==null&&(e.flags&128)!==0)t:for(e=i.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&l_(e,a,i);else if(e.tag===19)l_(e,a,i);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break t;for(;e.sibling===null;){if(e.return===null||e.return===i)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}switch(f){case"forwards":for(a=i.child,f=null;a!==null;)e=a.alternate,e!==null&&wc(e)===null&&(f=a),a=a.sibling;a=f,a===null?(f=i.child,i.child=null):(f=a.sibling,a.sibling=null),Pd(i,!1,f,a,d,l);break;case"backwards":case"unstable_legacy-backwards":for(a=null,f=i.child,i.child=null;f!==null;){if(e=f.alternate,e!==null&&wc(e)===null){i.child=f;break}e=f.sibling,f.sibling=a,a=f,f=e}Pd(i,!0,a,null,d,l);break;case"together":Pd(i,!1,null,null,void 0,l);break;default:i.memoizedState=null}return i.child}function ir(e,i,a){if(e!==null&&(i.dependencies=e.dependencies),Fr|=i.lanes,(a&i.childLanes)===0)if(e!==null){if(ja(e,i,a,!1),(a&i.childLanes)===0)return null}else return null;if(e!==null&&i.child!==e.child)throw Error(r(153));if(i.child!==null){for(e=i.child,a=Ji(e,e.pendingProps),i.child=a,a.return=i;e.sibling!==null;)e=e.sibling,a=a.sibling=Ji(e,e.pendingProps),a.return=i;a.sibling=null}return i.child}function zd(e,i){return(e.lanes&i)!==0?!0:(e=e.dependencies,!!(e!==null&&yc(e)))}function GA(e,i,a){switch(i.tag){case 3:ve(i,i.stateNode.containerInfo),Pr(i,Oe,e.memoizedState.cache),ks();break;case 27:case 5:Hi(i);break;case 4:ve(i,i.stateNode.containerInfo);break;case 10:Pr(i,i.type,i.memoizedProps.value);break;case 31:if(i.memoizedState!==null)return i.flags|=128,od(i),null;break;case 13:var l=i.memoizedState;if(l!==null)return l.dehydrated!==null?(Ur(i),i.flags|=128,null):(a&i.child.childLanes)!==0?o_(e,i,a):(Ur(i),e=ir(e,i,a),e!==null?e.sibling:null);Ur(i);break;case 19:var f=(e.flags&128)!==0;if(l=(a&i.childLanes)!==0,l||(ja(e,i,a,!1),l=(a&i.childLanes)!==0),f){if(l)return u_(e,i,a);i.flags|=128}if(f=i.memoizedState,f!==null&&(f.rendering=null,f.tail=null,f.lastEffect=null),ot(Ie,Ie.current),l)break;return null;case 22:return i.lanes=0,e_(e,i,a,i.pendingProps);case 24:Pr(i,Oe,e.memoizedState.cache)}return ir(e,i,a)}function c_(e,i,a){if(e!==null)if(e.memoizedProps!==i.pendingProps)ze=!0;else{if(!zd(e,a)&&(i.flags&128)===0)return ze=!1,GA(e,i,a);ze=(e.flags&131072)!==0}else ze=!1,Ht&&(i.flags&1048576)!==0&&qp(i,hl,i.index);switch(i.lanes=0,i.tag){case 16:t:{var l=i.pendingProps;if(e=Bs(i.elementType),i.type=e,typeof e=="function")Bf(e)?(l=Gs(e,l),i.tag=1,i=s_(null,i,e,l,a)):(i.tag=0,i=Dd(null,i,e,l,a));else{if(e!=null){var f=e.$$typeof;if(f===At){i.tag=11,i=$y(null,i,e,l,a);break t}else if(f===D){i.tag=14,i=Wy(null,i,e,l,a);break t}}throw i=wt(e)||e,Error(r(306,i,""))}}return i;case 0:return Dd(e,i,i.type,i.pendingProps,a);case 1:return l=i.type,f=Gs(l,i.pendingProps),s_(e,i,l,f,a);case 3:t:{if(ve(i,i.stateNode.containerInfo),e===null)throw Error(r(387));l=i.pendingProps;var d=i.memoizedState;f=d.element,nd(e,i),vl(i,l,null,a);var _=i.memoizedState;if(l=_.cache,Pr(i,Oe,l),l!==d.cache&&Zf(i,[Oe],a,!0),_l(),l=_.element,d.isDehydrated)if(d={element:l,isDehydrated:!1,cache:_.cache},i.updateQueue.baseState=d,i.memoizedState=d,i.flags&256){i=a_(e,i,l,a);break t}else if(l!==f){f=Hn(Error(r(424)),i),fl(f),i=a_(e,i,l,a);break t}else{switch(e=i.stateNode.containerInfo,e.nodeType){case 9:e=e.body;break;default:e=e.nodeName==="HTML"?e.ownerDocument.body:e}for(de=Xn(e.firstChild),$e=i,Ht=!0,Mr=null,Kn=!0,a=ey(i,null,l,a),i.child=a;a;)a.flags=a.flags&-3|4096,a=a.sibling}else{if(ks(),l===f){i=ir(e,i,a);break t}tn(e,i,l,a)}i=i.child}return i;case 26:return zc(e,i),e===null?(a=Tv(i.type,null,i.pendingProps,null))?i.memoizedState=a:Ht||(a=i.type,e=i.pendingProps,l=Wc(xt.current).createElement(a),l[Ve]=i,l[He]=e,en(l,a,e),Ne(l),i.stateNode=l):i.memoizedState=Tv(i.type,e.memoizedProps,i.pendingProps,e.memoizedState),null;case 27:return Hi(i),e===null&&Ht&&(l=i.stateNode=_v(i.type,i.pendingProps,xt.current),$e=i,Kn=!0,f=de,Yr(i.type)?(gm=f,de=Xn(l.firstChild)):de=f),tn(e,i,i.pendingProps.children,a),zc(e,i),e===null&&(i.flags|=4194304),i.child;case 5:return e===null&&Ht&&((f=l=de)&&(l=Tb(l,i.type,i.pendingProps,Kn),l!==null?(i.stateNode=l,$e=i,de=Xn(l.firstChild),Kn=!1,f=!0):f=!1),f||Or(i)),Hi(i),f=i.type,d=i.pendingProps,_=e!==null?e.memoizedProps:null,l=d.children,cm(f,d)?l=null:_!==null&&cm(f,_)&&(i.flags|=32),i.memoizedState!==null&&(f=ud(e,i,zA,null,null,a),Ul._currentValue=f),zc(e,i),tn(e,i,l,a),i.child;case 6:return e===null&&Ht&&((e=a=de)&&(a=Ab(a,i.pendingProps,Kn),a!==null?(i.stateNode=a,$e=i,de=null,e=!0):e=!1),e||Or(i)),null;case 13:return o_(e,i,a);case 4:return ve(i,i.stateNode.containerInfo),l=i.pendingProps,e===null?i.child=Fs(i,null,l,a):tn(e,i,l,a),i.child;case 11:return $y(e,i,i.type,i.pendingProps,a);case 7:return tn(e,i,i.pendingProps,a),i.child;case 8:return tn(e,i,i.pendingProps.children,a),i.child;case 12:return tn(e,i,i.pendingProps.children,a),i.child;case 10:return l=i.pendingProps,Pr(i,i.type,l.value),tn(e,i,l.children,a),i.child;case 9:return f=i.type._context,l=i.pendingProps.children,Us(i),f=We(f),l=l(f),i.flags|=1,tn(e,i,l,a),i.child;case 14:return Wy(e,i,i.type,i.pendingProps,a);case 15:return t_(e,i,i.type,i.pendingProps,a);case 19:return u_(e,i,a);case 31:return HA(e,i,a);case 22:return e_(e,i,a,i.pendingProps);case 24:return Us(i),l=We(Oe),e===null?(f=Wf(),f===null&&(f=ce,d=Jf(),f.pooledCache=d,d.refCount++,d!==null&&(f.pooledCacheLanes|=a),f=d),i.memoizedState={parent:l,cache:f},ed(i),Pr(i,Oe,f)):((e.lanes&a)!==0&&(nd(e,i),vl(i,null,null,a),_l()),f=e.memoizedState,d=i.memoizedState,f.parent!==l?(f={parent:l,cache:l},i.memoizedState=f,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=f),Pr(i,Oe,l)):(l=d.cache,Pr(i,Oe,l),l!==f.cache&&Zf(i,[Oe],a,!0))),tn(e,i,i.pendingProps.children,a),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function rr(e){e.flags|=4}function kd(e,i,a,l,f){if((i=(e.mode&32)!==0)&&(i=!1),i){if(e.flags|=16777216,(f&335544128)===f)if(e.stateNode.complete)e.flags|=8192;else if(k_())e.flags|=8192;else throw qs=Tc,td}else e.flags&=-16777217}function h_(e,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)e.flags&=-16777217;else if(e.flags|=16777216,!Iv(i))if(k_())e.flags|=8192;else throw qs=Tc,td}function Lc(e,i){i!==null&&(e.flags|=4),e.flags&16384&&(i=e.tag!==22?Hu():536870912,e.lanes|=i,$a|=i)}function wl(e,i){if(!Ht)switch(e.tailMode){case"hidden":i=e.tail;for(var a=null;i!==null;)i.alternate!==null&&(a=i),i=i.sibling;a===null?e.tail=null:a.sibling=null;break;case"collapsed":a=e.tail;for(var l=null;a!==null;)a.alternate!==null&&(l=a),a=a.sibling;l===null?i||e.tail===null?e.tail=null:e.tail.sibling=null:l.sibling=null}}function me(e){var i=e.alternate!==null&&e.alternate.child===e.child,a=0,l=0;if(i)for(var f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags&65011712,l|=f.flags&65011712,f.return=e,f=f.sibling;else for(f=e.child;f!==null;)a|=f.lanes|f.childLanes,l|=f.subtreeFlags,l|=f.flags,f.return=e,f=f.sibling;return e.subtreeFlags|=l,e.childLanes=a,i}function QA(e,i,a){var l=i.pendingProps;switch(Gf(i),i.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return me(i),null;case 1:return me(i),null;case 3:return a=i.stateNode,l=null,e!==null&&(l=e.memoizedState.cache),i.memoizedState.cache!==l&&(i.flags|=2048),tr(Oe),he(),a.pendingContext&&(a.context=a.pendingContext,a.pendingContext=null),(e===null||e.child===null)&&(Ua(i)?rr(i):e===null||e.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,Kf())),me(i),null;case 26:var f=i.type,d=i.memoizedState;return e===null?(rr(i),d!==null?(me(i),h_(i,d)):(me(i),kd(i,f,null,l,a))):d?d!==e.memoizedState?(rr(i),me(i),h_(i,d)):(me(i),i.flags&=-16777217):(e=e.memoizedProps,e!==l&&rr(i),me(i),kd(i,f,e,l,a)),null;case 27:if(Tr(i),a=xt.current,f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&rr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return me(i),null}e=ut.current,Ua(i)?Hp(i):(e=_v(f,l,a),i.stateNode=e,rr(i))}return me(i),null;case 5:if(Tr(i),f=i.type,e!==null&&i.stateNode!=null)e.memoizedProps!==l&&rr(i);else{if(!l){if(i.stateNode===null)throw Error(r(166));return me(i),null}if(d=ut.current,Ua(i))Hp(i);else{var _=Wc(xt.current);switch(d){case 1:d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":d=_.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":d=_.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":d=_.createElement("div"),d.innerHTML="<script><\/script>",d=d.removeChild(d.firstChild);break;case"select":d=typeof l.is=="string"?_.createElement("select",{is:l.is}):_.createElement("select"),l.multiple?d.multiple=!0:l.size&&(d.size=l.size);break;default:d=typeof l.is=="string"?_.createElement(f,{is:l.is}):_.createElement(f)}}d[Ve]=i,d[He]=l;t:for(_=i.child;_!==null;){if(_.tag===5||_.tag===6)d.appendChild(_.stateNode);else if(_.tag!==4&&_.tag!==27&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===i)break t;for(;_.sibling===null;){if(_.return===null||_.return===i)break t;_=_.return}_.sibling.return=_.return,_=_.sibling}i.stateNode=d;t:switch(en(d,f,l),f){case"button":case"input":case"select":case"textarea":l=!!l.autoFocus;break t;case"img":l=!0;break t;default:l=!1}l&&rr(i)}}return me(i),kd(i,i.type,e===null?null:e.memoizedProps,i.pendingProps,a),null;case 6:if(e&&i.stateNode!=null)e.memoizedProps!==l&&rr(i);else{if(typeof l!="string"&&i.stateNode===null)throw Error(r(166));if(e=xt.current,Ua(i)){if(e=i.stateNode,a=i.memoizedProps,l=null,f=$e,f!==null)switch(f.tag){case 27:case 5:l=f.memoizedProps}e[Ve]=i,e=!!(e.nodeValue===a||l!==null&&l.suppressHydrationWarning===!0||ov(e.nodeValue,a)),e||Or(i,!0)}else e=Wc(e).createTextNode(l),e[Ve]=i,i.stateNode=e}return me(i),null;case 31:if(a=i.memoizedState,e===null||e.memoizedState!==null){if(l=Ua(i),a!==null){if(e===null){if(!l)throw Error(r(318));if(e=i.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(r(557));e[Ve]=i}else ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;me(i),e=!1}else a=Kf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=a),e=!0;if(!e)return i.flags&256?(Vn(i),i):(Vn(i),null);if((i.flags&128)!==0)throw Error(r(558))}return me(i),null;case 13:if(l=i.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(f=Ua(i),l!==null&&l.dehydrated!==null){if(e===null){if(!f)throw Error(r(318));if(f=i.memoizedState,f=f!==null?f.dehydrated:null,!f)throw Error(r(317));f[Ve]=i}else ks(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;me(i),f=!1}else f=Kf(),e!==null&&e.memoizedState!==null&&(e.memoizedState.hydrationErrors=f),f=!0;if(!f)return i.flags&256?(Vn(i),i):(Vn(i),null)}return Vn(i),(i.flags&128)!==0?(i.lanes=a,i):(a=l!==null,e=e!==null&&e.memoizedState!==null,a&&(l=i.child,f=null,l.alternate!==null&&l.alternate.memoizedState!==null&&l.alternate.memoizedState.cachePool!==null&&(f=l.alternate.memoizedState.cachePool.pool),d=null,l.memoizedState!==null&&l.memoizedState.cachePool!==null&&(d=l.memoizedState.cachePool.pool),d!==f&&(l.flags|=2048)),a!==e&&a&&(i.child.flags|=8192),Lc(i,i.updateQueue),me(i),null);case 4:return he(),e===null&&sm(i.stateNode.containerInfo),me(i),null;case 10:return tr(i.type),me(i),null;case 19:if(J(Ie),l=i.memoizedState,l===null)return me(i),null;if(f=(i.flags&128)!==0,d=l.rendering,d===null)if(f)wl(l,!1);else{if(Ae!==0||e!==null&&(e.flags&128)!==0)for(e=i.child;e!==null;){if(d=wc(e),d!==null){for(i.flags|=128,wl(l,!1),e=d.updateQueue,i.updateQueue=e,Lc(i,e),i.subtreeFlags=0,e=a,a=i.child;a!==null;)Up(a,e),a=a.sibling;return ot(Ie,Ie.current&1|2),Ht&&$i(i,l.treeForkCount),i.child}e=e.sibling}l.tail!==null&&De()>Fc&&(i.flags|=128,f=!0,wl(l,!1),i.lanes=4194304)}else{if(!f)if(e=wc(d),e!==null){if(i.flags|=128,f=!0,e=e.updateQueue,i.updateQueue=e,Lc(i,e),wl(l,!0),l.tail===null&&l.tailMode==="hidden"&&!d.alternate&&!Ht)return me(i),null}else 2*De()-l.renderingStartTime>Fc&&a!==536870912&&(i.flags|=128,f=!0,wl(l,!1),i.lanes=4194304);l.isBackwards?(d.sibling=i.child,i.child=d):(e=l.last,e!==null?e.sibling=d:i.child=d,l.last=d)}return l.tail!==null?(e=l.tail,l.rendering=e,l.tail=e.sibling,l.renderingStartTime=De(),e.sibling=null,a=Ie.current,ot(Ie,f?a&1|2:a&1),Ht&&$i(i,l.treeForkCount),e):(me(i),null);case 22:case 23:return Vn(i),ad(),l=i.memoizedState!==null,e!==null?e.memoizedState!==null!==l&&(i.flags|=8192):l&&(i.flags|=8192),l?(a&536870912)!==0&&(i.flags&128)===0&&(me(i),i.subtreeFlags&6&&(i.flags|=8192)):me(i),a=i.updateQueue,a!==null&&Lc(i,a.retryQueue),a=null,e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),l=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(l=i.memoizedState.cachePool.pool),l!==a&&(i.flags|=2048),e!==null&&J(js),null;case 24:return a=null,e!==null&&(a=e.memoizedState.cache),i.memoizedState.cache!==a&&(i.flags|=2048),tr(Oe),me(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function KA(e,i){switch(Gf(i),i.tag){case 1:return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 3:return tr(Oe),he(),e=i.flags,(e&65536)!==0&&(e&128)===0?(i.flags=e&-65537|128,i):null;case 26:case 27:case 5:return Tr(i),null;case 31:if(i.memoizedState!==null){if(Vn(i),i.alternate===null)throw Error(r(340));ks()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 13:if(Vn(i),e=i.memoizedState,e!==null&&e.dehydrated!==null){if(i.alternate===null)throw Error(r(340));ks()}return e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 19:return J(Ie),null;case 4:return he(),null;case 10:return tr(i.type),null;case 22:case 23:return Vn(i),ad(),e!==null&&J(js),e=i.flags,e&65536?(i.flags=e&-65537|128,i):null;case 24:return tr(Oe),null;case 25:return null;default:return null}}function f_(e,i){switch(Gf(i),i.tag){case 3:tr(Oe),he();break;case 26:case 27:case 5:Tr(i);break;case 4:he();break;case 31:i.memoizedState!==null&&Vn(i);break;case 13:Vn(i);break;case 19:J(Ie);break;case 10:tr(i.type);break;case 22:case 23:Vn(i),ad(),e!==null&&J(js);break;case 24:tr(Oe)}}function Il(e,i){try{var a=i.updateQueue,l=a!==null?a.lastEffect:null;if(l!==null){var f=l.next;a=f;do{if((a.tag&e)===e){l=void 0;var d=a.create,_=a.inst;l=d(),_.destroy=l}a=a.next}while(a!==f)}}catch(T){ie(i,i.return,T)}}function Br(e,i,a){try{var l=i.updateQueue,f=l!==null?l.lastEffect:null;if(f!==null){var d=f.next;l=d;do{if((l.tag&e)===e){var _=l.inst,T=_.destroy;if(T!==void 0){_.destroy=void 0,f=i;var V=a,B=T;try{B()}catch(Y){ie(f,V,Y)}}}l=l.next}while(l!==d)}}catch(Y){ie(i,i.return,Y)}}function d_(e){var i=e.updateQueue;if(i!==null){var a=e.stateNode;try{iy(i,a)}catch(l){ie(e,e.return,l)}}}function m_(e,i,a){a.props=Gs(e.type,e.memoizedProps),a.state=e.memoizedState;try{a.componentWillUnmount()}catch(l){ie(e,i,l)}}function Rl(e,i){try{var a=e.ref;if(a!==null){switch(e.tag){case 26:case 27:case 5:var l=e.stateNode;break;case 30:l=e.stateNode;break;default:l=e.stateNode}typeof a=="function"?e.refCleanup=a(l):a.current=l}}catch(f){ie(e,i,f)}}function Pi(e,i){var a=e.ref,l=e.refCleanup;if(a!==null)if(typeof l=="function")try{l()}catch(f){ie(e,i,f)}finally{e.refCleanup=null,e=e.alternate,e!=null&&(e.refCleanup=null)}else if(typeof a=="function")try{a(null)}catch(f){ie(e,i,f)}else a.current=null}function g_(e){var i=e.type,a=e.memoizedProps,l=e.stateNode;try{t:switch(i){case"button":case"input":case"select":case"textarea":a.autoFocus&&l.focus();break t;case"img":a.src?l.src=a.src:a.srcSet&&(l.srcset=a.srcSet)}}catch(f){ie(e,e.return,f)}}function Ld(e,i,a){try{var l=e.stateNode;gb(l,e.type,a,i),l[He]=i}catch(f){ie(e,e.return,f)}}function p_(e){return e.tag===5||e.tag===3||e.tag===26||e.tag===27&&Yr(e.type)||e.tag===4}function Ud(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||p_(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.tag===27&&Yr(e.type)||e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function jd(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a).insertBefore(e,i):(i=a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,i.appendChild(e),a=a._reactRootContainer,a!=null||i.onclick!==null||(i.onclick=oi));else if(l!==4&&(l===27&&Yr(e.type)&&(a=e.stateNode,i=null),e=e.child,e!==null))for(jd(e,i,a),e=e.sibling;e!==null;)jd(e,i,a),e=e.sibling}function Uc(e,i,a){var l=e.tag;if(l===5||l===6)e=e.stateNode,i?a.insertBefore(e,i):a.appendChild(e);else if(l!==4&&(l===27&&Yr(e.type)&&(a=e.stateNode),e=e.child,e!==null))for(Uc(e,i,a),e=e.sibling;e!==null;)Uc(e,i,a),e=e.sibling}function y_(e){var i=e.stateNode,a=e.memoizedProps;try{for(var l=e.type,f=i.attributes;f.length;)i.removeAttributeNode(f[0]);en(i,l,a),i[Ve]=e,i[He]=a}catch(d){ie(e,e.return,d)}}var sr=!1,ke=!1,Bd=!1,__=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function YA(e,i){if(e=e.containerInfo,lm=ah,e=Cp(e),Of(e)){if("selectionStart"in e)var a={start:e.selectionStart,end:e.selectionEnd};else t:{a=(a=e.ownerDocument)&&a.defaultView||window;var l=a.getSelection&&a.getSelection();if(l&&l.rangeCount!==0){a=l.anchorNode;var f=l.anchorOffset,d=l.focusNode;l=l.focusOffset;try{a.nodeType,d.nodeType}catch{a=null;break t}var _=0,T=-1,V=-1,B=0,Y=0,$=e,F=null;e:for(;;){for(var G;$!==a||f!==0&&$.nodeType!==3||(T=_+f),$!==d||l!==0&&$.nodeType!==3||(V=_+l),$.nodeType===3&&(_+=$.nodeValue.length),(G=$.firstChild)!==null;)F=$,$=G;for(;;){if($===e)break e;if(F===a&&++B===f&&(T=_),F===d&&++Y===l&&(V=_),(G=$.nextSibling)!==null)break;$=F,F=$.parentNode}$=G}a=T===-1||V===-1?null:{start:T,end:V}}else a=null}a=a||{start:0,end:0}}else a=null;for(um={focusedElem:e,selectionRange:a},ah=!1,Qe=i;Qe!==null;)if(i=Qe,e=i.child,(i.subtreeFlags&1028)!==0&&e!==null)e.return=i,Qe=e;else for(;Qe!==null;){switch(i=Qe,d=i.alternate,e=i.flags,i.tag){case 0:if((e&4)!==0&&(e=i.updateQueue,e=e!==null?e.events:null,e!==null))for(a=0;a<e.length;a++)f=e[a],f.ref.impl=f.nextImpl;break;case 11:case 15:break;case 1:if((e&1024)!==0&&d!==null){e=void 0,a=i,f=d.memoizedProps,d=d.memoizedState,l=a.stateNode;try{var ht=Gs(a.type,f);e=l.getSnapshotBeforeUpdate(ht,d),l.__reactInternalSnapshotBeforeUpdate=e}catch(Tt){ie(a,a.return,Tt)}}break;case 3:if((e&1024)!==0){if(e=i.stateNode.containerInfo,a=e.nodeType,a===9)fm(e);else if(a===1)switch(e.nodeName){case"HEAD":case"HTML":case"BODY":fm(e);break;default:e.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((e&1024)!==0)throw Error(r(163))}if(e=i.sibling,e!==null){e.return=i.return,Qe=e;break}Qe=i.return}}function v_(e,i,a){var l=a.flags;switch(a.tag){case 0:case 11:case 15:or(e,a),l&4&&Il(5,a);break;case 1:if(or(e,a),l&4)if(e=a.stateNode,i===null)try{e.componentDidMount()}catch(_){ie(a,a.return,_)}else{var f=Gs(a.type,i.memoizedProps);i=i.memoizedState;try{e.componentDidUpdate(f,i,e.__reactInternalSnapshotBeforeUpdate)}catch(_){ie(a,a.return,_)}}l&64&&d_(a),l&512&&Rl(a,a.return);break;case 3:if(or(e,a),l&64&&(e=a.updateQueue,e!==null)){if(i=null,a.child!==null)switch(a.child.tag){case 27:case 5:i=a.child.stateNode;break;case 1:i=a.child.stateNode}try{iy(e,i)}catch(_){ie(a,a.return,_)}}break;case 27:i===null&&l&4&&y_(a);case 26:case 5:or(e,a),i===null&&l&4&&g_(a),l&512&&Rl(a,a.return);break;case 12:or(e,a);break;case 31:or(e,a),l&4&&A_(e,a);break;case 13:or(e,a),l&4&&b_(e,a),l&64&&(e=a.memoizedState,e!==null&&(e=e.dehydrated,e!==null&&(a=ib.bind(null,a),bb(e,a))));break;case 22:if(l=a.memoizedState!==null||sr,!l){i=i!==null&&i.memoizedState!==null||ke,f=sr;var d=ke;sr=l,(ke=i)&&!d?lr(e,a,(a.subtreeFlags&8772)!==0):or(e,a),sr=f,ke=d}break;case 30:break;default:or(e,a)}}function E_(e){var i=e.alternate;i!==null&&(e.alternate=null,E_(i)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(i=e.stateNode,i!==null&&Aa(i)),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}var pe=null,vn=!1;function ar(e,i,a){for(a=a.child;a!==null;)T_(e,i,a),a=a.sibling}function T_(e,i,a){if(Ze&&typeof Ze.onCommitFiberUnmount=="function")try{Ze.onCommitFiberUnmount(ii,a)}catch{}switch(a.tag){case 26:ke||Pi(a,i),ar(e,i,a),a.memoizedState?a.memoizedState.count--:a.stateNode&&(a=a.stateNode,a.parentNode.removeChild(a));break;case 27:ke||Pi(a,i);var l=pe,f=vn;Yr(a.type)&&(pe=a.stateNode,vn=!1),ar(e,i,a),zl(a.stateNode),pe=l,vn=f;break;case 5:ke||Pi(a,i);case 6:if(l=pe,f=vn,pe=null,ar(e,i,a),pe=l,vn=f,pe!==null)if(vn)try{(pe.nodeType===9?pe.body:pe.nodeName==="HTML"?pe.ownerDocument.body:pe).removeChild(a.stateNode)}catch(d){ie(a,i,d)}else try{pe.removeChild(a.stateNode)}catch(d){ie(a,i,d)}break;case 18:pe!==null&&(vn?(e=pe,dv(e.nodeType===9?e.body:e.nodeName==="HTML"?e.ownerDocument.body:e,a.stateNode),ao(e)):dv(pe,a.stateNode));break;case 4:l=pe,f=vn,pe=a.stateNode.containerInfo,vn=!0,ar(e,i,a),pe=l,vn=f;break;case 0:case 11:case 14:case 15:Br(2,a,i),ke||Br(4,a,i),ar(e,i,a);break;case 1:ke||(Pi(a,i),l=a.stateNode,typeof l.componentWillUnmount=="function"&&m_(a,i,l)),ar(e,i,a);break;case 21:ar(e,i,a);break;case 22:ke=(l=ke)||a.memoizedState!==null,ar(e,i,a),ke=l;break;default:ar(e,i,a)}}function A_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null))){e=e.dehydrated;try{ao(e)}catch(a){ie(i,i.return,a)}}}function b_(e,i){if(i.memoizedState===null&&(e=i.alternate,e!==null&&(e=e.memoizedState,e!==null&&(e=e.dehydrated,e!==null))))try{ao(e)}catch(a){ie(i,i.return,a)}}function XA(e){switch(e.tag){case 31:case 13:case 19:var i=e.stateNode;return i===null&&(i=e.stateNode=new __),i;case 22:return e=e.stateNode,i=e._retryCache,i===null&&(i=e._retryCache=new __),i;default:throw Error(r(435,e.tag))}}function jc(e,i){var a=XA(e);i.forEach(function(l){if(!a.has(l)){a.add(l);var f=rb.bind(null,e,l);l.then(f,f)}})}function En(e,i){var a=i.deletions;if(a!==null)for(var l=0;l<a.length;l++){var f=a[l],d=e,_=i,T=_;t:for(;T!==null;){switch(T.tag){case 27:if(Yr(T.type)){pe=T.stateNode,vn=!1;break t}break;case 5:pe=T.stateNode,vn=!1;break t;case 3:case 4:pe=T.stateNode.containerInfo,vn=!0;break t}T=T.return}if(pe===null)throw Error(r(160));T_(d,_,f),pe=null,vn=!1,d=f.alternate,d!==null&&(d.return=null),f.return=null}if(i.subtreeFlags&13886)for(i=i.child;i!==null;)S_(i,e),i=i.sibling}var di=null;function S_(e,i){var a=e.alternate,l=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:En(i,e),Tn(e),l&4&&(Br(3,e,e.return),Il(3,e),Br(5,e,e.return));break;case 1:En(i,e),Tn(e),l&512&&(ke||a===null||Pi(a,a.return)),l&64&&sr&&(e=e.updateQueue,e!==null&&(l=e.callbacks,l!==null&&(a=e.shared.hiddenCallbacks,e.shared.hiddenCallbacks=a===null?l:a.concat(l))));break;case 26:var f=di;if(En(i,e),Tn(e),l&512&&(ke||a===null||Pi(a,a.return)),l&4){var d=a!==null?a.memoizedState:null;if(l=e.memoizedState,a===null)if(l===null)if(e.stateNode===null){t:{l=e.type,a=e.memoizedProps,f=f.ownerDocument||f;e:switch(l){case"title":d=f.getElementsByTagName("title")[0],(!d||d[Ti]||d[Ve]||d.namespaceURI==="http://www.w3.org/2000/svg"||d.hasAttribute("itemprop"))&&(d=f.createElement(l),f.head.insertBefore(d,f.querySelector("head > title"))),en(d,l,a),d[Ve]=e,Ne(d),l=d;break t;case"link":var _=Sv("link","href",f).get(l+(a.href||""));if(_){for(var T=0;T<_.length;T++)if(d=_[T],d.getAttribute("href")===(a.href==null||a.href===""?null:a.href)&&d.getAttribute("rel")===(a.rel==null?null:a.rel)&&d.getAttribute("title")===(a.title==null?null:a.title)&&d.getAttribute("crossorigin")===(a.crossOrigin==null?null:a.crossOrigin)){_.splice(T,1);break e}}d=f.createElement(l),en(d,l,a),f.head.appendChild(d);break;case"meta":if(_=Sv("meta","content",f).get(l+(a.content||""))){for(T=0;T<_.length;T++)if(d=_[T],d.getAttribute("content")===(a.content==null?null:""+a.content)&&d.getAttribute("name")===(a.name==null?null:a.name)&&d.getAttribute("property")===(a.property==null?null:a.property)&&d.getAttribute("http-equiv")===(a.httpEquiv==null?null:a.httpEquiv)&&d.getAttribute("charset")===(a.charSet==null?null:a.charSet)){_.splice(T,1);break e}}d=f.createElement(l),en(d,l,a),f.head.appendChild(d);break;default:throw Error(r(468,l))}d[Ve]=e,Ne(d),l=d}e.stateNode=l}else wv(f,e.type,e.stateNode);else e.stateNode=bv(f,l,e.memoizedProps);else d!==l?(d===null?a.stateNode!==null&&(a=a.stateNode,a.parentNode.removeChild(a)):d.count--,l===null?wv(f,e.type,e.stateNode):bv(f,l,e.memoizedProps)):l===null&&e.stateNode!==null&&Ld(e,e.memoizedProps,a.memoizedProps)}break;case 27:En(i,e),Tn(e),l&512&&(ke||a===null||Pi(a,a.return)),a!==null&&l&4&&Ld(e,e.memoizedProps,a.memoizedProps);break;case 5:if(En(i,e),Tn(e),l&512&&(ke||a===null||Pi(a,a.return)),e.flags&32){f=e.stateNode;try{_n(f,"")}catch(ht){ie(e,e.return,ht)}}l&4&&e.stateNode!=null&&(f=e.memoizedProps,Ld(e,f,a!==null?a.memoizedProps:f)),l&1024&&(Bd=!0);break;case 6:if(En(i,e),Tn(e),l&4){if(e.stateNode===null)throw Error(r(162));l=e.memoizedProps,a=e.stateNode;try{a.nodeValue=l}catch(ht){ie(e,e.return,ht)}}break;case 3:if(nh=null,f=di,di=th(i.containerInfo),En(i,e),di=f,Tn(e),l&4&&a!==null&&a.memoizedState.isDehydrated)try{ao(i.containerInfo)}catch(ht){ie(e,e.return,ht)}Bd&&(Bd=!1,w_(e));break;case 4:l=di,di=th(e.stateNode.containerInfo),En(i,e),Tn(e),di=l;break;case 12:En(i,e),Tn(e);break;case 31:En(i,e),Tn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,jc(e,l)));break;case 13:En(i,e),Tn(e),e.child.flags&8192&&e.memoizedState!==null!=(a!==null&&a.memoizedState!==null)&&(qc=De()),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,jc(e,l)));break;case 22:f=e.memoizedState!==null;var V=a!==null&&a.memoizedState!==null,B=sr,Y=ke;if(sr=B||f,ke=Y||V,En(i,e),ke=Y,sr=B,Tn(e),l&8192)t:for(i=e.stateNode,i._visibility=f?i._visibility&-2:i._visibility|1,f&&(a===null||V||sr||ke||Qs(e)),a=null,i=e;;){if(i.tag===5||i.tag===26){if(a===null){V=a=i;try{if(d=V.stateNode,f)_=d.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{T=V.stateNode;var $=V.memoizedProps.style,F=$!=null&&$.hasOwnProperty("display")?$.display:null;T.style.display=F==null||typeof F=="boolean"?"":(""+F).trim()}}catch(ht){ie(V,V.return,ht)}}}else if(i.tag===6){if(a===null){V=i;try{V.stateNode.nodeValue=f?"":V.memoizedProps}catch(ht){ie(V,V.return,ht)}}}else if(i.tag===18){if(a===null){V=i;try{var G=V.stateNode;f?mv(G,!0):mv(V.stateNode,!1)}catch(ht){ie(V,V.return,ht)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===e)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break t;for(;i.sibling===null;){if(i.return===null||i.return===e)break t;a===i&&(a=null),i=i.return}a===i&&(a=null),i.sibling.return=i.return,i=i.sibling}l&4&&(l=e.updateQueue,l!==null&&(a=l.retryQueue,a!==null&&(l.retryQueue=null,jc(e,a))));break;case 19:En(i,e),Tn(e),l&4&&(l=e.updateQueue,l!==null&&(e.updateQueue=null,jc(e,l)));break;case 30:break;case 21:break;default:En(i,e),Tn(e)}}function Tn(e){var i=e.flags;if(i&2){try{for(var a,l=e.return;l!==null;){if(p_(l)){a=l;break}l=l.return}if(a==null)throw Error(r(160));switch(a.tag){case 27:var f=a.stateNode,d=Ud(e);Uc(e,d,f);break;case 5:var _=a.stateNode;a.flags&32&&(_n(_,""),a.flags&=-33);var T=Ud(e);Uc(e,T,_);break;case 3:case 4:var V=a.stateNode.containerInfo,B=Ud(e);jd(e,B,V);break;default:throw Error(r(161))}}catch(Y){ie(e,e.return,Y)}e.flags&=-3}i&4096&&(e.flags&=-4097)}function w_(e){if(e.subtreeFlags&1024)for(e=e.child;e!==null;){var i=e;w_(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),e=e.sibling}}function or(e,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)v_(e,i.alternate,i),i=i.sibling}function Qs(e){for(e=e.child;e!==null;){var i=e;switch(i.tag){case 0:case 11:case 14:case 15:Br(4,i,i.return),Qs(i);break;case 1:Pi(i,i.return);var a=i.stateNode;typeof a.componentWillUnmount=="function"&&m_(i,i.return,a),Qs(i);break;case 27:zl(i.stateNode);case 26:case 5:Pi(i,i.return),Qs(i);break;case 22:i.memoizedState===null&&Qs(i);break;case 30:Qs(i);break;default:Qs(i)}e=e.sibling}}function lr(e,i,a){for(a=a&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var l=i.alternate,f=e,d=i,_=d.flags;switch(d.tag){case 0:case 11:case 15:lr(f,d,a),Il(4,d);break;case 1:if(lr(f,d,a),l=d,f=l.stateNode,typeof f.componentDidMount=="function")try{f.componentDidMount()}catch(B){ie(l,l.return,B)}if(l=d,f=l.updateQueue,f!==null){var T=l.stateNode;try{var V=f.shared.hiddenCallbacks;if(V!==null)for(f.shared.hiddenCallbacks=null,f=0;f<V.length;f++)ny(V[f],T)}catch(B){ie(l,l.return,B)}}a&&_&64&&d_(d),Rl(d,d.return);break;case 27:y_(d);case 26:case 5:lr(f,d,a),a&&l===null&&_&4&&g_(d),Rl(d,d.return);break;case 12:lr(f,d,a);break;case 31:lr(f,d,a),a&&_&4&&A_(f,d);break;case 13:lr(f,d,a),a&&_&4&&b_(f,d);break;case 22:d.memoizedState===null&&lr(f,d,a),Rl(d,d.return);break;case 30:break;default:lr(f,d,a)}i=i.sibling}}function qd(e,i){var a=null;e!==null&&e.memoizedState!==null&&e.memoizedState.cachePool!==null&&(a=e.memoizedState.cachePool.pool),e=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(e=i.memoizedState.cachePool.pool),e!==a&&(e!=null&&e.refCount++,a!=null&&dl(a))}function Fd(e,i){e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&dl(e))}function mi(e,i,a,l){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)I_(e,i,a,l),i=i.sibling}function I_(e,i,a,l){var f=i.flags;switch(i.tag){case 0:case 11:case 15:mi(e,i,a,l),f&2048&&Il(9,i);break;case 1:mi(e,i,a,l);break;case 3:mi(e,i,a,l),f&2048&&(e=null,i.alternate!==null&&(e=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==e&&(i.refCount++,e!=null&&dl(e)));break;case 12:if(f&2048){mi(e,i,a,l),e=i.stateNode;try{var d=i.memoizedProps,_=d.id,T=d.onPostCommit;typeof T=="function"&&T(_,i.alternate===null?"mount":"update",e.passiveEffectDuration,-0)}catch(V){ie(i,i.return,V)}}else mi(e,i,a,l);break;case 31:mi(e,i,a,l);break;case 13:mi(e,i,a,l);break;case 23:break;case 22:d=i.stateNode,_=i.alternate,i.memoizedState!==null?d._visibility&2?mi(e,i,a,l):xl(e,i):d._visibility&2?mi(e,i,a,l):(d._visibility|=2,Xa(e,i,a,l,(i.subtreeFlags&10256)!==0||!1)),f&2048&&qd(_,i);break;case 24:mi(e,i,a,l),f&2048&&Fd(i.alternate,i);break;default:mi(e,i,a,l)}}function Xa(e,i,a,l,f){for(f=f&&((i.subtreeFlags&10256)!==0||!1),i=i.child;i!==null;){var d=e,_=i,T=a,V=l,B=_.flags;switch(_.tag){case 0:case 11:case 15:Xa(d,_,T,V,f),Il(8,_);break;case 23:break;case 22:var Y=_.stateNode;_.memoizedState!==null?Y._visibility&2?Xa(d,_,T,V,f):xl(d,_):(Y._visibility|=2,Xa(d,_,T,V,f)),f&&B&2048&&qd(_.alternate,_);break;case 24:Xa(d,_,T,V,f),f&&B&2048&&Fd(_.alternate,_);break;default:Xa(d,_,T,V,f)}i=i.sibling}}function xl(e,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var a=e,l=i,f=l.flags;switch(l.tag){case 22:xl(a,l),f&2048&&qd(l.alternate,l);break;case 24:xl(a,l),f&2048&&Fd(l.alternate,l);break;default:xl(a,l)}i=i.sibling}}var Dl=8192;function Za(e,i,a){if(e.subtreeFlags&Dl)for(e=e.child;e!==null;)R_(e,i,a),e=e.sibling}function R_(e,i,a){switch(e.tag){case 26:Za(e,i,a),e.flags&Dl&&e.memoizedState!==null&&Pb(a,di,e.memoizedState,e.memoizedProps);break;case 5:Za(e,i,a);break;case 3:case 4:var l=di;di=th(e.stateNode.containerInfo),Za(e,i,a),di=l;break;case 22:e.memoizedState===null&&(l=e.alternate,l!==null&&l.memoizedState!==null?(l=Dl,Dl=16777216,Za(e,i,a),Dl=l):Za(e,i,a));break;default:Za(e,i,a)}}function x_(e){var i=e.alternate;if(i!==null&&(e=i.child,e!==null)){i.child=null;do i=e.sibling,e.sibling=null,e=i;while(e!==null)}}function Cl(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qe=l,C_(l,e)}x_(e)}if(e.subtreeFlags&10256)for(e=e.child;e!==null;)D_(e),e=e.sibling}function D_(e){switch(e.tag){case 0:case 11:case 15:Cl(e),e.flags&2048&&Br(9,e,e.return);break;case 3:Cl(e);break;case 12:Cl(e);break;case 22:var i=e.stateNode;e.memoizedState!==null&&i._visibility&2&&(e.return===null||e.return.tag!==13)?(i._visibility&=-3,Bc(e)):Cl(e);break;default:Cl(e)}}function Bc(e){var i=e.deletions;if((e.flags&16)!==0){if(i!==null)for(var a=0;a<i.length;a++){var l=i[a];Qe=l,C_(l,e)}x_(e)}for(e=e.child;e!==null;){switch(i=e,i.tag){case 0:case 11:case 15:Br(8,i,i.return),Bc(i);break;case 22:a=i.stateNode,a._visibility&2&&(a._visibility&=-3,Bc(i));break;default:Bc(i)}e=e.sibling}}function C_(e,i){for(;Qe!==null;){var a=Qe;switch(a.tag){case 0:case 11:case 15:Br(8,a,i);break;case 23:case 22:if(a.memoizedState!==null&&a.memoizedState.cachePool!==null){var l=a.memoizedState.cachePool.pool;l!=null&&l.refCount++}break;case 24:dl(a.memoizedState.cache)}if(l=a.child,l!==null)l.return=a,Qe=l;else t:for(a=e;Qe!==null;){l=Qe;var f=l.sibling,d=l.return;if(E_(l),l===a){Qe=null;break t}if(f!==null){f.return=d,Qe=f;break t}Qe=d}}}var ZA={getCacheForType:function(e){var i=We(Oe),a=i.data.get(e);return a===void 0&&(a=e(),i.data.set(e,a)),a},cacheSignal:function(){return We(Oe).controller.signal}},JA=typeof WeakMap=="function"?WeakMap:Map,$t=0,ce=null,Ut=null,Bt=0,ne=0,Nn=null,qr=!1,Ja=!1,Hd=!1,ur=0,Ae=0,Fr=0,Ks=0,Gd=0,Mn=0,$a=0,Vl=null,An=null,Qd=!1,qc=0,V_=0,Fc=1/0,Hc=null,Hr=null,qe=0,Gr=null,Wa=null,cr=0,Kd=0,Yd=null,N_=null,Nl=0,Xd=null;function On(){return($t&2)!==0&&Bt!==0?Bt&-Bt:q.T!==null?em():Gu()}function M_(){if(Mn===0)if((Bt&536870912)===0||Ht){var e=Es;Es<<=1,(Es&3932160)===0&&(Es=262144),Mn=e}else Mn=536870912;return e=Cn.current,e!==null&&(e.flags|=32),Mn}function bn(e,i,a){(e===ce&&(ne===2||ne===9)||e.cancelPendingCommit!==null)&&(to(e,0),Qr(e,Bt,Mn,!1)),Ts(e,a),(($t&2)===0||e!==ce)&&(e===ce&&(($t&2)===0&&(Ks|=a),Ae===4&&Qr(e,Bt,Mn,!1)),zi(e))}function O_(e,i,a){if(($t&6)!==0)throw Error(r(327));var l=!a&&(i&127)===0&&(i&e.expiredLanes)===0||ri(e,i),f=l?tb(e,i):Jd(e,i,!0),d=l;do{if(f===0){Ja&&!l&&Qr(e,i,0,!1);break}else{if(a=e.current.alternate,d&&!$A(a)){f=Jd(e,i,!1),d=!1;continue}if(f===2){if(d=i,e.errorRecoveryDisabledLanes&d)var _=0;else _=e.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){i=_;t:{var T=e;f=Vl;var V=T.current.memoizedState.isDehydrated;if(V&&(to(T,_).flags|=256),_=Jd(T,_,!1),_!==2){if(Hd&&!V){T.errorRecoveryDisabledLanes|=d,Ks|=d,f=4;break t}d=An,An=f,d!==null&&(An===null?An=d:An.push.apply(An,d))}f=_}if(d=!1,f!==2)continue}}if(f===1){to(e,0),Qr(e,i,0,!0);break}t:{switch(l=e,d=f,d){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:Qr(l,i,Mn,!qr);break t;case 2:An=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(f=qc+300-De(),10<f)){if(Qr(l,i,Mn,!qr),_i(l,0,!0)!==0)break t;cr=i,l.timeoutHandle=hv(P_.bind(null,l,a,An,Hc,Qd,i,Mn,Ks,$a,qr,d,"Throttled",-0,0),f);break t}P_(l,a,An,Hc,Qd,i,Mn,Ks,$a,qr,d,null,-0,0)}}break}while(!0);zi(e)}function P_(e,i,a,l,f,d,_,T,V,B,Y,$,F,G){if(e.timeoutHandle=-1,$=i.subtreeFlags,$&8192||($&16785408)===16785408){$={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:oi},R_(i,d,$);var ht=(d&62914560)===d?qc-De():(d&4194048)===d?V_-De():0;if(ht=zb($,ht),ht!==null){cr=d,e.cancelPendingCommit=ht(F_.bind(null,e,i,d,a,l,f,_,T,V,Y,$,null,F,G)),Qr(e,d,_,!B);return}}F_(e,i,d,a,l,f,_,T,V)}function $A(e){for(var i=e;;){var a=i.tag;if((a===0||a===11||a===15)&&i.flags&16384&&(a=i.updateQueue,a!==null&&(a=a.stores,a!==null)))for(var l=0;l<a.length;l++){var f=a[l],d=f.getSnapshot;f=f.value;try{if(!xn(d(),f))return!1}catch{return!1}}if(a=i.child,i.subtreeFlags&16384&&a!==null)a.return=i,i=a;else{if(i===e)break;for(;i.sibling===null;){if(i.return===null||i.return===e)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function Qr(e,i,a,l){i&=~Gd,i&=~Ks,e.suspendedLanes|=i,e.pingedLanes&=~i,l&&(e.warmLanes|=i),l=e.expirationTimes;for(var f=i;0<f;){var d=31-Se(f),_=1<<d;l[d]=-1,f&=~_}a!==0&&As(e,a,i)}function Gc(){return($t&6)===0?(Ml(0),!1):!0}function Zd(){if(Ut!==null){if(ne===0)var e=Ut.return;else e=Ut,Wi=Ls=null,fd(e),Ha=null,gl=0,e=Ut;for(;e!==null;)f_(e.alternate,e),e=e.return;Ut=null}}function to(e,i){var a=e.timeoutHandle;a!==-1&&(e.timeoutHandle=-1,_b(a)),a=e.cancelPendingCommit,a!==null&&(e.cancelPendingCommit=null,a()),cr=0,Zd(),ce=e,Ut=a=Ji(e.current,null),Bt=i,ne=0,Nn=null,qr=!1,Ja=ri(e,i),Hd=!1,$a=Mn=Gd=Ks=Fr=Ae=0,An=Vl=null,Qd=!1,(i&8)!==0&&(i|=i&32);var l=e.entangledLanes;if(l!==0)for(e=e.entanglements,l&=i;0<l;){var f=31-Se(l),d=1<<f;i|=e[f],l&=~d}return ur=i,fc(),a}function z_(e,i){Vt=null,q.H=bl,i===Fa||i===Ec?(i=$p(),ne=3):i===td?(i=$p(),ne=4):ne=i===xd?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Nn=i,Ut===null&&(Ae=1,Oc(e,Hn(i,e.current)))}function k_(){var e=Cn.current;return e===null?!0:(Bt&4194048)===Bt?Yn===null:(Bt&62914560)===Bt||(Bt&536870912)!==0?e===Yn:!1}function L_(){var e=q.H;return q.H=bl,e===null?bl:e}function U_(){var e=q.A;return q.A=ZA,e}function Qc(){Ae=4,qr||(Bt&4194048)!==Bt&&Cn.current!==null||(Ja=!0),(Fr&134217727)===0&&(Ks&134217727)===0||ce===null||Qr(ce,Bt,Mn,!1)}function Jd(e,i,a){var l=$t;$t|=2;var f=L_(),d=U_();(ce!==e||Bt!==i)&&(Hc=null,to(e,i)),i=!1;var _=Ae;t:do try{if(ne!==0&&Ut!==null){var T=Ut,V=Nn;switch(ne){case 8:Zd(),_=6;break t;case 3:case 2:case 9:case 6:Cn.current===null&&(i=!0);var B=ne;if(ne=0,Nn=null,eo(e,T,V,B),a&&Ja){_=0;break t}break;default:B=ne,ne=0,Nn=null,eo(e,T,V,B)}}WA(),_=Ae;break}catch(Y){z_(e,Y)}while(!0);return i&&e.shellSuspendCounter++,Wi=Ls=null,$t=l,q.H=f,q.A=d,Ut===null&&(ce=null,Bt=0,fc()),_}function WA(){for(;Ut!==null;)j_(Ut)}function tb(e,i){var a=$t;$t|=2;var l=L_(),f=U_();ce!==e||Bt!==i?(Hc=null,Fc=De()+500,to(e,i)):Ja=ri(e,i);t:do try{if(ne!==0&&Ut!==null){i=Ut;var d=Nn;e:switch(ne){case 1:ne=0,Nn=null,eo(e,i,d,1);break;case 2:case 9:if(Zp(d)){ne=0,Nn=null,B_(i);break}i=function(){ne!==2&&ne!==9||ce!==e||(ne=7),zi(e)},d.then(i,i);break t;case 3:ne=7;break t;case 4:ne=5;break t;case 7:Zp(d)?(ne=0,Nn=null,B_(i)):(ne=0,Nn=null,eo(e,i,d,7));break;case 5:var _=null;switch(Ut.tag){case 26:_=Ut.memoizedState;case 5:case 27:var T=Ut;if(_?Iv(_):T.stateNode.complete){ne=0,Nn=null;var V=T.sibling;if(V!==null)Ut=V;else{var B=T.return;B!==null?(Ut=B,Kc(B)):Ut=null}break e}}ne=0,Nn=null,eo(e,i,d,5);break;case 6:ne=0,Nn=null,eo(e,i,d,6);break;case 8:Zd(),Ae=6;break t;default:throw Error(r(462))}}eb();break}catch(Y){z_(e,Y)}while(!0);return Wi=Ls=null,q.H=l,q.A=f,$t=a,Ut!==null?0:(ce=null,Bt=0,fc(),Ae)}function eb(){for(;Ut!==null&&!pn();)j_(Ut)}function j_(e){var i=c_(e.alternate,e,ur);e.memoizedProps=e.pendingProps,i===null?Kc(e):Ut=i}function B_(e){var i=e,a=i.alternate;switch(i.tag){case 15:case 0:i=r_(a,i,i.pendingProps,i.type,void 0,Bt);break;case 11:i=r_(a,i,i.pendingProps,i.type.render,i.ref,Bt);break;case 5:fd(i);default:f_(a,i),i=Ut=Up(i,ur),i=c_(a,i,ur)}e.memoizedProps=e.pendingProps,i===null?Kc(e):Ut=i}function eo(e,i,a,l){Wi=Ls=null,fd(i),Ha=null,gl=0;var f=i.return;try{if(FA(e,f,i,a,Bt)){Ae=1,Oc(e,Hn(a,e.current)),Ut=null;return}}catch(d){if(f!==null)throw Ut=f,d;Ae=1,Oc(e,Hn(a,e.current)),Ut=null;return}i.flags&32768?(Ht||l===1?e=!0:Ja||(Bt&536870912)!==0?e=!1:(qr=e=!0,(l===2||l===9||l===3||l===6)&&(l=Cn.current,l!==null&&l.tag===13&&(l.flags|=16384))),q_(i,e)):Kc(i)}function Kc(e){var i=e;do{if((i.flags&32768)!==0){q_(i,qr);return}e=i.return;var a=QA(i.alternate,i,ur);if(a!==null){Ut=a;return}if(i=i.sibling,i!==null){Ut=i;return}Ut=i=e}while(i!==null);Ae===0&&(Ae=5)}function q_(e,i){do{var a=KA(e.alternate,e);if(a!==null){a.flags&=32767,Ut=a;return}if(a=e.return,a!==null&&(a.flags|=32768,a.subtreeFlags=0,a.deletions=null),!i&&(e=e.sibling,e!==null)){Ut=e;return}Ut=e=a}while(e!==null);Ae=6,Ut=null}function F_(e,i,a,l,f,d,_,T,V){e.cancelPendingCommit=null;do Yc();while(qe!==0);if(($t&6)!==0)throw Error(r(327));if(i!==null){if(i===e.current)throw Error(r(177));if(d=i.lanes|i.childLanes,d|=Uf,Cf(e,a,d,_,T,V),e===ce&&(Ut=ce=null,Bt=0),Wa=i,Gr=e,cr=a,Kd=d,Yd=f,N_=l,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(e.callbackNode=null,e.callbackPriority=0,sb(Ar,function(){return Y_(),null})):(e.callbackNode=null,e.callbackPriority=0),l=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||l){l=q.T,q.T=null,f=tt.p,tt.p=2,_=$t,$t|=4;try{YA(e,i,a)}finally{$t=_,tt.p=f,q.T=l}}qe=1,H_(),G_(),Q_()}}function H_(){if(qe===1){qe=0;var e=Gr,i=Wa,a=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||a){a=q.T,q.T=null;var l=tt.p;tt.p=2;var f=$t;$t|=4;try{S_(i,e);var d=um,_=Cp(e.containerInfo),T=d.focusedElem,V=d.selectionRange;if(_!==T&&T&&T.ownerDocument&&Dp(T.ownerDocument.documentElement,T)){if(V!==null&&Of(T)){var B=V.start,Y=V.end;if(Y===void 0&&(Y=B),"selectionStart"in T)T.selectionStart=B,T.selectionEnd=Math.min(Y,T.value.length);else{var $=T.ownerDocument||document,F=$&&$.defaultView||window;if(F.getSelection){var G=F.getSelection(),ht=T.textContent.length,Tt=Math.min(V.start,ht),ue=V.end===void 0?Tt:Math.min(V.end,ht);!G.extend&&Tt>ue&&(_=ue,ue=Tt,Tt=_);var z=xp(T,Tt),M=xp(T,ue);if(z&&M&&(G.rangeCount!==1||G.anchorNode!==z.node||G.anchorOffset!==z.offset||G.focusNode!==M.node||G.focusOffset!==M.offset)){var j=$.createRange();j.setStart(z.node,z.offset),G.removeAllRanges(),Tt>ue?(G.addRange(j),G.extend(M.node,M.offset)):(j.setEnd(M.node,M.offset),G.addRange(j))}}}}for($=[],G=T;G=G.parentNode;)G.nodeType===1&&$.push({element:G,left:G.scrollLeft,top:G.scrollTop});for(typeof T.focus=="function"&&T.focus(),T=0;T<$.length;T++){var Z=$[T];Z.element.scrollLeft=Z.left,Z.element.scrollTop=Z.top}}ah=!!lm,um=lm=null}finally{$t=f,tt.p=l,q.T=a}}e.current=i,qe=2}}function G_(){if(qe===2){qe=0;var e=Gr,i=Wa,a=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||a){a=q.T,q.T=null;var l=tt.p;tt.p=2;var f=$t;$t|=4;try{v_(e,i.alternate,i)}finally{$t=f,tt.p=l,q.T=a}}qe=3}}function Q_(){if(qe===4||qe===3){qe=0,te();var e=Gr,i=Wa,a=cr,l=N_;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?qe=5:(qe=0,Wa=Gr=null,K_(e,e.pendingLanes));var f=e.pendingLanes;if(f===0&&(Hr=null),Ki(a),i=i.stateNode,Ze&&typeof Ze.onCommitFiberRoot=="function")try{Ze.onCommitFiberRoot(ii,i,void 0,(i.current.flags&128)===128)}catch{}if(l!==null){i=q.T,f=tt.p,tt.p=2,q.T=null;try{for(var d=e.onRecoverableError,_=0;_<l.length;_++){var T=l[_];d(T.value,{componentStack:T.stack})}}finally{q.T=i,tt.p=f}}(cr&3)!==0&&Yc(),zi(e),f=e.pendingLanes,(a&261930)!==0&&(f&42)!==0?e===Xd?Nl++:(Nl=0,Xd=e):Nl=0,Ml(0)}}function K_(e,i){(e.pooledCacheLanes&=i)===0&&(i=e.pooledCache,i!=null&&(e.pooledCache=null,dl(i)))}function Yc(){return H_(),G_(),Q_(),Y_()}function Y_(){if(qe!==5)return!1;var e=Gr,i=Kd;Kd=0;var a=Ki(cr),l=q.T,f=tt.p;try{tt.p=32>a?32:a,q.T=null,a=Yd,Yd=null;var d=Gr,_=cr;if(qe=0,Wa=Gr=null,cr=0,($t&6)!==0)throw Error(r(331));var T=$t;if($t|=4,D_(d.current),I_(d,d.current,_,a),$t=T,Ml(0,!1),Ze&&typeof Ze.onPostCommitFiberRoot=="function")try{Ze.onPostCommitFiberRoot(ii,d)}catch{}return!0}finally{tt.p=f,q.T=l,K_(e,i)}}function X_(e,i,a){i=Hn(a,i),i=Rd(e.stateNode,i,2),e=Lr(e,i,2),e!==null&&(Ts(e,2),zi(e))}function ie(e,i,a){if(e.tag===3)X_(e,e,a);else for(;i!==null;){if(i.tag===3){X_(i,e,a);break}else if(i.tag===1){var l=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof l.componentDidCatch=="function"&&(Hr===null||!Hr.has(l))){e=Hn(a,e),a=Zy(2),l=Lr(i,a,2),l!==null&&(Jy(a,l,i,e),Ts(l,2),zi(l));break}}i=i.return}}function $d(e,i,a){var l=e.pingCache;if(l===null){l=e.pingCache=new JA;var f=new Set;l.set(i,f)}else f=l.get(i),f===void 0&&(f=new Set,l.set(i,f));f.has(a)||(Hd=!0,f.add(a),e=nb.bind(null,e,i,a),i.then(e,e))}function nb(e,i,a){var l=e.pingCache;l!==null&&l.delete(i),e.pingedLanes|=e.suspendedLanes&a,e.warmLanes&=~a,ce===e&&(Bt&a)===a&&(Ae===4||Ae===3&&(Bt&62914560)===Bt&&300>De()-qc?($t&2)===0&&to(e,0):Gd|=a,$a===Bt&&($a=0)),zi(e)}function Z_(e,i){i===0&&(i=Hu()),e=Ps(e,i),e!==null&&(Ts(e,i),zi(e))}function ib(e){var i=e.memoizedState,a=0;i!==null&&(a=i.retryLane),Z_(e,a)}function rb(e,i){var a=0;switch(e.tag){case 31:case 13:var l=e.stateNode,f=e.memoizedState;f!==null&&(a=f.retryLane);break;case 19:l=e.stateNode;break;case 22:l=e.stateNode._retryCache;break;default:throw Error(r(314))}l!==null&&l.delete(i),Z_(e,a)}function sb(e,i){return dt(e,i)}var Xc=null,no=null,Wd=!1,Zc=!1,tm=!1,Kr=0;function zi(e){e!==no&&e.next===null&&(no===null?Xc=no=e:no=no.next=e),Zc=!0,Wd||(Wd=!0,ob())}function Ml(e,i){if(!tm&&Zc){tm=!0;do for(var a=!1,l=Xc;l!==null;){if(e!==0){var f=l.pendingLanes;if(f===0)var d=0;else{var _=l.suspendedLanes,T=l.pingedLanes;d=(1<<31-Se(42|e)+1)-1,d&=f&~(_&~T),d=d&201326741?d&201326741|1:d?d|2:0}d!==0&&(a=!0,tv(l,d))}else d=Bt,d=_i(l,l===ce?d:0,l.cancelPendingCommit!==null||l.timeoutHandle!==-1),(d&3)===0||ri(l,d)||(a=!0,tv(l,d));l=l.next}while(a);tm=!1}}function ab(){J_()}function J_(){Zc=Wd=!1;var e=0;Kr!==0&&yb()&&(e=Kr);for(var i=De(),a=null,l=Xc;l!==null;){var f=l.next,d=$_(l,i);d===0?(l.next=null,a===null?Xc=f:a.next=f,f===null&&(no=a)):(a=l,(e!==0||(d&3)!==0)&&(Zc=!0)),l=f}qe!==0&&qe!==5||Ml(e),Kr!==0&&(Kr=0)}function $_(e,i){for(var a=e.suspendedLanes,l=e.pingedLanes,f=e.expirationTimes,d=e.pendingLanes&-62914561;0<d;){var _=31-Se(d),T=1<<_,V=f[_];V===-1?((T&a)===0||(T&l)!==0)&&(f[_]=Df(T,i)):V<=i&&(e.expiredLanes|=T),d&=~T}if(i=ce,a=Bt,a=_i(e,e===i?a:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l=e.callbackNode,a===0||e===i&&(ne===2||ne===9)||e.cancelPendingCommit!==null)return l!==null&&l!==null&&Nt(l),e.callbackNode=null,e.callbackPriority=0;if((a&3)===0||ri(e,a)){if(i=a&-a,i===e.callbackPriority)return i;switch(l!==null&&Nt(l),Ki(a)){case 2:case 8:a=Fo;break;case 32:a=Ar;break;case 268435456:a=Uu;break;default:a=Ar}return l=W_.bind(null,e),a=dt(a,l),e.callbackPriority=i,e.callbackNode=a,i}return l!==null&&l!==null&&Nt(l),e.callbackPriority=2,e.callbackNode=null,2}function W_(e,i){if(qe!==0&&qe!==5)return e.callbackNode=null,e.callbackPriority=0,null;var a=e.callbackNode;if(Yc()&&e.callbackNode!==a)return null;var l=Bt;return l=_i(e,e===ce?l:0,e.cancelPendingCommit!==null||e.timeoutHandle!==-1),l===0?null:(O_(e,l,i),$_(e,De()),e.callbackNode!=null&&e.callbackNode===a?W_.bind(null,e):null)}function tv(e,i){if(Yc())return null;O_(e,i,!0)}function ob(){vb(function(){($t&6)!==0?dt(qo,ab):J_()})}function em(){if(Kr===0){var e=Ba;e===0&&(e=pi,pi<<=1,(pi&261888)===0&&(pi=256)),Kr=e}return Kr}function ev(e){return e==null||typeof e=="symbol"||typeof e=="boolean"?null:typeof e=="function"?e:Ia(""+e)}function nv(e,i){var a=i.ownerDocument.createElement("input");return a.name=i.name,a.value=i.value,e.id&&a.setAttribute("form",e.id),i.parentNode.insertBefore(a,i),e=new FormData(e),a.parentNode.removeChild(a),e}function lb(e,i,a,l,f){if(i==="submit"&&a&&a.stateNode===f){var d=ev((f[He]||null).action),_=l.submitter;_&&(i=(i=_[He]||null)?ev(i.formAction):_.getAttribute("formAction"),i!==null&&(d=i,_=null));var T=new Di("action","action",null,l,f);e.push({event:T,listeners:[{instance:null,listener:function(){if(l.defaultPrevented){if(Kr!==0){var V=_?nv(f,_):new FormData(f);Td(a,{pending:!0,data:V,method:f.method,action:d},null,V)}}else typeof d=="function"&&(T.preventDefault(),V=_?nv(f,_):new FormData(f),Td(a,{pending:!0,data:V,method:f.method,action:d},d,V))},currentTarget:f}]})}}for(var nm=0;nm<Lf.length;nm++){var im=Lf[nm],ub=im.toLowerCase(),cb=im[0].toUpperCase()+im.slice(1);fi(ub,"on"+cb)}fi(Mp,"onAnimationEnd"),fi(Op,"onAnimationIteration"),fi(Pp,"onAnimationStart"),fi("dblclick","onDoubleClick"),fi("focusin","onFocus"),fi("focusout","onBlur"),fi(IA,"onTransitionRun"),fi(RA,"onTransitionStart"),fi(xA,"onTransitionCancel"),fi(zp,"onTransitionEnd"),wi("onMouseEnter",["mouseout","mouseover"]),wi("onMouseLeave",["mouseout","mouseover"]),wi("onPointerEnter",["pointerout","pointerover"]),wi("onPointerLeave",["pointerout","pointerover"]),Si("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Si("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Si("onBeforeInput",["compositionend","keypress","textInput","paste"]),Si("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Si("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ol="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),hb=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Ol));function iv(e,i){i=(i&4)!==0;for(var a=0;a<e.length;a++){var l=e[a],f=l.event;l=l.listeners;t:{var d=void 0;if(i)for(var _=l.length-1;0<=_;_--){var T=l[_],V=T.instance,B=T.currentTarget;if(T=T.listener,V!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=B;try{d(f)}catch(Y){hc(Y)}f.currentTarget=null,d=V}else for(_=0;_<l.length;_++){if(T=l[_],V=T.instance,B=T.currentTarget,T=T.listener,V!==d&&f.isPropagationStopped())break t;d=T,f.currentTarget=B;try{d(f)}catch(Y){hc(Y)}f.currentTarget=null,d=V}}}}function jt(e,i){var a=i[Ta];a===void 0&&(a=i[Ta]=new Set);var l=e+"__bubble";a.has(l)||(rv(i,e,2,!1),a.add(l))}function rm(e,i,a){var l=0;i&&(l|=4),rv(a,e,l,i)}var Jc="_reactListening"+Math.random().toString(36).slice(2);function sm(e){if(!e[Jc]){e[Jc]=!0,Qo.forEach(function(a){a!=="selectionchange"&&(hb.has(a)||rm(a,!1,e),rm(a,!0,e))});var i=e.nodeType===9?e:e.ownerDocument;i===null||i[Jc]||(i[Jc]=!0,rm("selectionchange",!1,i))}}function rv(e,i,a,l){switch(Mv(i)){case 2:var f=Ub;break;case 8:f=jb;break;default:f=Em}a=f.bind(null,i,a,e),f=void 0,!Rs||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(f=!0),l?f!==void 0?e.addEventListener(i,a,{capture:!0,passive:f}):e.addEventListener(i,a,!0):f!==void 0?e.addEventListener(i,a,{passive:f}):e.addEventListener(i,a,!1)}function am(e,i,a,l,f){var d=l;if((i&1)===0&&(i&2)===0&&l!==null)t:for(;;){if(l===null)return;var _=l.tag;if(_===3||_===4){var T=l.stateNode.containerInfo;if(T===f)break;if(_===4)for(_=l.return;_!==null;){var V=_.tag;if((V===3||V===4)&&_.stateNode.containerInfo===f)return;_=_.return}for(;T!==null;){if(_=Ai(T),_===null)return;if(V=_.tag,V===5||V===6||V===26||V===27){l=d=_;continue t}T=T.parentNode}}l=l.return}xr(function(){var B=d,Y=jn(a),$=[];t:{var F=kp.get(e);if(F!==void 0){var G=Di,ht=e;switch(e){case"keypress":if(Ds(a)===0)break t;case"keydown":case"keyup":G=lc;break;case"focusin":ht="focus",G=Vs;break;case"focusout":ht="blur",G=Vs;break;case"beforeblur":case"afterblur":G=Vs;break;case"click":if(a.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":G=sl;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":G=Wu;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":G=p;break;case Mp:case Op:case Pp:G=ec;break;case zp:G=b;break;case"scroll":case"scrollend":G=rl;break;case"wheel":G=H;break;case"copy":case"cut":case"paste":G=nc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":G=Zi;break;case"toggle":case"beforetoggle":G=Ct}var Tt=(i&4)!==0,ue=!Tt&&(e==="scroll"||e==="scrollend"),z=Tt?F!==null?F+"Capture":null:F;Tt=[];for(var M=B,j;M!==null;){var Z=M;if(j=Z.stateNode,Z=Z.tag,Z!==5&&Z!==26&&Z!==27||j===null||z===null||(Z=li(M,z),Z!=null&&Tt.push(Pl(M,Z,j))),ue)break;M=M.return}0<Tt.length&&(F=new G(F,ht,null,a,Y),$.push({event:F,listeners:Tt}))}}if((i&7)===0){t:{if(F=e==="mouseover"||e==="pointerover",G=e==="mouseout"||e==="pointerout",F&&a!==el&&(ht=a.relatedTarget||a.fromElement)&&(Ai(ht)||ht[Ei]))break t;if((G||F)&&(F=Y.window===Y?Y:(F=Y.ownerDocument)?F.defaultView||F.parentWindow:window,G?(ht=a.relatedTarget||a.toElement,G=B,ht=ht?Ai(ht):null,ht!==null&&(ue=u(ht),Tt=ht.tag,ht!==ue||Tt!==5&&Tt!==27&&Tt!==6)&&(ht=null)):(G=null,ht=B),G!==ht)){if(Tt=sl,Z="onMouseLeave",z="onMouseEnter",M="mouse",(e==="pointerout"||e==="pointerover")&&(Tt=Zi,Z="onPointerLeave",z="onPointerEnter",M="pointer"),ue=G==null?F:In(G),j=ht==null?F:In(ht),F=new Tt(Z,M+"leave",G,a,Y),F.target=ue,F.relatedTarget=j,Z=null,Ai(Y)===B&&(Tt=new Tt(z,M+"enter",ht,a,Y),Tt.target=j,Tt.relatedTarget=ue,Z=Tt),ue=Z,G&&ht)e:{for(Tt=fb,z=G,M=ht,j=0,Z=z;Z;Z=Tt(Z))j++;Z=0;for(var _t=M;_t;_t=Tt(_t))Z++;for(;0<j-Z;)z=Tt(z),j--;for(;0<Z-j;)M=Tt(M),Z--;for(;j--;){if(z===M||M!==null&&z===M.alternate){Tt=z;break e}z=Tt(z),M=Tt(M)}Tt=null}else Tt=null;G!==null&&sv($,F,G,Tt,!1),ht!==null&&ue!==null&&sv($,ue,ht,Tt,!0)}}t:{if(F=B?In(B):window,G=F.nodeName&&F.nodeName.toLowerCase(),G==="select"||G==="input"&&F.type==="file")var Xt=Ap;else if(Ep(F))if(bp)Xt=bA;else{Xt=TA;var mt=EA}else G=F.nodeName,!G||G.toLowerCase()!=="input"||F.type!=="checkbox"&&F.type!=="radio"?B&&wa(B.elementType)&&(Xt=Ap):Xt=AA;if(Xt&&(Xt=Xt(e,B))){Tp($,Xt,a,Y);break t}mt&&mt(e,F,B),e==="focusout"&&B&&F.type==="number"&&B.memoizedProps.value!=null&&$o(F,"number",F.value)}switch(mt=B?In(B):window,e){case"focusin":(Ep(mt)||mt.contentEditable==="true")&&(Ma=mt,Pf=B,cl=null);break;case"focusout":cl=Pf=Ma=null;break;case"mousedown":zf=!0;break;case"contextmenu":case"mouseup":case"dragend":zf=!1,Vp($,a,Y);break;case"selectionchange":if(wA)break;case"keydown":case"keyup":Vp($,a,Y)}var Mt;if(Jt)t:{switch(e){case"compositionstart":var qt="onCompositionStart";break t;case"compositionend":qt="onCompositionEnd";break t;case"compositionupdate":qt="onCompositionUpdate";break t}qt=void 0}else Na?Ns(e,a)&&(qt="onCompositionEnd"):e==="keydown"&&a.keyCode===229&&(qt="onCompositionStart");qt&&(Ni&&a.locale!=="ko"&&(Na||qt!=="onCompositionStart"?qt==="onCompositionEnd"&&Na&&(Mt=il()):(xi=Y,nl="value"in xi?xi.value:xi.textContent,Na=!0)),mt=$c(B,qt),0<mt.length&&(qt=new Vi(qt,e,null,a,Y),$.push({event:qt,listeners:mt}),Mt?qt.data=Mt:(Mt=Va(a),Mt!==null&&(qt.data=Mt)))),(Mt=qn?pA(e,a):yA(e,a))&&(qt=$c(B,"onBeforeInput"),0<qt.length&&(mt=new Vi("onBeforeInput","beforeinput",null,a,Y),$.push({event:mt,listeners:qt}),mt.data=Mt)),lb($,e,B,a,Y)}iv($,i)})}function Pl(e,i,a){return{instance:e,listener:i,currentTarget:a}}function $c(e,i){for(var a=i+"Capture",l=[];e!==null;){var f=e,d=f.stateNode;if(f=f.tag,f!==5&&f!==26&&f!==27||d===null||(f=li(e,a),f!=null&&l.unshift(Pl(e,f,d)),f=li(e,i),f!=null&&l.push(Pl(e,f,d))),e.tag===3)return l;e=e.return}return[]}function fb(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5&&e.tag!==27);return e||null}function sv(e,i,a,l,f){for(var d=i._reactName,_=[];a!==null&&a!==l;){var T=a,V=T.alternate,B=T.stateNode;if(T=T.tag,V!==null&&V===l)break;T!==5&&T!==26&&T!==27||B===null||(V=B,f?(B=li(a,d),B!=null&&_.unshift(Pl(a,B,V))):f||(B=li(a,d),B!=null&&_.push(Pl(a,B,V)))),a=a.return}_.length!==0&&e.push({event:i,listeners:_})}var db=/\r\n?/g,mb=/\u0000|\uFFFD/g;function av(e){return(typeof e=="string"?e:""+e).replace(db,`
`).replace(mb,"")}function ov(e,i){return i=av(i),av(e)===i}function le(e,i,a,l,f,d){switch(a){case"children":typeof l=="string"?i==="body"||i==="textarea"&&l===""||_n(e,l):(typeof l=="number"||typeof l=="bigint")&&i!=="body"&&_n(e,""+l);break;case"className":Rn(e,"class",l);break;case"tabIndex":Rn(e,"tabindex",l);break;case"dir":case"role":case"viewBox":case"width":case"height":Rn(e,a,l);break;case"style":tl(e,l,d);break;case"data":if(i!=="object"){Rn(e,"data",l);break}case"src":case"href":if(l===""&&(i!=="a"||a!=="href")){e.removeAttribute(a);break}if(l==null||typeof l=="function"||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ia(""+l),e.setAttribute(a,l);break;case"action":case"formAction":if(typeof l=="function"){e.setAttribute(a,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof d=="function"&&(a==="formAction"?(i!=="input"&&le(e,i,"name",f.name,f,null),le(e,i,"formEncType",f.formEncType,f,null),le(e,i,"formMethod",f.formMethod,f,null),le(e,i,"formTarget",f.formTarget,f,null)):(le(e,i,"encType",f.encType,f,null),le(e,i,"method",f.method,f,null),le(e,i,"target",f.target,f,null)));if(l==null||typeof l=="symbol"||typeof l=="boolean"){e.removeAttribute(a);break}l=Ia(""+l),e.setAttribute(a,l);break;case"onClick":l!=null&&(e.onclick=oi);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"multiple":e.multiple=l&&typeof l!="function"&&typeof l!="symbol";break;case"muted":e.muted=l&&typeof l!="function"&&typeof l!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(l==null||typeof l=="function"||typeof l=="boolean"||typeof l=="symbol"){e.removeAttribute("xlink:href");break}a=Ia(""+l),e.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",a);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""+l):e.removeAttribute(a);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":l&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,""):e.removeAttribute(a);break;case"capture":case"download":l===!0?e.setAttribute(a,""):l!==!1&&l!=null&&typeof l!="function"&&typeof l!="symbol"?e.setAttribute(a,l):e.removeAttribute(a);break;case"cols":case"rows":case"size":case"span":l!=null&&typeof l!="function"&&typeof l!="symbol"&&!isNaN(l)&&1<=l?e.setAttribute(a,l):e.removeAttribute(a);break;case"rowSpan":case"start":l==null||typeof l=="function"||typeof l=="symbol"||isNaN(l)?e.removeAttribute(a):e.setAttribute(a,l);break;case"popover":jt("beforetoggle",e),jt("toggle",e),ba(e,"popover",l);break;case"xlinkActuate":Me(e,"http://www.w3.org/1999/xlink","xlink:actuate",l);break;case"xlinkArcrole":Me(e,"http://www.w3.org/1999/xlink","xlink:arcrole",l);break;case"xlinkRole":Me(e,"http://www.w3.org/1999/xlink","xlink:role",l);break;case"xlinkShow":Me(e,"http://www.w3.org/1999/xlink","xlink:show",l);break;case"xlinkTitle":Me(e,"http://www.w3.org/1999/xlink","xlink:title",l);break;case"xlinkType":Me(e,"http://www.w3.org/1999/xlink","xlink:type",l);break;case"xmlBase":Me(e,"http://www.w3.org/XML/1998/namespace","xml:base",l);break;case"xmlLang":Me(e,"http://www.w3.org/XML/1998/namespace","xml:lang",l);break;case"xmlSpace":Me(e,"http://www.w3.org/XML/1998/namespace","xml:space",l);break;case"is":ba(e,"is",l);break;case"innerText":case"textContent":break;default:(!(2<a.length)||a[0]!=="o"&&a[0]!=="O"||a[1]!=="n"&&a[1]!=="N")&&(a=$u.get(a)||a,ba(e,a,l))}}function om(e,i,a,l,f,d){switch(a){case"style":tl(e,l,d);break;case"dangerouslySetInnerHTML":if(l!=null){if(typeof l!="object"||!("__html"in l))throw Error(r(61));if(a=l.__html,a!=null){if(f.children!=null)throw Error(r(60));e.innerHTML=a}}break;case"children":typeof l=="string"?_n(e,l):(typeof l=="number"||typeof l=="bigint")&&_n(e,""+l);break;case"onScroll":l!=null&&jt("scroll",e);break;case"onScrollEnd":l!=null&&jt("scrollend",e);break;case"onClick":l!=null&&(e.onclick=oi);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!Ko.hasOwnProperty(a))t:{if(a[0]==="o"&&a[1]==="n"&&(f=a.endsWith("Capture"),i=a.slice(2,f?a.length-7:void 0),d=e[He]||null,d=d!=null?d[a]:null,typeof d=="function"&&e.removeEventListener(i,d,f),typeof l=="function")){typeof d!="function"&&d!==null&&(a in e?e[a]=null:e.hasAttribute(a)&&e.removeAttribute(a)),e.addEventListener(i,l,f);break t}a in e?e[a]=l:l===!0?e.setAttribute(a,""):ba(e,a,l)}}}function en(e,i,a){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",e),jt("load",e);var l=!1,f=!1,d;for(d in a)if(a.hasOwnProperty(d)){var _=a[d];if(_!=null)switch(d){case"src":l=!0;break;case"srcSet":f=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:le(e,i,d,_,a,null)}}f&&le(e,i,"srcSet",a.srcSet,a,null),l&&le(e,i,"src",a.src,a,null);return;case"input":jt("invalid",e);var T=d=_=f=null,V=null,B=null;for(l in a)if(a.hasOwnProperty(l)){var Y=a[l];if(Y!=null)switch(l){case"name":f=Y;break;case"type":_=Y;break;case"checked":V=Y;break;case"defaultChecked":B=Y;break;case"value":d=Y;break;case"defaultValue":T=Y;break;case"children":case"dangerouslySetInnerHTML":if(Y!=null)throw Error(r(137,i));break;default:le(e,i,l,Y,a,null)}}Xu(e,d,T,V,B,_,f,!1);return;case"select":jt("invalid",e),l=_=d=null;for(f in a)if(a.hasOwnProperty(f)&&(T=a[f],T!=null))switch(f){case"value":d=T;break;case"defaultValue":_=T;break;case"multiple":l=T;default:le(e,i,f,T,a,null)}i=d,a=_,e.multiple=!!l,i!=null?Sr(e,!!l,i,!1):a!=null&&Sr(e,!!l,a,!0);return;case"textarea":jt("invalid",e),d=f=l=null;for(_ in a)if(a.hasOwnProperty(_)&&(T=a[_],T!=null))switch(_){case"value":l=T;break;case"defaultValue":f=T;break;case"children":d=T;break;case"dangerouslySetInnerHTML":if(T!=null)throw Error(r(91));break;default:le(e,i,_,T,a,null)}wr(e,l,f,d);return;case"option":for(V in a)if(a.hasOwnProperty(V)&&(l=a[V],l!=null))switch(V){case"selected":e.selected=l&&typeof l!="function"&&typeof l!="symbol";break;default:le(e,i,V,l,a,null)}return;case"dialog":jt("beforetoggle",e),jt("toggle",e),jt("cancel",e),jt("close",e);break;case"iframe":case"object":jt("load",e);break;case"video":case"audio":for(l=0;l<Ol.length;l++)jt(Ol[l],e);break;case"image":jt("error",e),jt("load",e);break;case"details":jt("toggle",e);break;case"embed":case"source":case"link":jt("error",e),jt("load",e);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(B in a)if(a.hasOwnProperty(B)&&(l=a[B],l!=null))switch(B){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:le(e,i,B,l,a,null)}return;default:if(wa(i)){for(Y in a)a.hasOwnProperty(Y)&&(l=a[Y],l!==void 0&&om(e,i,Y,l,a,void 0));return}}for(T in a)a.hasOwnProperty(T)&&(l=a[T],l!=null&&le(e,i,T,l,a,null))}function gb(e,i,a,l){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var f=null,d=null,_=null,T=null,V=null,B=null,Y=null;for(G in a){var $=a[G];if(a.hasOwnProperty(G)&&$!=null)switch(G){case"checked":break;case"value":break;case"defaultValue":V=$;default:l.hasOwnProperty(G)||le(e,i,G,null,l,$)}}for(var F in l){var G=l[F];if($=a[F],l.hasOwnProperty(F)&&(G!=null||$!=null))switch(F){case"type":d=G;break;case"name":f=G;break;case"checked":B=G;break;case"defaultChecked":Y=G;break;case"value":_=G;break;case"defaultValue":T=G;break;case"children":case"dangerouslySetInnerHTML":if(G!=null)throw Error(r(137,i));break;default:G!==$&&le(e,i,F,G,l,$)}}Sa(e,_,T,V,B,Y,d,f);return;case"select":G=_=T=F=null;for(d in a)if(V=a[d],a.hasOwnProperty(d)&&V!=null)switch(d){case"value":break;case"multiple":G=V;default:l.hasOwnProperty(d)||le(e,i,d,null,l,V)}for(f in l)if(d=l[f],V=a[f],l.hasOwnProperty(f)&&(d!=null||V!=null))switch(f){case"value":F=d;break;case"defaultValue":T=d;break;case"multiple":_=d;default:d!==V&&le(e,i,f,d,l,V)}i=T,a=_,l=G,F!=null?Sr(e,!!a,F,!1):!!l!=!!a&&(i!=null?Sr(e,!!a,i,!0):Sr(e,!!a,a?[]:"",!1));return;case"textarea":G=F=null;for(T in a)if(f=a[T],a.hasOwnProperty(T)&&f!=null&&!l.hasOwnProperty(T))switch(T){case"value":break;case"children":break;default:le(e,i,T,null,l,f)}for(_ in l)if(f=l[_],d=a[_],l.hasOwnProperty(_)&&(f!=null||d!=null))switch(_){case"value":F=f;break;case"defaultValue":G=f;break;case"children":break;case"dangerouslySetInnerHTML":if(f!=null)throw Error(r(91));break;default:f!==d&&le(e,i,_,f,l,d)}Zu(e,F,G);return;case"option":for(var ht in a)if(F=a[ht],a.hasOwnProperty(ht)&&F!=null&&!l.hasOwnProperty(ht))switch(ht){case"selected":e.selected=!1;break;default:le(e,i,ht,null,l,F)}for(V in l)if(F=l[V],G=a[V],l.hasOwnProperty(V)&&F!==G&&(F!=null||G!=null))switch(V){case"selected":e.selected=F&&typeof F!="function"&&typeof F!="symbol";break;default:le(e,i,V,F,l,G)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Tt in a)F=a[Tt],a.hasOwnProperty(Tt)&&F!=null&&!l.hasOwnProperty(Tt)&&le(e,i,Tt,null,l,F);for(B in l)if(F=l[B],G=a[B],l.hasOwnProperty(B)&&F!==G&&(F!=null||G!=null))switch(B){case"children":case"dangerouslySetInnerHTML":if(F!=null)throw Error(r(137,i));break;default:le(e,i,B,F,l,G)}return;default:if(wa(i)){for(var ue in a)F=a[ue],a.hasOwnProperty(ue)&&F!==void 0&&!l.hasOwnProperty(ue)&&om(e,i,ue,void 0,l,F);for(Y in l)F=l[Y],G=a[Y],!l.hasOwnProperty(Y)||F===G||F===void 0&&G===void 0||om(e,i,Y,F,l,G);return}}for(var z in a)F=a[z],a.hasOwnProperty(z)&&F!=null&&!l.hasOwnProperty(z)&&le(e,i,z,null,l,F);for($ in l)F=l[$],G=a[$],!l.hasOwnProperty($)||F===G||F==null&&G==null||le(e,i,$,F,l,G)}function lv(e){switch(e){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function pb(){if(typeof performance.getEntriesByType=="function"){for(var e=0,i=0,a=performance.getEntriesByType("resource"),l=0;l<a.length;l++){var f=a[l],d=f.transferSize,_=f.initiatorType,T=f.duration;if(d&&T&&lv(_)){for(_=0,T=f.responseEnd,l+=1;l<a.length;l++){var V=a[l],B=V.startTime;if(B>T)break;var Y=V.transferSize,$=V.initiatorType;Y&&lv($)&&(V=V.responseEnd,_+=Y*(V<T?1:(T-B)/(V-B)))}if(--l,i+=8*(d+_)/(f.duration/1e3),e++,10<e)break}}if(0<e)return i/e/1e6}return navigator.connection&&(e=navigator.connection.downlink,typeof e=="number")?e:5}var lm=null,um=null;function Wc(e){return e.nodeType===9?e:e.ownerDocument}function uv(e){switch(e){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function cv(e,i){if(e===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return e===1&&i==="foreignObject"?0:e}function cm(e,i){return e==="textarea"||e==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var hm=null;function yb(){var e=window.event;return e&&e.type==="popstate"?e===hm?!1:(hm=e,!0):(hm=null,!1)}var hv=typeof setTimeout=="function"?setTimeout:void 0,_b=typeof clearTimeout=="function"?clearTimeout:void 0,fv=typeof Promise=="function"?Promise:void 0,vb=typeof queueMicrotask=="function"?queueMicrotask:typeof fv<"u"?function(e){return fv.resolve(null).then(e).catch(Eb)}:hv;function Eb(e){setTimeout(function(){throw e})}function Yr(e){return e==="head"}function dv(e,i){var a=i,l=0;do{var f=a.nextSibling;if(e.removeChild(a),f&&f.nodeType===8)if(a=f.data,a==="/$"||a==="/&"){if(l===0){e.removeChild(f),ao(i);return}l--}else if(a==="$"||a==="$?"||a==="$~"||a==="$!"||a==="&")l++;else if(a==="html")zl(e.ownerDocument.documentElement);else if(a==="head"){a=e.ownerDocument.head,zl(a);for(var d=a.firstChild;d;){var _=d.nextSibling,T=d.nodeName;d[Ti]||T==="SCRIPT"||T==="STYLE"||T==="LINK"&&d.rel.toLowerCase()==="stylesheet"||a.removeChild(d),d=_}}else a==="body"&&zl(e.ownerDocument.body);a=f}while(a);ao(i)}function mv(e,i){var a=e;e=0;do{var l=a.nextSibling;if(a.nodeType===1?i?(a._stashedDisplay=a.style.display,a.style.display="none"):(a.style.display=a._stashedDisplay||"",a.getAttribute("style")===""&&a.removeAttribute("style")):a.nodeType===3&&(i?(a._stashedText=a.nodeValue,a.nodeValue=""):a.nodeValue=a._stashedText||""),l&&l.nodeType===8)if(a=l.data,a==="/$"){if(e===0)break;e--}else a!=="$"&&a!=="$?"&&a!=="$~"&&a!=="$!"||e++;a=l}while(a)}function fm(e){var i=e.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var a=i;switch(i=i.nextSibling,a.nodeName){case"HTML":case"HEAD":case"BODY":fm(a),Aa(a);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(a.rel.toLowerCase()==="stylesheet")continue}e.removeChild(a)}}function Tb(e,i,a,l){for(;e.nodeType===1;){var f=a;if(e.nodeName.toLowerCase()!==i.toLowerCase()){if(!l&&(e.nodeName!=="INPUT"||e.type!=="hidden"))break}else if(l){if(!e[Ti])switch(i){case"meta":if(!e.hasAttribute("itemprop"))break;return e;case"link":if(d=e.getAttribute("rel"),d==="stylesheet"&&e.hasAttribute("data-precedence"))break;if(d!==f.rel||e.getAttribute("href")!==(f.href==null||f.href===""?null:f.href)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin)||e.getAttribute("title")!==(f.title==null?null:f.title))break;return e;case"style":if(e.hasAttribute("data-precedence"))break;return e;case"script":if(d=e.getAttribute("src"),(d!==(f.src==null?null:f.src)||e.getAttribute("type")!==(f.type==null?null:f.type)||e.getAttribute("crossorigin")!==(f.crossOrigin==null?null:f.crossOrigin))&&d&&e.hasAttribute("async")&&!e.hasAttribute("itemprop"))break;return e;default:return e}}else if(i==="input"&&e.type==="hidden"){var d=f.name==null?null:""+f.name;if(f.type==="hidden"&&e.getAttribute("name")===d)return e}else return e;if(e=Xn(e.nextSibling),e===null)break}return null}function Ab(e,i,a){if(i==="")return null;for(;e.nodeType!==3;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!a||(e=Xn(e.nextSibling),e===null))return null;return e}function gv(e,i){for(;e.nodeType!==8;)if((e.nodeType!==1||e.nodeName!=="INPUT"||e.type!=="hidden")&&!i||(e=Xn(e.nextSibling),e===null))return null;return e}function dm(e){return e.data==="$?"||e.data==="$~"}function mm(e){return e.data==="$!"||e.data==="$?"&&e.ownerDocument.readyState!=="loading"}function bb(e,i){var a=e.ownerDocument;if(e.data==="$~")e._reactRetry=i;else if(e.data!=="$?"||a.readyState!=="loading")i();else{var l=function(){i(),a.removeEventListener("DOMContentLoaded",l)};a.addEventListener("DOMContentLoaded",l),e._reactRetry=l}}function Xn(e){for(;e!=null;e=e.nextSibling){var i=e.nodeType;if(i===1||i===3)break;if(i===8){if(i=e.data,i==="$"||i==="$!"||i==="$?"||i==="$~"||i==="&"||i==="F!"||i==="F")break;if(i==="/$"||i==="/&")return null}}return e}var gm=null;function pv(e){e=e.nextSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="/$"||a==="/&"){if(i===0)return Xn(e.nextSibling);i--}else a!=="$"&&a!=="$!"&&a!=="$?"&&a!=="$~"&&a!=="&"||i++}e=e.nextSibling}return null}function yv(e){e=e.previousSibling;for(var i=0;e;){if(e.nodeType===8){var a=e.data;if(a==="$"||a==="$!"||a==="$?"||a==="$~"||a==="&"){if(i===0)return e;i--}else a!=="/$"&&a!=="/&"||i++}e=e.previousSibling}return null}function _v(e,i,a){switch(i=Wc(a),e){case"html":if(e=i.documentElement,!e)throw Error(r(452));return e;case"head":if(e=i.head,!e)throw Error(r(453));return e;case"body":if(e=i.body,!e)throw Error(r(454));return e;default:throw Error(r(451))}}function zl(e){for(var i=e.attributes;i.length;)e.removeAttributeNode(i[0]);Aa(e)}var Zn=new Map,vv=new Set;function th(e){return typeof e.getRootNode=="function"?e.getRootNode():e.nodeType===9?e:e.ownerDocument}var hr=tt.d;tt.d={f:Sb,r:wb,D:Ib,C:Rb,L:xb,m:Db,X:Vb,S:Cb,M:Nb};function Sb(){var e=hr.f(),i=Gc();return e||i}function wb(e){var i=Un(e);i!==null&&i.tag===5&&i.type==="form"?zy(i):hr.r(e)}var io=typeof document>"u"?null:document;function Ev(e,i,a){var l=io;if(l&&typeof i=="string"&&i){var f=yn(i);f='link[rel="'+e+'"][href="'+f+'"]',typeof a=="string"&&(f+='[crossorigin="'+a+'"]'),vv.has(f)||(vv.add(f),e={rel:e,crossOrigin:a,href:i},l.querySelector(f)===null&&(i=l.createElement("link"),en(i,"link",e),Ne(i),l.head.appendChild(i)))}}function Ib(e){hr.D(e),Ev("dns-prefetch",e,null)}function Rb(e,i){hr.C(e,i),Ev("preconnect",e,i)}function xb(e,i,a){hr.L(e,i,a);var l=io;if(l&&e&&i){var f='link[rel="preload"][as="'+yn(i)+'"]';i==="image"&&a&&a.imageSrcSet?(f+='[imagesrcset="'+yn(a.imageSrcSet)+'"]',typeof a.imageSizes=="string"&&(f+='[imagesizes="'+yn(a.imageSizes)+'"]')):f+='[href="'+yn(e)+'"]';var d=f;switch(i){case"style":d=ro(e);break;case"script":d=so(e)}Zn.has(d)||(e=A({rel:"preload",href:i==="image"&&a&&a.imageSrcSet?void 0:e,as:i},a),Zn.set(d,e),l.querySelector(f)!==null||i==="style"&&l.querySelector(kl(d))||i==="script"&&l.querySelector(Ll(d))||(i=l.createElement("link"),en(i,"link",e),Ne(i),l.head.appendChild(i)))}}function Db(e,i){hr.m(e,i);var a=io;if(a&&e){var l=i&&typeof i.as=="string"?i.as:"script",f='link[rel="modulepreload"][as="'+yn(l)+'"][href="'+yn(e)+'"]',d=f;switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":d=so(e)}if(!Zn.has(d)&&(e=A({rel:"modulepreload",href:e},i),Zn.set(d,e),a.querySelector(f)===null)){switch(l){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(a.querySelector(Ll(d)))return}l=a.createElement("link"),en(l,"link",e),Ne(l),a.head.appendChild(l)}}}function Cb(e,i,a){hr.S(e,i,a);var l=io;if(l&&e){var f=bi(l).hoistableStyles,d=ro(e);i=i||"default";var _=f.get(d);if(!_){var T={loading:0,preload:null};if(_=l.querySelector(kl(d)))T.loading=5;else{e=A({rel:"stylesheet",href:e,"data-precedence":i},a),(a=Zn.get(d))&&pm(e,a);var V=_=l.createElement("link");Ne(V),en(V,"link",e),V._p=new Promise(function(B,Y){V.onload=B,V.onerror=Y}),V.addEventListener("load",function(){T.loading|=1}),V.addEventListener("error",function(){T.loading|=2}),T.loading|=4,eh(_,i,l)}_={type:"stylesheet",instance:_,count:1,state:T},f.set(d,_)}}}function Vb(e,i){hr.X(e,i);var a=io;if(a&&e){var l=bi(a).hoistableScripts,f=so(e),d=l.get(f);d||(d=a.querySelector(Ll(f)),d||(e=A({src:e,async:!0},i),(i=Zn.get(f))&&ym(e,i),d=a.createElement("script"),Ne(d),en(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Nb(e,i){hr.M(e,i);var a=io;if(a&&e){var l=bi(a).hoistableScripts,f=so(e),d=l.get(f);d||(d=a.querySelector(Ll(f)),d||(e=A({src:e,async:!0,type:"module"},i),(i=Zn.get(f))&&ym(e,i),d=a.createElement("script"),Ne(d),en(d,"link",e),a.head.appendChild(d)),d={type:"script",instance:d,count:1,state:null},l.set(f,d))}}function Tv(e,i,a,l){var f=(f=xt.current)?th(f):null;if(!f)throw Error(r(446));switch(e){case"meta":case"title":return null;case"style":return typeof a.precedence=="string"&&typeof a.href=="string"?(i=ro(a.href),a=bi(f).hoistableStyles,l=a.get(i),l||(l={type:"style",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};case"link":if(a.rel==="stylesheet"&&typeof a.href=="string"&&typeof a.precedence=="string"){e=ro(a.href);var d=bi(f).hoistableStyles,_=d.get(e);if(_||(f=f.ownerDocument||f,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},d.set(e,_),(d=f.querySelector(kl(e)))&&!d._p&&(_.instance=d,_.state.loading=5),Zn.has(e)||(a={rel:"preload",as:"style",href:a.href,crossOrigin:a.crossOrigin,integrity:a.integrity,media:a.media,hrefLang:a.hrefLang,referrerPolicy:a.referrerPolicy},Zn.set(e,a),d||Mb(f,e,a,_.state))),i&&l===null)throw Error(r(528,""));return _}if(i&&l!==null)throw Error(r(529,""));return null;case"script":return i=a.async,a=a.src,typeof a=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=so(a),a=bi(f).hoistableScripts,l=a.get(i),l||(l={type:"script",instance:null,count:0,state:null},a.set(i,l)),l):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,e))}}function ro(e){return'href="'+yn(e)+'"'}function kl(e){return'link[rel="stylesheet"]['+e+"]"}function Av(e){return A({},e,{"data-precedence":e.precedence,precedence:null})}function Mb(e,i,a,l){e.querySelector('link[rel="preload"][as="style"]['+i+"]")?l.loading=1:(i=e.createElement("link"),l.preload=i,i.addEventListener("load",function(){return l.loading|=1}),i.addEventListener("error",function(){return l.loading|=2}),en(i,"link",a),Ne(i),e.head.appendChild(i))}function so(e){return'[src="'+yn(e)+'"]'}function Ll(e){return"script[async]"+e}function bv(e,i,a){if(i.count++,i.instance===null)switch(i.type){case"style":var l=e.querySelector('style[data-href~="'+yn(a.href)+'"]');if(l)return i.instance=l,Ne(l),l;var f=A({},a,{"data-href":a.href,"data-precedence":a.precedence,href:null,precedence:null});return l=(e.ownerDocument||e).createElement("style"),Ne(l),en(l,"style",f),eh(l,a.precedence,e),i.instance=l;case"stylesheet":f=ro(a.href);var d=e.querySelector(kl(f));if(d)return i.state.loading|=4,i.instance=d,Ne(d),d;l=Av(a),(f=Zn.get(f))&&pm(l,f),d=(e.ownerDocument||e).createElement("link"),Ne(d);var _=d;return _._p=new Promise(function(T,V){_.onload=T,_.onerror=V}),en(d,"link",l),i.state.loading|=4,eh(d,a.precedence,e),i.instance=d;case"script":return d=so(a.src),(f=e.querySelector(Ll(d)))?(i.instance=f,Ne(f),f):(l=a,(f=Zn.get(d))&&(l=A({},a),ym(l,f)),e=e.ownerDocument||e,f=e.createElement("script"),Ne(f),en(f,"link",l),e.head.appendChild(f),i.instance=f);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(l=i.instance,i.state.loading|=4,eh(l,a.precedence,e));return i.instance}function eh(e,i,a){for(var l=a.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),f=l.length?l[l.length-1]:null,d=f,_=0;_<l.length;_++){var T=l[_];if(T.dataset.precedence===i)d=T;else if(d!==f)break}d?d.parentNode.insertBefore(e,d.nextSibling):(i=a.nodeType===9?a.head:a,i.insertBefore(e,i.firstChild))}function pm(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.title==null&&(e.title=i.title)}function ym(e,i){e.crossOrigin==null&&(e.crossOrigin=i.crossOrigin),e.referrerPolicy==null&&(e.referrerPolicy=i.referrerPolicy),e.integrity==null&&(e.integrity=i.integrity)}var nh=null;function Sv(e,i,a){if(nh===null){var l=new Map,f=nh=new Map;f.set(a,l)}else f=nh,l=f.get(a),l||(l=new Map,f.set(a,l));if(l.has(e))return l;for(l.set(e,null),a=a.getElementsByTagName(e),f=0;f<a.length;f++){var d=a[f];if(!(d[Ti]||d[Ve]||e==="link"&&d.getAttribute("rel")==="stylesheet")&&d.namespaceURI!=="http://www.w3.org/2000/svg"){var _=d.getAttribute(i)||"";_=e+_;var T=l.get(_);T?T.push(d):l.set(_,[d])}}return l}function wv(e,i,a){e=e.ownerDocument||e,e.head.insertBefore(a,i==="title"?e.querySelector("head > title"):null)}function Ob(e,i,a){if(a===1||i.itemProp!=null)return!1;switch(e){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return e=i.disabled,typeof i.precedence=="string"&&e==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function Iv(e){return!(e.type==="stylesheet"&&(e.state.loading&3)===0)}function Pb(e,i,a,l){if(a.type==="stylesheet"&&(typeof l.media!="string"||matchMedia(l.media).matches!==!1)&&(a.state.loading&4)===0){if(a.instance===null){var f=ro(l.href),d=i.querySelector(kl(f));if(d){i=d._p,i!==null&&typeof i=="object"&&typeof i.then=="function"&&(e.count++,e=ih.bind(e),i.then(e,e)),a.state.loading|=4,a.instance=d,Ne(d);return}d=i.ownerDocument||i,l=Av(l),(f=Zn.get(f))&&pm(l,f),d=d.createElement("link"),Ne(d);var _=d;_._p=new Promise(function(T,V){_.onload=T,_.onerror=V}),en(d,"link",l),a.instance=d}e.stylesheets===null&&(e.stylesheets=new Map),e.stylesheets.set(a,i),(i=a.state.preload)&&(a.state.loading&3)===0&&(e.count++,a=ih.bind(e),i.addEventListener("load",a),i.addEventListener("error",a))}}var _m=0;function zb(e,i){return e.stylesheets&&e.count===0&&sh(e,e.stylesheets),0<e.count||0<e.imgCount?function(a){var l=setTimeout(function(){if(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend){var d=e.unsuspend;e.unsuspend=null,d()}},6e4+i);0<e.imgBytes&&_m===0&&(_m=62500*pb());var f=setTimeout(function(){if(e.waitingForImages=!1,e.count===0&&(e.stylesheets&&sh(e,e.stylesheets),e.unsuspend)){var d=e.unsuspend;e.unsuspend=null,d()}},(e.imgBytes>_m?50:800)+i);return e.unsuspend=a,function(){e.unsuspend=null,clearTimeout(l),clearTimeout(f)}}:null}function ih(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sh(this,this.stylesheets);else if(this.unsuspend){var e=this.unsuspend;this.unsuspend=null,e()}}}var rh=null;function sh(e,i){e.stylesheets=null,e.unsuspend!==null&&(e.count++,rh=new Map,i.forEach(kb,e),rh=null,ih.call(e))}function kb(e,i){if(!(i.state.loading&4)){var a=rh.get(e);if(a)var l=a.get(null);else{a=new Map,rh.set(e,a);for(var f=e.querySelectorAll("link[data-precedence],style[data-precedence]"),d=0;d<f.length;d++){var _=f[d];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(a.set(_.dataset.precedence,_),l=_)}l&&a.set(null,l)}f=i.instance,_=f.getAttribute("data-precedence"),d=a.get(_)||l,d===l&&a.set(null,f),a.set(_,f),this.count++,l=ih.bind(this),f.addEventListener("load",l),f.addEventListener("error",l),d?d.parentNode.insertBefore(f,d.nextSibling):(e=e.nodeType===9?e.head:e,e.insertBefore(f,e.firstChild)),i.state.loading|=4}}var Ul={$$typeof:at,Provider:null,Consumer:null,_currentValue:ct,_currentValue2:ct,_threadCount:0};function Lb(e,i,a,l,f,d,_,T,V){this.tag=1,this.containerInfo=e,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=vi(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=vi(0),this.hiddenUpdates=vi(null),this.identifierPrefix=l,this.onUncaughtError=f,this.onCaughtError=d,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=V,this.incompleteTransitions=new Map}function Rv(e,i,a,l,f,d,_,T,V,B,Y,$){return e=new Lb(e,i,a,_,V,B,Y,$,T),i=1,d===!0&&(i|=24),d=Dn(3,null,null,i),e.current=d,d.stateNode=e,i=Jf(),i.refCount++,e.pooledCache=i,i.refCount++,d.memoizedState={element:l,isDehydrated:a,cache:i},ed(d),e}function xv(e){return e?(e=za,e):za}function Dv(e,i,a,l,f,d){f=xv(f),l.context===null?l.context=f:l.pendingContext=f,l=kr(i),l.payload={element:a},d=d===void 0?null:d,d!==null&&(l.callback=d),a=Lr(e,l,i),a!==null&&(bn(a,e,i),yl(a,e,i))}function Cv(e,i){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var a=e.retryLane;e.retryLane=a!==0&&a<i?a:i}}function vm(e,i){Cv(e,i),(e=e.alternate)&&Cv(e,i)}function Vv(e){if(e.tag===13||e.tag===31){var i=Ps(e,67108864);i!==null&&bn(i,e,67108864),vm(e,67108864)}}function Nv(e){if(e.tag===13||e.tag===31){var i=On();i=bs(i);var a=Ps(e,i);a!==null&&bn(a,e,i),vm(e,i)}}var ah=!0;function Ub(e,i,a,l){var f=q.T;q.T=null;var d=tt.p;try{tt.p=2,Em(e,i,a,l)}finally{tt.p=d,q.T=f}}function jb(e,i,a,l){var f=q.T;q.T=null;var d=tt.p;try{tt.p=8,Em(e,i,a,l)}finally{tt.p=d,q.T=f}}function Em(e,i,a,l){if(ah){var f=Tm(l);if(f===null)am(e,i,l,oh,a),Ov(e,l);else if(qb(f,e,i,a,l))l.stopPropagation();else if(Ov(e,l),i&4&&-1<Bb.indexOf(e)){for(;f!==null;){var d=Un(f);if(d!==null)switch(d.tag){case 3:if(d=d.stateNode,d.current.memoizedState.isDehydrated){var _=yi(d.pendingLanes);if(_!==0){var T=d;for(T.pendingLanes|=2,T.entangledLanes|=2;_;){var V=1<<31-Se(_);T.entanglements[1]|=V,_&=~V}zi(d),($t&6)===0&&(Fc=De()+500,Ml(0))}}break;case 31:case 13:T=Ps(d,2),T!==null&&bn(T,d,2),Gc(),vm(d,2)}if(d=Tm(l),d===null&&am(e,i,l,oh,a),d===f)break;f=d}f!==null&&l.stopPropagation()}else am(e,i,l,null,a)}}function Tm(e){return e=jn(e),Am(e)}var oh=null;function Am(e){if(oh=null,e=Ai(e),e!==null){var i=u(e);if(i===null)e=null;else{var a=i.tag;if(a===13){if(e=h(i),e!==null)return e;e=null}else if(a===31){if(e=m(i),e!==null)return e;e=null}else if(a===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;e=null}else i!==e&&(e=null)}}return oh=e,null}function Mv(e){switch(e){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(vs()){case qo:return 2;case Fo:return 8;case Ar:case xf:return 32;case Uu:return 268435456;default:return 32}default:return 32}}var bm=!1,Xr=null,Zr=null,Jr=null,jl=new Map,Bl=new Map,$r=[],Bb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Ov(e,i){switch(e){case"focusin":case"focusout":Xr=null;break;case"dragenter":case"dragleave":Zr=null;break;case"mouseover":case"mouseout":Jr=null;break;case"pointerover":case"pointerout":jl.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bl.delete(i.pointerId)}}function ql(e,i,a,l,f,d){return e===null||e.nativeEvent!==d?(e={blockedOn:i,domEventName:a,eventSystemFlags:l,nativeEvent:d,targetContainers:[f]},i!==null&&(i=Un(i),i!==null&&Vv(i)),e):(e.eventSystemFlags|=l,i=e.targetContainers,f!==null&&i.indexOf(f)===-1&&i.push(f),e)}function qb(e,i,a,l,f){switch(i){case"focusin":return Xr=ql(Xr,e,i,a,l,f),!0;case"dragenter":return Zr=ql(Zr,e,i,a,l,f),!0;case"mouseover":return Jr=ql(Jr,e,i,a,l,f),!0;case"pointerover":var d=f.pointerId;return jl.set(d,ql(jl.get(d)||null,e,i,a,l,f)),!0;case"gotpointercapture":return d=f.pointerId,Bl.set(d,ql(Bl.get(d)||null,e,i,a,l,f)),!0}return!1}function Pv(e){var i=Ai(e.target);if(i!==null){var a=u(i);if(a!==null){if(i=a.tag,i===13){if(i=h(a),i!==null){e.blockedOn=i,si(e.priority,function(){Nv(a)});return}}else if(i===31){if(i=m(a),i!==null){e.blockedOn=i,si(e.priority,function(){Nv(a)});return}}else if(i===3&&a.stateNode.current.memoizedState.isDehydrated){e.blockedOn=a.tag===3?a.stateNode.containerInfo:null;return}}}e.blockedOn=null}function lh(e){if(e.blockedOn!==null)return!1;for(var i=e.targetContainers;0<i.length;){var a=Tm(e.nativeEvent);if(a===null){a=e.nativeEvent;var l=new a.constructor(a.type,a);el=l,a.target.dispatchEvent(l),el=null}else return i=Un(a),i!==null&&Vv(i),e.blockedOn=a,!1;i.shift()}return!0}function zv(e,i,a){lh(e)&&a.delete(i)}function Fb(){bm=!1,Xr!==null&&lh(Xr)&&(Xr=null),Zr!==null&&lh(Zr)&&(Zr=null),Jr!==null&&lh(Jr)&&(Jr=null),jl.forEach(zv),Bl.forEach(zv)}function uh(e,i){e.blockedOn===i&&(e.blockedOn=null,bm||(bm=!0,s.unstable_scheduleCallback(s.unstable_NormalPriority,Fb)))}var ch=null;function kv(e){ch!==e&&(ch=e,s.unstable_scheduleCallback(s.unstable_NormalPriority,function(){ch===e&&(ch=null);for(var i=0;i<e.length;i+=3){var a=e[i],l=e[i+1],f=e[i+2];if(typeof l!="function"){if(Am(l||a)===null)continue;break}var d=Un(a);d!==null&&(e.splice(i,3),i-=3,Td(d,{pending:!0,data:f,method:a.method,action:l},l,f))}}))}function ao(e){function i(V){return uh(V,e)}Xr!==null&&uh(Xr,e),Zr!==null&&uh(Zr,e),Jr!==null&&uh(Jr,e),jl.forEach(i),Bl.forEach(i);for(var a=0;a<$r.length;a++){var l=$r[a];l.blockedOn===e&&(l.blockedOn=null)}for(;0<$r.length&&(a=$r[0],a.blockedOn===null);)Pv(a),a.blockedOn===null&&$r.shift();if(a=(e.ownerDocument||e).$$reactFormReplay,a!=null)for(l=0;l<a.length;l+=3){var f=a[l],d=a[l+1],_=f[He]||null;if(typeof d=="function")_||kv(a);else if(_){var T=null;if(d&&d.hasAttribute("formAction")){if(f=d,_=d[He]||null)T=_.formAction;else if(Am(f)!==null)continue}else T=_.action;typeof T=="function"?a[l+1]=T:(a.splice(l,3),l-=3),kv(a)}}}function Lv(){function e(d){d.canIntercept&&d.info==="react-transition"&&d.intercept({handler:function(){return new Promise(function(_){return f=_})},focusReset:"manual",scroll:"manual"})}function i(){f!==null&&(f(),f=null),l||setTimeout(a,20)}function a(){if(!l&&!navigation.transition){var d=navigation.currentEntry;d&&d.url!=null&&navigation.navigate(d.url,{state:d.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var l=!1,f=null;return navigation.addEventListener("navigate",e),navigation.addEventListener("navigatesuccess",i),navigation.addEventListener("navigateerror",i),setTimeout(a,100),function(){l=!0,navigation.removeEventListener("navigate",e),navigation.removeEventListener("navigatesuccess",i),navigation.removeEventListener("navigateerror",i),f!==null&&(f(),f=null)}}}function Sm(e){this._internalRoot=e}hh.prototype.render=Sm.prototype.render=function(e){var i=this._internalRoot;if(i===null)throw Error(r(409));var a=i.current,l=On();Dv(a,l,e,i,null,null)},hh.prototype.unmount=Sm.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var i=e.containerInfo;Dv(e.current,2,null,e,null,null),Gc(),i[Ei]=null}};function hh(e){this._internalRoot=e}hh.prototype.unstable_scheduleHydration=function(e){if(e){var i=Gu();e={blockedOn:null,target:e,priority:i};for(var a=0;a<$r.length&&i!==0&&i<$r[a].priority;a++);$r.splice(a,0,e),a===0&&Pv(e)}};var Uv=t.version;if(Uv!=="19.2.0")throw Error(r(527,Uv,"19.2.0"));tt.findDOMNode=function(e){var i=e._reactInternals;if(i===void 0)throw typeof e.render=="function"?Error(r(188)):(e=Object.keys(e).join(","),Error(r(268,e)));return e=y(i),e=e!==null?E(e):null,e=e===null?null:e.stateNode,e};var Hb={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var fh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!fh.isDisabled&&fh.supportsFiber)try{ii=fh.inject(Hb),Ze=fh}catch{}}return Hl.createRoot=function(e,i){if(!o(e))throw Error(r(299));var a=!1,l="",f=Qy,d=Ky,_=Yy;return i!=null&&(i.unstable_strictMode===!0&&(a=!0),i.identifierPrefix!==void 0&&(l=i.identifierPrefix),i.onUncaughtError!==void 0&&(f=i.onUncaughtError),i.onCaughtError!==void 0&&(d=i.onCaughtError),i.onRecoverableError!==void 0&&(_=i.onRecoverableError)),i=Rv(e,1,!1,null,null,a,l,null,f,d,_,Lv),e[Ei]=i.current,sm(e),new Sm(i)},Hl.hydrateRoot=function(e,i,a){if(!o(e))throw Error(r(299));var l=!1,f="",d=Qy,_=Ky,T=Yy,V=null;return a!=null&&(a.unstable_strictMode===!0&&(l=!0),a.identifierPrefix!==void 0&&(f=a.identifierPrefix),a.onUncaughtError!==void 0&&(d=a.onUncaughtError),a.onCaughtError!==void 0&&(_=a.onCaughtError),a.onRecoverableError!==void 0&&(T=a.onRecoverableError),a.formState!==void 0&&(V=a.formState)),i=Rv(e,1,!0,i,a??null,l,f,V,d,_,T,Lv),i.context=xv(null),a=i.current,l=On(),l=bs(l),f=kr(l),f.callback=null,Lr(a,f,l),a=l,i.current.lanes=a,Ts(i,a),zi(i),e[Ei]=i.current,sm(e),new hh(i)},Hl.version="19.2.0",Hl}var Xv;function eS(){if(Xv)return Rm.exports;Xv=1;function s(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(s)}catch(t){console.error(t)}}return s(),Rm.exports=tS(),Rm.exports}var nS=eS();const iS=ME(nS);var fr=(s=>(s.Project="",s.Now="",s.ToDo="",s))(fr||{}),xe=(s=>(s.Pending="",s.InProgress="",s.Completed="",s))(xe||{}),Eo=(s=>(s.Analyzing="",s.SolutionDerived="  ",s.Resolved=" ",s))(Eo||{}),nn=(s=>(s.Pending="",s.Completed="",s))(nn||{});const rS=()=>{};var Zv={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OE=function(s){const t=[];let n=0;for(let r=0;r<s.length;r++){let o=s.charCodeAt(r);o<128?t[n++]=o:o<2048?(t[n++]=o>>6|192,t[n++]=o&63|128):(o&64512)===55296&&r+1<s.length&&(s.charCodeAt(r+1)&64512)===56320?(o=65536+((o&1023)<<10)+(s.charCodeAt(++r)&1023),t[n++]=o>>18|240,t[n++]=o>>12&63|128,t[n++]=o>>6&63|128,t[n++]=o&63|128):(t[n++]=o>>12|224,t[n++]=o>>6&63|128,t[n++]=o&63|128)}return t},sS=function(s){const t=[];let n=0,r=0;for(;n<s.length;){const o=s[n++];if(o<128)t[r++]=String.fromCharCode(o);else if(o>191&&o<224){const u=s[n++];t[r++]=String.fromCharCode((o&31)<<6|u&63)}else if(o>239&&o<365){const u=s[n++],h=s[n++],m=s[n++],g=((o&7)<<18|(u&63)<<12|(h&63)<<6|m&63)-65536;t[r++]=String.fromCharCode(55296+(g>>10)),t[r++]=String.fromCharCode(56320+(g&1023))}else{const u=s[n++],h=s[n++];t[r++]=String.fromCharCode((o&15)<<12|(u&63)<<6|h&63)}}return t.join("")},PE={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(s,t){if(!Array.isArray(s))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let o=0;o<s.length;o+=3){const u=s[o],h=o+1<s.length,m=h?s[o+1]:0,g=o+2<s.length,y=g?s[o+2]:0,E=u>>2,A=(u&3)<<4|m>>4;let S=(m&15)<<2|y>>6,U=y&63;g||(U=64,h||(S=64)),r.push(n[E],n[A],n[S],n[U])}return r.join("")},encodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(s):this.encodeByteArray(OE(s),t)},decodeString(s,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(s):sS(this.decodeStringToByteArray(s,t))},decodeStringToByteArray(s,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let o=0;o<s.length;){const u=n[s.charAt(o++)],m=o<s.length?n[s.charAt(o)]:0;++o;const y=o<s.length?n[s.charAt(o)]:64;++o;const A=o<s.length?n[s.charAt(o)]:64;if(++o,u==null||m==null||y==null||A==null)throw new aS;const S=u<<2|m>>4;if(r.push(S),y!==64){const U=m<<4&240|y>>2;if(r.push(U),A!==64){const W=y<<6&192|A;r.push(W)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let s=0;s<this.ENCODED_VALS.length;s++)this.byteToCharMap_[s]=this.ENCODED_VALS.charAt(s),this.charToByteMap_[this.byteToCharMap_[s]]=s,this.byteToCharMapWebSafe_[s]=this.ENCODED_VALS_WEBSAFE.charAt(s),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[s]]=s,s>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(s)]=s,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(s)]=s)}}};class aS extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oS=function(s){const t=OE(s);return PE.encodeByteArray(t,!0)},Nh=function(s){return oS(s).replace(/\./g,"")},lS=function(s){try{return PE.decodeString(s,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uS=()=>zE().__FIREBASE_DEFAULTS__,cS=()=>{if(typeof process>"u"||typeof Zv>"u")return;const s=Zv.__FIREBASE_DEFAULTS__;if(s)return JSON.parse(s)},hS=()=>{if(typeof document>"u")return;let s;try{s=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=s&&lS(s[1]);return t&&JSON.parse(t)},xg=()=>{try{return rS()||uS()||cS()||hS()}catch(s){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${s}`);return}},fS=s=>{var t,n;return(n=(t=xg())==null?void 0:t.emulatorHosts)==null?void 0:n[s]},dS=s=>{const t=fS(s);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},kE=()=>{var s;return(s=xg())==null?void 0:s.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mS{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dg(s){try{return(s.startsWith("http://")||s.startsWith("https://")?new URL(s).hostname:s).endsWith(".cloudworkstations.dev")}catch{return!1}}async function gS(s){return(await fetch(s,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pS(s,t){if(s.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",o=s.iat||0,u=s.sub||s.user_id;if(!u)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const h={iss:`https://securetoken.google.com/${r}`,aud:r,iat:o,exp:o+3600,auth_time:o,sub:u,user_id:u,firebase:{sign_in_provider:"custom",identities:{}},...s};return[Nh(JSON.stringify(n)),Nh(JSON.stringify(h)),""].join(".")}const eu={};function yS(){const s={prod:[],emulator:[]};for(const t of Object.keys(eu))eu[t]?s.emulator.push(t):s.prod.push(t);return s}function _S(s){let t=document.getElementById(s),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",s),n=!0),{created:n,element:t}}let Jv=!1;function vS(s,t){if(typeof window>"u"||typeof document>"u"||!Dg(window.location.host)||eu[s]===t||eu[s]||Jv)return;eu[s]=t;function n(S){return`__firebase__banner__${S}`}const r="__firebase__banner",u=yS().prod.length>0;function h(){const S=document.getElementById(r);S&&S.remove()}function m(S){S.style.display="flex",S.style.background="#7faaf0",S.style.position="fixed",S.style.bottom="5px",S.style.left="5px",S.style.padding=".5em",S.style.borderRadius="5px",S.style.alignItems="center"}function g(S,U){S.setAttribute("width","24"),S.setAttribute("id",U),S.setAttribute("height","24"),S.setAttribute("viewBox","0 0 24 24"),S.setAttribute("fill","none"),S.style.marginLeft="-6px"}function y(){const S=document.createElement("span");return S.style.cursor="pointer",S.style.marginLeft="16px",S.style.fontSize="24px",S.innerHTML=" &times;",S.onclick=()=>{Jv=!0,h()},S}function E(S,U){S.setAttribute("id",U),S.innerText="Learn more",S.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",S.setAttribute("target","__blank"),S.style.paddingLeft="5px",S.style.textDecoration="underline"}function A(){const S=_S(r),U=n("text"),W=document.getElementById(U)||document.createElement("span"),Q=n("learnmore"),X=document.getElementById(Q)||document.createElement("a"),st=n("preprendIcon"),rt=document.getElementById(st)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(S.created){const at=S.element;m(at),E(X,Q);const At=y();g(rt,st),at.append(rt,W,X,At),document.body.appendChild(at)}u?(W.innerText="Preview backend disconnected.",rt.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(rt.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,W.innerText="Preview backend running in this workspace."),W.setAttribute("id",U)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",A):A()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mh(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function LE(){var t;const s=(t=xg())==null?void 0:t.forceEnvironment;if(s==="node")return!0;if(s==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function UE(){return!LE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function jE(){return!LE()&&!!navigator.userAgent&&(navigator.userAgent.includes("Safari")||navigator.userAgent.includes("WebKit"))&&!navigator.userAgent.includes("Chrome")}function BE(){try{return typeof indexedDB=="object"}catch{return!1}}function ES(){return new Promise((s,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",o=self.indexedDB.open(r);o.onsuccess=()=>{o.result.close(),n||self.indexedDB.deleteDatabase(r),s(!0)},o.onupgradeneeded=()=>{n=!1},o.onerror=()=>{var u;t(((u=o.error)==null?void 0:u.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TS="FirebaseError";class ko extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=TS,Object.setPrototypeOf(this,ko.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,qE.prototype.create)}}class qE{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},o=`${this.service}/${t}`,u=this.errors[t],h=u?AS(u,r):"Error",m=`${this.serviceName}: ${h} (${o}).`;return new ko(o,m,r)}}function AS(s,t){return s.replace(bS,(n,r)=>{const o=t[r];return o!=null?String(o):`<${r}?>`})}const bS=/\{\$([^}]+)}/g;function Oh(s,t){if(s===t)return!0;const n=Object.keys(s),r=Object.keys(t);for(const o of n){if(!r.includes(o))return!1;const u=s[o],h=t[o];if($v(u)&&$v(h)){if(!Oh(u,h))return!1}else if(u!==h)return!1}for(const o of r)if(!n.includes(o))return!1;return!0}function $v(s){return s!==null&&typeof s=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ei(s){return s&&s._delegate?s._delegate:s}class cu{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xs="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SS{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new mS;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const o=this.getOrInitializeService({instanceIdentifier:n});o&&r.resolve(o)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){const n=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),r=(t==null?void 0:t.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(o){if(r)return null;throw o}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(IS(t))try{this.getOrInitializeService({instanceIdentifier:Xs})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const o=this.normalizeInstanceIdentifier(n);try{const u=this.getOrInitializeService({instanceIdentifier:o});r.resolve(u)}catch{}}}}clearInstance(t=Xs){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Xs){return this.instances.has(t)}getOptions(t=Xs){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const o=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[u,h]of this.instancesDeferred.entries()){const m=this.normalizeInstanceIdentifier(u);r===m&&h.resolve(o)}return o}onInit(t,n){const r=this.normalizeInstanceIdentifier(n),o=this.onInitCallbacks.get(r)??new Set;o.add(t),this.onInitCallbacks.set(r,o);const u=this.instances.get(r);return u&&t(u,r),()=>{o.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const o of r)try{o(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:wS(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Xs){return this.component?this.component.multipleInstances?t:Xs:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function wS(s){return s===Xs?void 0:s}function IS(s){return s.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RS{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new SS(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Qt;(function(s){s[s.DEBUG=0]="DEBUG",s[s.VERBOSE=1]="VERBOSE",s[s.INFO=2]="INFO",s[s.WARN=3]="WARN",s[s.ERROR=4]="ERROR",s[s.SILENT=5]="SILENT"})(Qt||(Qt={}));const xS={debug:Qt.DEBUG,verbose:Qt.VERBOSE,info:Qt.INFO,warn:Qt.WARN,error:Qt.ERROR,silent:Qt.SILENT},DS=Qt.INFO,CS={[Qt.DEBUG]:"log",[Qt.VERBOSE]:"log",[Qt.INFO]:"info",[Qt.WARN]:"warn",[Qt.ERROR]:"error"},VS=(s,t,...n)=>{if(t<s.logLevel)return;const r=new Date().toISOString(),o=CS[t];if(o)console[o](`[${r}]  ${s.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class FE{constructor(t){this.name=t,this._logLevel=DS,this._logHandler=VS,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in Qt))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?xS[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,Qt.DEBUG,...t),this._logHandler(this,Qt.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,Qt.VERBOSE,...t),this._logHandler(this,Qt.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,Qt.INFO,...t),this._logHandler(this,Qt.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,Qt.WARN,...t),this._logHandler(this,Qt.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,Qt.ERROR,...t),this._logHandler(this,Qt.ERROR,...t)}}const NS=(s,t)=>t.some(n=>s instanceof n);let Wv,t0;function MS(){return Wv||(Wv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function OS(){return t0||(t0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const HE=new WeakMap,Ym=new WeakMap,GE=new WeakMap,Vm=new WeakMap,Cg=new WeakMap;function PS(s){const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("success",u),s.removeEventListener("error",h)},u=()=>{n(ss(s.result)),o()},h=()=>{r(s.error),o()};s.addEventListener("success",u),s.addEventListener("error",h)});return t.then(n=>{n instanceof IDBCursor&&HE.set(n,s)}).catch(()=>{}),Cg.set(t,s),t}function zS(s){if(Ym.has(s))return;const t=new Promise((n,r)=>{const o=()=>{s.removeEventListener("complete",u),s.removeEventListener("error",h),s.removeEventListener("abort",h)},u=()=>{n(),o()},h=()=>{r(s.error||new DOMException("AbortError","AbortError")),o()};s.addEventListener("complete",u),s.addEventListener("error",h),s.addEventListener("abort",h)});Ym.set(s,t)}let Xm={get(s,t,n){if(s instanceof IDBTransaction){if(t==="done")return Ym.get(s);if(t==="objectStoreNames")return s.objectStoreNames||GE.get(s);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return ss(s[t])},set(s,t,n){return s[t]=n,!0},has(s,t){return s instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in s}};function kS(s){Xm=s(Xm)}function LS(s){return s===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=s.call(Nm(this),t,...n);return GE.set(r,t.sort?t.sort():[t]),ss(r)}:OS().includes(s)?function(...t){return s.apply(Nm(this),t),ss(HE.get(this))}:function(...t){return ss(s.apply(Nm(this),t))}}function US(s){return typeof s=="function"?LS(s):(s instanceof IDBTransaction&&zS(s),NS(s,MS())?new Proxy(s,Xm):s)}function ss(s){if(s instanceof IDBRequest)return PS(s);if(Vm.has(s))return Vm.get(s);const t=US(s);return t!==s&&(Vm.set(s,t),Cg.set(t,s)),t}const Nm=s=>Cg.get(s);function jS(s,t,{blocked:n,upgrade:r,blocking:o,terminated:u}={}){const h=indexedDB.open(s,t),m=ss(h);return r&&h.addEventListener("upgradeneeded",g=>{r(ss(h.result),g.oldVersion,g.newVersion,ss(h.transaction),g)}),n&&h.addEventListener("blocked",g=>n(g.oldVersion,g.newVersion,g)),m.then(g=>{u&&g.addEventListener("close",()=>u()),o&&g.addEventListener("versionchange",y=>o(y.oldVersion,y.newVersion,y))}).catch(()=>{}),m}const BS=["get","getKey","getAll","getAllKeys","count"],qS=["put","add","delete","clear"],Mm=new Map;function e0(s,t){if(!(s instanceof IDBDatabase&&!(t in s)&&typeof t=="string"))return;if(Mm.get(t))return Mm.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,o=qS.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(o||BS.includes(n)))return;const u=async function(h,...m){const g=this.transaction(h,o?"readwrite":"readonly");let y=g.store;return r&&(y=y.index(m.shift())),(await Promise.all([y[n](...m),o&&g.done]))[0]};return Mm.set(t,u),u}kS(s=>({...s,get:(t,n,r)=>e0(t,n)||s.get(t,n,r),has:(t,n)=>!!e0(t,n)||s.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FS{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(HS(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function HS(s){const t=s.getComponent();return(t==null?void 0:t.type)==="VERSION"}const Zm="@firebase/app",n0="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gr=new FE("@firebase/app"),GS="@firebase/app-compat",QS="@firebase/analytics-compat",KS="@firebase/analytics",YS="@firebase/app-check-compat",XS="@firebase/app-check",ZS="@firebase/auth",JS="@firebase/auth-compat",$S="@firebase/database",WS="@firebase/data-connect",tw="@firebase/database-compat",ew="@firebase/functions",nw="@firebase/functions-compat",iw="@firebase/installations",rw="@firebase/installations-compat",sw="@firebase/messaging",aw="@firebase/messaging-compat",ow="@firebase/performance",lw="@firebase/performance-compat",uw="@firebase/remote-config",cw="@firebase/remote-config-compat",hw="@firebase/storage",fw="@firebase/storage-compat",dw="@firebase/firestore",mw="@firebase/ai",gw="@firebase/firestore-compat",pw="firebase",yw="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jm="[DEFAULT]",_w={[Zm]:"fire-core",[GS]:"fire-core-compat",[KS]:"fire-analytics",[QS]:"fire-analytics-compat",[XS]:"fire-app-check",[YS]:"fire-app-check-compat",[ZS]:"fire-auth",[JS]:"fire-auth-compat",[$S]:"fire-rtdb",[WS]:"fire-data-connect",[tw]:"fire-rtdb-compat",[ew]:"fire-fn",[nw]:"fire-fn-compat",[iw]:"fire-iid",[rw]:"fire-iid-compat",[sw]:"fire-fcm",[aw]:"fire-fcm-compat",[ow]:"fire-perf",[lw]:"fire-perf-compat",[uw]:"fire-rc",[cw]:"fire-rc-compat",[hw]:"fire-gcs",[fw]:"fire-gcs-compat",[dw]:"fire-fst",[gw]:"fire-fst-compat",[mw]:"fire-vertex","fire-js":"fire-js",[pw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ph=new Map,vw=new Map,$m=new Map;function i0(s,t){try{s.container.addComponent(t)}catch(n){gr.debug(`Component ${t.name} failed to register with FirebaseApp ${s.name}`,n)}}function zh(s){const t=s.name;if($m.has(t))return gr.debug(`There were multiple attempts to register component ${t}.`),!1;$m.set(t,s);for(const n of Ph.values())i0(n,s);for(const n of vw.values())i0(n,s);return!0}function Ew(s,t){const n=s.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),s.container.getProvider(t)}function Tw(s){return s==null?!1:s.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Aw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},as=new qE("app","Firebase",Aw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bw{constructor(t,n,r){this._isDeleted=!1,this._options={...t},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new cu("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw as.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sw=yw;function QE(s,t={}){let n=s;typeof t!="object"&&(t={name:t});const r={name:Jm,automaticDataCollectionEnabled:!0,...t},o=r.name;if(typeof o!="string"||!o)throw as.create("bad-app-name",{appName:String(o)});if(n||(n=kE()),!n)throw as.create("no-options");const u=Ph.get(o);if(u){if(Oh(n,u.options)&&Oh(r,u.config))return u;throw as.create("duplicate-app",{appName:o})}const h=new RS(o);for(const g of $m.values())h.addComponent(g);const m=new bw(n,r,h);return Ph.set(o,m),m}function ww(s=Jm){const t=Ph.get(s);if(!t&&s===Jm&&kE())return QE();if(!t)throw as.create("no-app",{appName:s});return t}function To(s,t,n){let r=_w[s]??s;n&&(r+=`-${n}`);const o=r.match(/\s|\//),u=t.match(/\s|\//);if(o||u){const h=[`Unable to register library "${r}" with version "${t}":`];o&&h.push(`library name "${r}" contains illegal characters (whitespace or "/")`),o&&u&&h.push("and"),u&&h.push(`version name "${t}" contains illegal characters (whitespace or "/")`),gr.warn(h.join(" "));return}zh(new cu(`${r}-version`,()=>({library:r,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw="firebase-heartbeat-database",Rw=1,hu="firebase-heartbeat-store";let Om=null;function KE(){return Om||(Om=jS(Iw,Rw,{upgrade:(s,t)=>{switch(t){case 0:try{s.createObjectStore(hu)}catch(n){console.warn(n)}}}}).catch(s=>{throw as.create("idb-open",{originalErrorMessage:s.message})})),Om}async function xw(s){try{const n=(await KE()).transaction(hu),r=await n.objectStore(hu).get(YE(s));return await n.done,r}catch(t){if(t instanceof ko)gr.warn(t.message);else{const n=as.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});gr.warn(n.message)}}}async function r0(s,t){try{const r=(await KE()).transaction(hu,"readwrite");await r.objectStore(hu).put(t,YE(s)),await r.done}catch(n){if(n instanceof ko)gr.warn(n.message);else{const r=as.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});gr.warn(r.message)}}}function YE(s){return`${s.name}!${s.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw=1024,Cw=30;class Vw{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Mw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const o=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),u=s0();if(((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===u||this._heartbeatsCache.heartbeats.some(h=>h.date===u))return;if(this._heartbeatsCache.heartbeats.push({date:u,agent:o}),this._heartbeatsCache.heartbeats.length>Cw){const h=Ow(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(h,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){gr.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)==null?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=s0(),{heartbeatsToSend:r,unsentEntries:o}=Nw(this._heartbeatsCache.heartbeats),u=Nh(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,o.length>0?(this._heartbeatsCache.heartbeats=o,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),u}catch(n){return gr.warn(n),""}}}function s0(){return new Date().toISOString().substring(0,10)}function Nw(s,t=Dw){const n=[];let r=s.slice();for(const o of s){const u=n.find(h=>h.agent===o.agent);if(u){if(u.dates.push(o.date),a0(n)>t){u.dates.pop();break}}else if(n.push({agent:o.agent,dates:[o.date]}),a0(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Mw{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return BE()?ES().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await xw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return r0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){if(await this._canUseIndexedDBPromise){const r=await this.read();return r0(this.app,{lastSentHeartbeatDate:t.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...t.heartbeats]})}else return}}function a0(s){return Nh(JSON.stringify({version:2,heartbeats:s})).length}function Ow(s){if(s.length===0)return-1;let t=0,n=s[0].date;for(let r=1;r<s.length;r++)s[r].date<n&&(n=s[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pw(s){zh(new cu("platform-logger",t=>new FS(t),"PRIVATE")),zh(new cu("heartbeat",t=>new Vw(t),"PRIVATE")),To(Zm,n0,s),To(Zm,n0,"esm2020"),To("fire-js","")}Pw("");var zw="firebase",kw="12.6.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */To(zw,kw,"app");var o0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var os,XE;(function(){var s;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(D,I){function C(){}C.prototype=I.prototype,D.F=I.prototype,D.prototype=new C,D.prototype.constructor=D,D.D=function(R,x,P){for(var w=Array(arguments.length-2),wt=2;wt<arguments.length;wt++)w[wt-2]=arguments[wt];return I.prototype[x].apply(R,w)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}t(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function o(D,I,C){C||(C=0);const R=Array(16);if(typeof I=="string")for(var x=0;x<16;++x)R[x]=I.charCodeAt(C++)|I.charCodeAt(C++)<<8|I.charCodeAt(C++)<<16|I.charCodeAt(C++)<<24;else for(x=0;x<16;++x)R[x]=I[C++]|I[C++]<<8|I[C++]<<16|I[C++]<<24;I=D.g[0],C=D.g[1],x=D.g[2];let P=D.g[3],w;w=I+(P^C&(x^P))+R[0]+3614090360&4294967295,I=C+(w<<7&4294967295|w>>>25),w=P+(x^I&(C^x))+R[1]+3905402710&4294967295,P=I+(w<<12&4294967295|w>>>20),w=x+(C^P&(I^C))+R[2]+606105819&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(I^x&(P^I))+R[3]+3250441966&4294967295,C=x+(w<<22&4294967295|w>>>10),w=I+(P^C&(x^P))+R[4]+4118548399&4294967295,I=C+(w<<7&4294967295|w>>>25),w=P+(x^I&(C^x))+R[5]+1200080426&4294967295,P=I+(w<<12&4294967295|w>>>20),w=x+(C^P&(I^C))+R[6]+2821735955&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(I^x&(P^I))+R[7]+4249261313&4294967295,C=x+(w<<22&4294967295|w>>>10),w=I+(P^C&(x^P))+R[8]+1770035416&4294967295,I=C+(w<<7&4294967295|w>>>25),w=P+(x^I&(C^x))+R[9]+2336552879&4294967295,P=I+(w<<12&4294967295|w>>>20),w=x+(C^P&(I^C))+R[10]+4294925233&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(I^x&(P^I))+R[11]+2304563134&4294967295,C=x+(w<<22&4294967295|w>>>10),w=I+(P^C&(x^P))+R[12]+1804603682&4294967295,I=C+(w<<7&4294967295|w>>>25),w=P+(x^I&(C^x))+R[13]+4254626195&4294967295,P=I+(w<<12&4294967295|w>>>20),w=x+(C^P&(I^C))+R[14]+2792965006&4294967295,x=P+(w<<17&4294967295|w>>>15),w=C+(I^x&(P^I))+R[15]+1236535329&4294967295,C=x+(w<<22&4294967295|w>>>10),w=I+(x^P&(C^x))+R[1]+4129170786&4294967295,I=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(I^C))+R[6]+3225465664&4294967295,P=I+(w<<9&4294967295|w>>>23),w=x+(I^C&(P^I))+R[11]+643717713&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^I&(x^P))+R[0]+3921069994&4294967295,C=x+(w<<20&4294967295|w>>>12),w=I+(x^P&(C^x))+R[5]+3593408605&4294967295,I=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(I^C))+R[10]+38016083&4294967295,P=I+(w<<9&4294967295|w>>>23),w=x+(I^C&(P^I))+R[15]+3634488961&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^I&(x^P))+R[4]+3889429448&4294967295,C=x+(w<<20&4294967295|w>>>12),w=I+(x^P&(C^x))+R[9]+568446438&4294967295,I=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(I^C))+R[14]+3275163606&4294967295,P=I+(w<<9&4294967295|w>>>23),w=x+(I^C&(P^I))+R[3]+4107603335&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^I&(x^P))+R[8]+1163531501&4294967295,C=x+(w<<20&4294967295|w>>>12),w=I+(x^P&(C^x))+R[13]+2850285829&4294967295,I=C+(w<<5&4294967295|w>>>27),w=P+(C^x&(I^C))+R[2]+4243563512&4294967295,P=I+(w<<9&4294967295|w>>>23),w=x+(I^C&(P^I))+R[7]+1735328473&4294967295,x=P+(w<<14&4294967295|w>>>18),w=C+(P^I&(x^P))+R[12]+2368359562&4294967295,C=x+(w<<20&4294967295|w>>>12),w=I+(C^x^P)+R[5]+4294588738&4294967295,I=C+(w<<4&4294967295|w>>>28),w=P+(I^C^x)+R[8]+2272392833&4294967295,P=I+(w<<11&4294967295|w>>>21),w=x+(P^I^C)+R[11]+1839030562&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^I)+R[14]+4259657740&4294967295,C=x+(w<<23&4294967295|w>>>9),w=I+(C^x^P)+R[1]+2763975236&4294967295,I=C+(w<<4&4294967295|w>>>28),w=P+(I^C^x)+R[4]+1272893353&4294967295,P=I+(w<<11&4294967295|w>>>21),w=x+(P^I^C)+R[7]+4139469664&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^I)+R[10]+3200236656&4294967295,C=x+(w<<23&4294967295|w>>>9),w=I+(C^x^P)+R[13]+681279174&4294967295,I=C+(w<<4&4294967295|w>>>28),w=P+(I^C^x)+R[0]+3936430074&4294967295,P=I+(w<<11&4294967295|w>>>21),w=x+(P^I^C)+R[3]+3572445317&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^I)+R[6]+76029189&4294967295,C=x+(w<<23&4294967295|w>>>9),w=I+(C^x^P)+R[9]+3654602809&4294967295,I=C+(w<<4&4294967295|w>>>28),w=P+(I^C^x)+R[12]+3873151461&4294967295,P=I+(w<<11&4294967295|w>>>21),w=x+(P^I^C)+R[15]+530742520&4294967295,x=P+(w<<16&4294967295|w>>>16),w=C+(x^P^I)+R[2]+3299628645&4294967295,C=x+(w<<23&4294967295|w>>>9),w=I+(x^(C|~P))+R[0]+4096336452&4294967295,I=C+(w<<6&4294967295|w>>>26),w=P+(C^(I|~x))+R[7]+1126891415&4294967295,P=I+(w<<10&4294967295|w>>>22),w=x+(I^(P|~C))+R[14]+2878612391&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~I))+R[5]+4237533241&4294967295,C=x+(w<<21&4294967295|w>>>11),w=I+(x^(C|~P))+R[12]+1700485571&4294967295,I=C+(w<<6&4294967295|w>>>26),w=P+(C^(I|~x))+R[3]+2399980690&4294967295,P=I+(w<<10&4294967295|w>>>22),w=x+(I^(P|~C))+R[10]+4293915773&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~I))+R[1]+2240044497&4294967295,C=x+(w<<21&4294967295|w>>>11),w=I+(x^(C|~P))+R[8]+1873313359&4294967295,I=C+(w<<6&4294967295|w>>>26),w=P+(C^(I|~x))+R[15]+4264355552&4294967295,P=I+(w<<10&4294967295|w>>>22),w=x+(I^(P|~C))+R[6]+2734768916&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~I))+R[13]+1309151649&4294967295,C=x+(w<<21&4294967295|w>>>11),w=I+(x^(C|~P))+R[4]+4149444226&4294967295,I=C+(w<<6&4294967295|w>>>26),w=P+(C^(I|~x))+R[11]+3174756917&4294967295,P=I+(w<<10&4294967295|w>>>22),w=x+(I^(P|~C))+R[2]+718787259&4294967295,x=P+(w<<15&4294967295|w>>>17),w=C+(P^(x|~I))+R[9]+3951481745&4294967295,D.g[0]=D.g[0]+I&4294967295,D.g[1]=D.g[1]+(x+(w<<21&4294967295|w>>>11))&4294967295,D.g[2]=D.g[2]+x&4294967295,D.g[3]=D.g[3]+P&4294967295}r.prototype.v=function(D,I){I===void 0&&(I=D.length);const C=I-this.blockSize,R=this.C;let x=this.h,P=0;for(;P<I;){if(x==0)for(;P<=C;)o(this,D,P),P+=this.blockSize;if(typeof D=="string"){for(;P<I;)if(R[x++]=D.charCodeAt(P++),x==this.blockSize){o(this,R),x=0;break}}else for(;P<I;)if(R[x++]=D[P++],x==this.blockSize){o(this,R),x=0;break}}this.h=x,this.o+=I},r.prototype.A=function(){var D=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);D[0]=128;for(var I=1;I<D.length-8;++I)D[I]=0;I=this.o*8;for(var C=D.length-8;C<D.length;++C)D[C]=I&255,I/=256;for(this.v(D),D=Array(16),I=0,C=0;C<4;++C)for(let R=0;R<32;R+=8)D[I++]=this.g[C]>>>R&255;return D};function u(D,I){var C=m;return Object.prototype.hasOwnProperty.call(C,D)?C[D]:C[D]=I(D)}function h(D,I){this.h=I;const C=[];let R=!0;for(let x=D.length-1;x>=0;x--){const P=D[x]|0;R&&P==I||(C[x]=P,R=!1)}this.g=C}var m={};function g(D){return-128<=D&&D<128?u(D,function(I){return new h([I|0],I<0?-1:0)}):new h([D|0],D<0?-1:0)}function y(D){if(isNaN(D)||!isFinite(D))return A;if(D<0)return X(y(-D));const I=[];let C=1;for(let R=0;D>=C;R++)I[R]=D/C|0,C*=4294967296;return new h(I,0)}function E(D,I){if(D.length==0)throw Error("number format error: empty string");if(I=I||10,I<2||36<I)throw Error("radix out of range: "+I);if(D.charAt(0)=="-")return X(E(D.substring(1),I));if(D.indexOf("-")>=0)throw Error('number format error: interior "-" character');const C=y(Math.pow(I,8));let R=A;for(let P=0;P<D.length;P+=8){var x=Math.min(8,D.length-P);const w=parseInt(D.substring(P,P+x),I);x<8?(x=y(Math.pow(I,x)),R=R.j(x).add(y(w))):(R=R.j(C),R=R.add(y(w)))}return R}var A=g(0),S=g(1),U=g(16777216);s=h.prototype,s.m=function(){if(Q(this))return-X(this).m();let D=0,I=1;for(let C=0;C<this.g.length;C++){const R=this.i(C);D+=(R>=0?R:4294967296+R)*I,I*=4294967296}return D},s.toString=function(D){if(D=D||10,D<2||36<D)throw Error("radix out of range: "+D);if(W(this))return"0";if(Q(this))return"-"+X(this).toString(D);const I=y(Math.pow(D,6));var C=this;let R="";for(;;){const x=At(C,I).g;C=st(C,x.j(I));let P=((C.g.length>0?C.g[0]:C.h)>>>0).toString(D);if(C=x,W(C))return P+R;for(;P.length<6;)P="0"+P;R=P+R}},s.i=function(D){return D<0?0:D<this.g.length?this.g[D]:this.h};function W(D){if(D.h!=0)return!1;for(let I=0;I<D.g.length;I++)if(D.g[I]!=0)return!1;return!0}function Q(D){return D.h==-1}s.l=function(D){return D=st(this,D),Q(D)?-1:W(D)?0:1};function X(D){const I=D.g.length,C=[];for(let R=0;R<I;R++)C[R]=~D.g[R];return new h(C,~D.h).add(S)}s.abs=function(){return Q(this)?X(this):this},s.add=function(D){const I=Math.max(this.g.length,D.g.length),C=[];let R=0;for(let x=0;x<=I;x++){let P=R+(this.i(x)&65535)+(D.i(x)&65535),w=(P>>>16)+(this.i(x)>>>16)+(D.i(x)>>>16);R=w>>>16,P&=65535,w&=65535,C[x]=w<<16|P}return new h(C,C[C.length-1]&-2147483648?-1:0)};function st(D,I){return D.add(X(I))}s.j=function(D){if(W(this)||W(D))return A;if(Q(this))return Q(D)?X(this).j(X(D)):X(X(this).j(D));if(Q(D))return X(this.j(X(D)));if(this.l(U)<0&&D.l(U)<0)return y(this.m()*D.m());const I=this.g.length+D.g.length,C=[];for(var R=0;R<2*I;R++)C[R]=0;for(R=0;R<this.g.length;R++)for(let x=0;x<D.g.length;x++){const P=this.i(R)>>>16,w=this.i(R)&65535,wt=D.i(x)>>>16,Ot=D.i(x)&65535;C[2*R+2*x]+=w*Ot,rt(C,2*R+2*x),C[2*R+2*x+1]+=P*Ot,rt(C,2*R+2*x+1),C[2*R+2*x+1]+=w*wt,rt(C,2*R+2*x+1),C[2*R+2*x+2]+=P*wt,rt(C,2*R+2*x+2)}for(D=0;D<I;D++)C[D]=C[2*D+1]<<16|C[2*D];for(D=I;D<2*I;D++)C[D]=0;return new h(C,0)};function rt(D,I){for(;(D[I]&65535)!=D[I];)D[I+1]+=D[I]>>>16,D[I]&=65535,I++}function at(D,I){this.g=D,this.h=I}function At(D,I){if(W(I))throw Error("division by zero");if(W(D))return new at(A,A);if(Q(D))return I=At(X(D),I),new at(X(I.g),X(I.h));if(Q(I))return I=At(D,X(I)),new at(X(I.g),I.h);if(D.g.length>30){if(Q(D)||Q(I))throw Error("slowDivide_ only works with positive integers.");for(var C=S,R=I;R.l(D)<=0;)C=St(C),R=St(R);var x=yt(C,1),P=yt(R,1);for(R=yt(R,2),C=yt(C,2);!W(R);){var w=P.add(R);w.l(D)<=0&&(x=x.add(C),P=w),R=yt(R,1),C=yt(C,1)}return I=st(D,x.j(I)),new at(x,I)}for(x=A;D.l(I)>=0;){for(C=Math.max(1,Math.floor(D.m()/I.m())),R=Math.ceil(Math.log(C)/Math.LN2),R=R<=48?1:Math.pow(2,R-48),P=y(C),w=P.j(I);Q(w)||w.l(D)>0;)C-=R,P=y(C),w=P.j(I);W(P)&&(P=S),x=x.add(P),D=st(D,w)}return new at(x,D)}s.B=function(D){return At(this,D).h},s.and=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let R=0;R<I;R++)C[R]=this.i(R)&D.i(R);return new h(C,this.h&D.h)},s.or=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let R=0;R<I;R++)C[R]=this.i(R)|D.i(R);return new h(C,this.h|D.h)},s.xor=function(D){const I=Math.max(this.g.length,D.g.length),C=[];for(let R=0;R<I;R++)C[R]=this.i(R)^D.i(R);return new h(C,this.h^D.h)};function St(D){const I=D.g.length+1,C=[];for(let R=0;R<I;R++)C[R]=D.i(R)<<1|D.i(R-1)>>>31;return new h(C,D.h)}function yt(D,I){const C=I>>5;I%=32;const R=D.g.length-C,x=[];for(let P=0;P<R;P++)x[P]=I>0?D.i(P+C)>>>I|D.i(P+C+1)<<32-I:D.i(P+C);return new h(x,D.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,XE=r,h.prototype.add=h.prototype.add,h.prototype.multiply=h.prototype.j,h.prototype.modulo=h.prototype.B,h.prototype.compare=h.prototype.l,h.prototype.toNumber=h.prototype.m,h.prototype.toString=h.prototype.toString,h.prototype.getBits=h.prototype.i,h.fromNumber=y,h.fromString=E,os=h}).apply(typeof o0<"u"?o0:typeof self<"u"?self:typeof window<"u"?window:{});var dh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ZE,Zl,JE,Eh,Wm,$E,WE,tT;(function(){var s,t=Object.defineProperty;function n(c){c=[typeof globalThis=="object"&&globalThis,c,typeof window=="object"&&window,typeof self=="object"&&self,typeof dh=="object"&&dh];for(var p=0;p<c.length;++p){var v=c[p];if(v&&v.Math==Math)return v}throw Error("Cannot find global object")}var r=n(this);function o(c,p){if(p)t:{var v=r;c=c.split(".");for(var b=0;b<c.length-1;b++){var L=c[b];if(!(L in v))break t;v=v[L]}c=c[c.length-1],b=v[c],p=p(b),p!=b&&p!=null&&t(v,c,{configurable:!0,writable:!0,value:p})}}o("Symbol.dispose",function(c){return c||Symbol("Symbol.dispose")}),o("Array.prototype.values",function(c){return c||function(){return this[Symbol.iterator]()}}),o("Object.entries",function(c){return c||function(p){var v=[],b;for(b in p)Object.prototype.hasOwnProperty.call(p,b)&&v.push([b,p[b]]);return v}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var u=u||{},h=this||self;function m(c){var p=typeof c;return p=="object"&&c!=null||p=="function"}function g(c,p,v){return c.call.apply(c.bind,arguments)}function y(c,p,v){return y=g,y.apply(null,arguments)}function E(c,p){var v=Array.prototype.slice.call(arguments,1);return function(){var b=v.slice();return b.push.apply(b,arguments),c.apply(this,b)}}function A(c,p){function v(){}v.prototype=p.prototype,c.Z=p.prototype,c.prototype=new v,c.prototype.constructor=c,c.Ob=function(b,L,H){for(var it=Array(arguments.length-2),Ct=2;Ct<arguments.length;Ct++)it[Ct-2]=arguments[Ct];return p.prototype[L].apply(b,it)}}var S=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?c=>c&&AsyncContext.Snapshot.wrap(c):c=>c;function U(c){const p=c.length;if(p>0){const v=Array(p);for(let b=0;b<p;b++)v[b]=c[b];return v}return[]}function W(c,p){for(let b=1;b<arguments.length;b++){const L=arguments[b];var v=typeof L;if(v=v!="object"?v:L?Array.isArray(L)?"array":v:"null",v=="array"||v=="object"&&typeof L.length=="number"){v=c.length||0;const H=L.length||0;c.length=v+H;for(let it=0;it<H;it++)c[v+it]=L[it]}else c.push(L)}}class Q{constructor(p,v){this.i=p,this.j=v,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function X(c){h.setTimeout(()=>{throw c},0)}function st(){var c=D;let p=null;return c.g&&(p=c.g,c.g=c.g.next,c.g||(c.h=null),p.next=null),p}class rt{constructor(){this.h=this.g=null}add(p,v){const b=at.get();b.set(p,v),this.h?this.h.next=b:this.g=b,this.h=b}}var at=new Q(()=>new At,c=>c.reset());class At{constructor(){this.next=this.g=this.h=null}set(p,v){this.h=p,this.g=v,this.next=null}reset(){this.next=this.g=this.h=null}}let St,yt=!1,D=new rt,I=()=>{const c=Promise.resolve(void 0);St=()=>{c.then(C)}};function C(){for(var c;c=st();){try{c.h.call(c.g)}catch(v){X(v)}var p=at;p.j(c),p.h<100&&(p.h++,c.next=p.g,p.g=c)}yt=!1}function R(){this.u=this.u,this.C=this.C}R.prototype.u=!1,R.prototype.dispose=function(){this.u||(this.u=!0,this.N())},R.prototype[Symbol.dispose]=function(){this.dispose()},R.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function x(c,p){this.type=c,this.g=this.target=p,this.defaultPrevented=!1}x.prototype.h=function(){this.defaultPrevented=!0};var P=(function(){if(!h.addEventListener||!Object.defineProperty)return!1;var c=!1,p=Object.defineProperty({},"passive",{get:function(){c=!0}});try{const v=()=>{};h.addEventListener("test",v,p),h.removeEventListener("test",v,p)}catch{}return c})();function w(c){return/^[\s\xa0]*$/.test(c)}function wt(c,p){x.call(this,c?c.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,c&&this.init(c,p)}A(wt,x),wt.prototype.init=function(c,p){const v=this.type=c.type,b=c.changedTouches&&c.changedTouches.length?c.changedTouches[0]:null;this.target=c.target||c.srcElement,this.g=p,p=c.relatedTarget,p||(v=="mouseover"?p=c.fromElement:v=="mouseout"&&(p=c.toElement)),this.relatedTarget=p,b?(this.clientX=b.clientX!==void 0?b.clientX:b.pageX,this.clientY=b.clientY!==void 0?b.clientY:b.pageY,this.screenX=b.screenX||0,this.screenY=b.screenY||0):(this.clientX=c.clientX!==void 0?c.clientX:c.pageX,this.clientY=c.clientY!==void 0?c.clientY:c.pageY,this.screenX=c.screenX||0,this.screenY=c.screenY||0),this.button=c.button,this.key=c.key||"",this.ctrlKey=c.ctrlKey,this.altKey=c.altKey,this.shiftKey=c.shiftKey,this.metaKey=c.metaKey,this.pointerId=c.pointerId||0,this.pointerType=c.pointerType,this.state=c.state,this.i=c,c.defaultPrevented&&wt.Z.h.call(this)},wt.prototype.h=function(){wt.Z.h.call(this);const c=this.i;c.preventDefault?c.preventDefault():c.returnValue=!1};var Ot="closure_listenable_"+(Math.random()*1e6|0),q=0;function tt(c,p,v,b,L){this.listener=c,this.proxy=null,this.src=p,this.type=v,this.capture=!!b,this.ha=L,this.key=++q,this.da=this.fa=!1}function ct(c){c.da=!0,c.listener=null,c.proxy=null,c.src=null,c.ha=null}function Pt(c,p,v){for(const b in c)p.call(v,c[b],b,c)}function kt(c,p){for(const v in c)p.call(void 0,c[v],v,c)}function O(c){const p={};for(const v in c)p[v]=c[v];return p}const J="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function ot(c,p){let v,b;for(let L=1;L<arguments.length;L++){b=arguments[L];for(v in b)c[v]=b[v];for(let H=0;H<J.length;H++)v=J[H],Object.prototype.hasOwnProperty.call(b,v)&&(c[v]=b[v])}}function ut(c){this.src=c,this.g={},this.h=0}ut.prototype.add=function(c,p,v,b,L){const H=c.toString();c=this.g[H],c||(c=this.g[H]=[],this.h++);const it=xt(c,p,b,L);return it>-1?(p=c[it],v||(p.fa=!1)):(p=new tt(p,this.src,H,!!b,L),p.fa=v,c.push(p)),p};function Et(c,p){const v=p.type;if(v in c.g){var b=c.g[v],L=Array.prototype.indexOf.call(b,p,void 0),H;(H=L>=0)&&Array.prototype.splice.call(b,L,1),H&&(ct(p),c.g[v].length==0&&(delete c.g[v],c.h--))}}function xt(c,p,v,b){for(let L=0;L<c.length;++L){const H=c[L];if(!H.da&&H.listener==p&&H.capture==!!v&&H.ha==b)return L}return-1}var Lt="closure_lm_"+(Math.random()*1e6|0),ve={};function he(c,p,v,b,L){if(Array.isArray(p)){for(let H=0;H<p.length;H++)he(c,p[H],v,b,L);return null}return v=fe(v),c&&c[Ot]?c.J(p,v,m(b)?!!b.capture:!1,L):Hi(c,p,v,!1,b,L)}function Hi(c,p,v,b,L,H){if(!p)throw Error("Invalid event type");const it=m(L)?!!L.capture:!!L;let Ct=Qi(c);if(Ct||(c[Lt]=Ct=new ut(c)),v=Ct.add(p,v,b,it,H),v.proxy)return v;if(b=Tr(),v.proxy=b,b.src=c,b.listener=v,c.addEventListener)P||(L=it),L===void 0&&(L=!1),c.addEventListener(p.toString(),b,L);else if(c.attachEvent)c.attachEvent(Xe(p.toString()),b);else if(c.addListener&&c.removeListener)c.addListener(b);else throw Error("addEventListener and attachEvent are unavailable.");return v}function Tr(){function c(v){return p.call(c.src,c.listener,v)}const p=ys;return c}function Gi(c,p,v,b,L){if(Array.isArray(p))for(var H=0;H<p.length;H++)Gi(c,p[H],v,b,L);else b=m(b)?!!b.capture:!!b,v=fe(v),c&&c[Ot]?(c=c.i,H=String(p).toString(),H in c.g&&(p=c.g[H],v=xt(p,v,b,L),v>-1&&(ct(p[v]),Array.prototype.splice.call(p,v,1),p.length==0&&(delete c.g[H],c.h--)))):c&&(c=Qi(c))&&(p=c.g[p.toString()],c=-1,p&&(c=xt(p,v,b,L)),(v=c>-1?p[c]:null)&&wn(v))}function wn(c){if(typeof c!="number"&&c&&!c.da){var p=c.src;if(p&&p[Ot])Et(p.i,c);else{var v=c.type,b=c.proxy;p.removeEventListener?p.removeEventListener(v,b,c.capture):p.detachEvent?p.detachEvent(Xe(v),b):p.addListener&&p.removeListener&&p.removeListener(b),(v=Qi(p))?(Et(v,c),v.h==0&&(v.src=null,p[Lt]=null)):ct(c)}}}function Xe(c){return c in ve?ve[c]:ve[c]="on"+c}function ys(c,p){if(c.da)c=!0;else{p=new wt(p,this);const v=c.listener,b=c.ha||c.src;c.fa&&wn(c),c=v.call(b,p)}return c}function Qi(c){return c=c[Lt],c instanceof ut?c:null}var _s="__closure_events_fn_"+(Math.random()*1e9>>>0);function fe(c){return typeof c=="function"?c:(c[_s]||(c[_s]=function(p){return c.handleEvent(p)}),c[_s])}function bt(){R.call(this),this.i=new ut(this),this.M=this,this.G=null}A(bt,R),bt.prototype[Ot]=!0,bt.prototype.removeEventListener=function(c,p,v,b){Gi(this,c,p,v,b)};function dt(c,p){var v,b=c.G;if(b)for(v=[];b;b=b.G)v.push(b);if(c=c.M,b=p.type||p,typeof p=="string")p=new x(p,c);else if(p instanceof x)p.target=p.target||c;else{var L=p;p=new x(b,c),ot(p,L)}L=!0;let H,it;if(v)for(it=v.length-1;it>=0;it--)H=p.g=v[it],L=Nt(H,b,!0,p)&&L;if(H=p.g=c,L=Nt(H,b,!0,p)&&L,L=Nt(H,b,!1,p)&&L,v)for(it=0;it<v.length;it++)H=p.g=v[it],L=Nt(H,b,!1,p)&&L}bt.prototype.N=function(){if(bt.Z.N.call(this),this.i){var c=this.i;for(const p in c.g){const v=c.g[p];for(let b=0;b<v.length;b++)ct(v[b]);delete c.g[p],c.h--}}this.G=null},bt.prototype.J=function(c,p,v,b){return this.i.add(String(c),p,!1,v,b)},bt.prototype.K=function(c,p,v,b){return this.i.add(String(c),p,!0,v,b)};function Nt(c,p,v,b){if(p=c.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let H=0;H<p.length;++H){const it=p[H];if(it&&!it.da&&it.capture==v){const Ct=it.listener,we=it.ha||it.src;it.fa&&Et(c.i,it),L=Ct.call(we,b)!==!1&&L}}return L&&!b.defaultPrevented}function pn(c,p){if(typeof c!="function")if(c&&typeof c.handleEvent=="function")c=y(c.handleEvent,c);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:h.setTimeout(c,p||0)}function te(c){c.g=pn(()=>{c.g=null,c.i&&(c.i=!1,te(c))},c.l);const p=c.h;c.h=null,c.m.apply(null,p)}class De extends R{constructor(p,v){super(),this.m=p,this.l=v,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:te(this)}N(){super.N(),this.g&&(h.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function vs(c){R.call(this),this.h=c,this.g={}}A(vs,R);var qo=[];function Fo(c){Pt(c.g,function(p,v){this.g.hasOwnProperty(v)&&wn(p)},c),c.g={}}vs.prototype.N=function(){vs.Z.N.call(this),Fo(this)},vs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Ar=h.JSON.stringify,xf=h.JSON.parse,Uu=class{stringify(c){return h.JSON.stringify(c,void 0)}parse(c){return h.JSON.parse(c,void 0)}};function ju(){}function Bu(){}var ii={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Ze(){x.call(this,"d")}A(Ze,x);function Ln(){x.call(this,"c")}A(Ln,x);var Se={},qu=null;function Ea(){return qu=qu||new bt}Se.Ia="serverreachability";function Fu(c){x.call(this,Se.Ia,c)}A(Fu,x);function pi(c){const p=Ea();dt(p,new Fu(p))}Se.STAT_EVENT="statevent";function Es(c,p){x.call(this,Se.STAT_EVENT,c),this.stat=p}A(Es,x);function Ce(c){const p=Ea();dt(p,new Es(p,c))}Se.Ja="timingevent";function yi(c,p){x.call(this,Se.Ja,c),this.size=p}A(yi,x);function _i(c,p){if(typeof c!="function")throw Error("Fn must not be null and must be a function");return h.setTimeout(function(){c()},p)}function ri(){this.g=!0}ri.prototype.ua=function(){this.g=!1};function Df(c,p,v,b,L,H){c.info(function(){if(c.g)if(H){var it="",Ct=H.split("&");for(let Jt=0;Jt<Ct.length;Jt++){var we=Ct[Jt].split("=");if(we.length>1){const ge=we[0];we=we[1];const qn=ge.split("_");it=qn.length>=2&&qn[1]=="type"?it+(ge+"="+we+"&"):it+(ge+"=redacted&")}}}else it=null;else it=H;return"XMLHTTP REQ ("+b+") [attempt "+L+"]: "+p+`
`+v+`
`+it})}function Hu(c,p,v,b,L,H,it){c.info(function(){return"XMLHTTP RESP ("+b+") [ attempt "+L+"]: "+p+`
`+v+`
`+H+" "+it})}function vi(c,p,v,b){c.info(function(){return"XMLHTTP TEXT ("+p+"): "+Cf(c,v)+(b?" "+b:"")})}function Ts(c,p){c.info(function(){return"TIMEOUT: "+p})}ri.prototype.info=function(){};function Cf(c,p){if(!c.g)return p;if(!p)return null;try{const H=JSON.parse(p);if(H){for(c=0;c<H.length;c++)if(Array.isArray(H[c])){var v=H[c];if(!(v.length<2)){var b=v[1];if(Array.isArray(b)&&!(b.length<1)){var L=b[0];if(L!="noop"&&L!="stop"&&L!="close")for(let it=1;it<b.length;it++)b[it]=""}}}}return Ar(H)}catch{return p}}var As={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},Ho={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},Go;function bs(){}A(bs,ju),bs.prototype.g=function(){return new XMLHttpRequest},Go=new bs;function Ki(c){return encodeURIComponent(String(c))}function Gu(c){var p=1;c=c.split(":");const v=[];for(;p>0&&c.length;)v.push(c.shift()),p--;return c.length&&v.push(c.join(":")),v}function si(c,p,v,b){this.j=c,this.i=p,this.l=v,this.S=b||1,this.V=new vs(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new ai}function ai(){this.i=null,this.g="",this.h=!1}var Ve={},He={};function Ei(c,p,v){c.M=1,c.A=Ss(Me(p)),c.u=v,c.R=!0,Ta(c,null)}function Ta(c,p){c.F=Date.now(),Ti(c),c.B=Me(c.A);var v=c.B,b=c.S;Array.isArray(b)||(b=[String(b)]),wa(v.i,"t",b),c.C=0,v=c.j.L,c.h=new ai,c.g=ac(c.j,v?p:null,!c.u),c.P>0&&(c.O=new De(y(c.Y,c,c.g),c.P)),p=c.V,v=c.g,b=c.ba;var L="readystatechange";Array.isArray(L)||(L&&(qo[0]=L.toString()),L=qo);for(let H=0;H<L.length;H++){const it=he(v,L[H],b||p.handleEvent,!1,p.h||p);if(!it)break;p.g[it.key]=it}p=c.J?O(c.J):{},c.u?(c.v||(c.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",c.g.ea(c.B,c.v,c.u,p)):(c.v="GET",c.g.ea(c.B,c.v,null,p)),pi(),Df(c.i,c.v,c.B,c.l,c.S,c.u)}si.prototype.ba=function(c){c=c.target;const p=this.O;p&&ui(c)==3?p.j():this.Y(c)},si.prototype.Y=function(c){try{if(c==this.g)t:{const Ct=ui(this.g),we=this.g.ya(),Jt=this.g.ca();if(!(Ct<3)&&(Ct!=3||this.g&&(this.h.h||this.g.la()||Je(this.g)))){this.K||Ct!=4||we==7||(we==8||Jt<=0?pi(3):pi(2)),Ai(this);var p=this.g.ca();this.X=p;var v=Vf(this);if(this.o=p==200,Hu(this.i,this.v,this.B,this.l,this.S,Ct,p),this.o){if(this.U&&!this.L){e:{if(this.g){var b,L=this.g;if((b=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!w(b)){var H=b;break e}}H=null}if(c=H)vi(this.i,this.l,c,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,bi(this,c);else{this.o=!1,this.m=3,Ce(12),In(this),Un(this);break t}}if(this.R){c=!0;let ge;for(;!this.K&&this.C<v.length;)if(ge=Ku(this,v),ge==He){Ct==4&&(this.m=4,Ce(14),c=!1),vi(this.i,this.l,null,"[Incomplete Response]");break}else if(ge==Ve){this.m=4,Ce(15),vi(this.i,this.l,v,"[Invalid Chunk]"),c=!1;break}else vi(this.i,this.l,ge,null),bi(this,ge);if(Qu(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Ct!=4||v.length!=0||this.h.h||(this.m=1,Ce(16),c=!1),this.o=this.o&&c,!c)vi(this.i,this.l,v,"[Invalid Chunked Response]"),In(this),Un(this);else if(v.length>0&&!this.W){this.W=!0;var it=this.j;it.g==this&&it.aa&&!it.P&&(it.j.info("Great, no buffering proxy detected. Bytes received: "+v.length),al(it),it.P=!0,Ce(11))}}else vi(this.i,this.l,v,null),bi(this,v);Ct==4&&In(this),this.o&&!this.K&&(Ct==4?nc(this.j,this):(this.o=!1,Ti(this)))}else Xi(this.g),p==400&&v.indexOf("Unknown SID")>0?(this.m=3,Ce(12)):(this.m=0,Ce(13)),In(this),Un(this)}}}catch{}finally{}};function Vf(c){if(!Qu(c))return c.g.la();const p=Je(c.g);if(p==="")return"";let v="";const b=p.length,L=ui(c.g)==4;if(!c.h.i){if(typeof TextDecoder>"u")return In(c),Un(c),"";c.h.i=new h.TextDecoder}for(let H=0;H<b;H++)c.h.h=!0,v+=c.h.i.decode(p[H],{stream:!(L&&H==b-1)});return p.length=0,c.h.g+=v,c.C=0,c.h.g}function Qu(c){return c.g?c.v=="GET"&&c.M!=2&&c.j.Aa:!1}function Ku(c,p){var v=c.C,b=p.indexOf(`
`,v);return b==-1?He:(v=Number(p.substring(v,b)),isNaN(v)?Ve:(b+=1,b+v>p.length?He:(p=p.slice(b,b+v),c.C=b+v,p)))}si.prototype.cancel=function(){this.K=!0,In(this)};function Ti(c){c.T=Date.now()+c.H,Aa(c,c.H)}function Aa(c,p){if(c.D!=null)throw Error("WatchDog timer not null");c.D=_i(y(c.aa,c),p)}function Ai(c){c.D&&(h.clearTimeout(c.D),c.D=null)}si.prototype.aa=function(){this.D=null;const c=Date.now();c-this.T>=0?(Ts(this.i,this.B),this.M!=2&&(pi(),Ce(17)),In(this),this.m=2,Un(this)):Aa(this,this.T-c)};function Un(c){c.j.I==0||c.K||nc(c.j,c)}function In(c){Ai(c);var p=c.O;p&&typeof p.dispose=="function"&&p.dispose(),c.O=null,Fo(c.V),c.g&&(p=c.g,c.g=null,p.abort(),p.dispose())}function bi(c,p){try{var v=c.j;if(v.I!=0&&(v.g==c||wi(v.h,c))){if(!c.L&&wi(v.h,c)&&v.I==3){try{var b=v.Ba.g.parse(p)}catch{b=null}if(Array.isArray(b)&&b.length==3){var L=b;if(L[0]==0){t:if(!v.v){if(v.g)if(v.g.F+3e3<c.F)Ca(v),Cr(v);else break t;Vs(v),Ce(18)}}else v.xa=L[1],0<v.xa-v.K&&L[2]<37500&&v.F&&v.A==0&&!v.C&&(v.C=_i(y(v.Va,v),6e3));Si(v.h)<=1&&v.ta&&(v.ta=void 0)}else Vi(v,11)}else if((c.L||v.g==c)&&Ca(v),!w(p))for(L=v.Ba.g.parse(p),p=0;p<L.length;p++){let Jt=L[p];const ge=Jt[0];if(!(ge<=v.K))if(v.K=ge,Jt=Jt[1],v.I==2)if(Jt[0]=="c"){v.M=Jt[1],v.ba=Jt[2];const qn=Jt[3];qn!=null&&(v.ka=qn,v.j.info("VER="+v.ka));const Ni=Jt[4];Ni!=null&&(v.za=Ni,v.j.info("SVER="+v.za));const ci=Jt[5];ci!=null&&typeof ci=="number"&&ci>0&&(b=1.5*ci,v.O=b,v.j.info("backChannelRequestTimeoutMs_="+b)),b=v;const hi=c.g;if(hi){const Ns=hi.g?hi.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ns){var H=b.h;H.g||Ns.indexOf("spdy")==-1&&Ns.indexOf("quic")==-1&&Ns.indexOf("h2")==-1||(H.j=H.l,H.g=new Set,H.h&&(Yo(H,H.h),H.h=null))}if(b.G){const Va=hi.g?hi.g.getResponseHeader("X-HTTP-Session-Id"):null;Va&&(b.wa=Va,ee(b.J,b.G,Va))}}v.I=3,v.l&&v.l.ra(),v.aa&&(v.T=Date.now()-c.F,v.j.info("Handshake RTT: "+v.T+"ms")),b=v;var it=c;if(b.na=sc(b,b.L?b.ba:null,b.W),it.L){Xo(b.h,it);var Ct=it,we=b.O;we&&(Ct.H=we),Ct.D&&(Ai(Ct),Ti(Ct)),b.g=it}else tc(b);v.i.length>0&&Ci(v)}else Jt[0]!="stop"&&Jt[0]!="close"||Vi(v,7);else v.I==3&&(Jt[0]=="stop"||Jt[0]=="close"?Jt[0]=="stop"?Vi(v,7):rl(v):Jt[0]!="noop"&&v.l&&v.l.qa(Jt),v.A=0)}}pi(4)}catch{}}var Ne=class{constructor(c,p){this.g=c,this.map=p}};function Qo(c){this.l=c||10,h.PerformanceNavigationTiming?(c=h.performance.getEntriesByType("navigation"),c=c.length>0&&(c[0].nextHopProtocol=="hq"||c[0].nextHopProtocol=="h2")):c=!!(h.chrome&&h.chrome.loadTimes&&h.chrome.loadTimes()&&h.chrome.loadTimes().wasFetchedViaSpdy),this.j=c?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function Ko(c){return c.h?!0:c.g?c.g.size>=c.j:!1}function Si(c){return c.h?1:c.g?c.g.size:0}function wi(c,p){return c.h?c.h==p:c.g?c.g.has(p):!1}function Yo(c,p){c.g?c.g.add(p):c.h=p}function Xo(c,p){c.h&&c.h==p?c.h=null:c.g&&c.g.has(p)&&c.g.delete(p)}Qo.prototype.cancel=function(){if(this.i=Zo(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const c of this.g.values())c.cancel();this.g.clear()}};function Zo(c){if(c.h!=null)return c.i.concat(c.h.G);if(c.g!=null&&c.g.size!==0){let p=c.i;for(const v of c.g.values())p=p.concat(v.G);return p}return U(c.i)}var Yu=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ba(c,p){if(c){c=c.split("&");for(let v=0;v<c.length;v++){const b=c[v].indexOf("=");let L,H=null;b>=0?(L=c[v].substring(0,b),H=c[v].substring(b+1)):L=c[v],p(L,H?decodeURIComponent(H.replace(/\+/g," ")):"")}}}function Rn(c){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;c instanceof Rn?(this.l=c.l,Ge(this,c.j),this.o=c.o,this.g=c.g,br(this,c.u),this.h=c.h,Jo(this,$u(c.i)),this.m=c.m):c&&(p=String(c).match(Yu))?(this.l=!1,Ge(this,p[1]||"",!0),this.o=Ii(p[2]||""),this.g=Ii(p[3]||"",!0),br(this,p[4]),this.h=Ii(p[5]||"",!0),Jo(this,p[6]||"",!0),this.m=Ii(p[7]||"")):(this.l=!1,this.i=new wr(null,this.l))}Rn.prototype.toString=function(){const c=[];var p=this.j;p&&c.push(ws(p,Sa,!0),":");var v=this.g;return(v||p=="file")&&(c.push("//"),(p=this.o)&&c.push(ws(p,Sa,!0),"@"),c.push(Ki(v).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),v=this.u,v!=null&&c.push(":",String(v))),(v=this.h)&&(this.g&&v.charAt(0)!="/"&&c.push("/"),c.push(ws(v,v.charAt(0)=="/"?$o:Xu,!0))),(v=this.i.toString())&&c.push("?",v),(v=this.m)&&c.push("#",ws(v,Zu)),c.join("")},Rn.prototype.resolve=function(c){const p=Me(this);let v=!!c.j;v?Ge(p,c.j):v=!!c.o,v?p.o=c.o:v=!!c.g,v?p.g=c.g:v=c.u!=null;var b=c.h;if(v)br(p,c.u);else if(v=!!c.h){if(b.charAt(0)!="/")if(this.g&&!this.h)b="/"+b;else{var L=p.h.lastIndexOf("/");L!=-1&&(b=p.h.slice(0,L+1)+b)}if(L=b,L==".."||L==".")b="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){b=L.lastIndexOf("/",0)==0,L=L.split("/");const H=[];for(let it=0;it<L.length;){const Ct=L[it++];Ct=="."?b&&it==L.length&&H.push(""):Ct==".."?((H.length>1||H.length==1&&H[0]!="")&&H.pop(),b&&it==L.length&&H.push("")):(H.push(Ct),b=!0)}b=H.join("/")}else b=L}return v?p.h=b:v=c.i.toString()!=="",v?Jo(p,$u(c.i)):v=!!c.m,v&&(p.m=c.m),p};function Me(c){return new Rn(c)}function Ge(c,p,v){c.j=v?Ii(p,!0):p,c.j&&(c.j=c.j.replace(/:$/,""))}function br(c,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);c.u=p}else c.u=null}function Jo(c,p,v){p instanceof wr?(c.i=p,Ia(c.i,c.l)):(v||(p=ws(p,Sr)),c.i=new wr(p,c.l))}function ee(c,p,v){c.i.set(p,v)}function Ss(c){return ee(c,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),c}function Ii(c,p){return c?p?decodeURI(c.replace(/%25/g,"%2525")):decodeURIComponent(c):""}function ws(c,p,v){return typeof c=="string"?(c=encodeURI(c).replace(p,yn),v&&(c=c.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),c):null}function yn(c){return c=c.charCodeAt(0),"%"+(c>>4&15).toString(16)+(c&15).toString(16)}var Sa=/[#\/\?@]/g,Xu=/[#\?:]/g,$o=/[#\?]/g,Sr=/[#\?@]/g,Zu=/#/g;function wr(c,p){this.h=this.g=null,this.i=c||null,this.j=!!p}function _n(c){c.g||(c.g=new Map,c.h=0,c.i&&ba(c.i,function(p,v){c.add(decodeURIComponent(p.replace(/\+/g," ")),v)}))}s=wr.prototype,s.add=function(c,p){_n(this),this.i=null,c=Ir(this,c);let v=this.g.get(c);return v||this.g.set(c,v=[]),v.push(p),this.h+=1,this};function Ju(c,p){_n(c),p=Ir(c,p),c.g.has(p)&&(c.i=null,c.h-=c.g.get(p).length,c.g.delete(p))}function Wo(c,p){return _n(c),p=Ir(c,p),c.g.has(p)}s.forEach=function(c,p){_n(this),this.g.forEach(function(v,b){v.forEach(function(L){c.call(p,L,b,this)},this)},this)};function tl(c,p){_n(c);let v=[];if(typeof p=="string")Wo(c,p)&&(v=v.concat(c.g.get(Ir(c,p))));else for(c=Array.from(c.g.values()),p=0;p<c.length;p++)v=v.concat(c[p]);return v}s.set=function(c,p){return _n(this),this.i=null,c=Ir(this,c),Wo(this,c)&&(this.h-=this.g.get(c).length),this.g.set(c,[p]),this.h+=1,this},s.get=function(c,p){return c?(c=tl(this,c),c.length>0?String(c[0]):p):p};function wa(c,p,v){Ju(c,p),v.length>0&&(c.i=null,c.g.set(Ir(c,p),U(v)),c.h+=v.length)}s.toString=function(){if(this.i)return this.i;if(!this.g)return"";const c=[],p=Array.from(this.g.keys());for(let b=0;b<p.length;b++){var v=p[b];const L=Ki(v);v=tl(this,v);for(let H=0;H<v.length;H++){let it=L;v[H]!==""&&(it+="="+Ki(v[H])),c.push(it)}}return this.i=c.join("&")};function $u(c){const p=new wr;return p.i=c.i,c.g&&(p.g=new Map(c.g),p.h=c.h),p}function Ir(c,p){return p=String(p),c.j&&(p=p.toLowerCase()),p}function Ia(c,p){p&&!c.j&&(_n(c),c.i=null,c.g.forEach(function(v,b){const L=b.toLowerCase();b!=L&&(Ju(this,b),wa(this,L,v))},c)),c.j=p}function oi(c,p){const v=new ri;if(h.Image){const b=new Image;b.onload=E(jn,v,"TestLoadImage: loaded",!0,p,b),b.onerror=E(jn,v,"TestLoadImage: error",!1,p,b),b.onabort=E(jn,v,"TestLoadImage: abort",!1,p,b),b.ontimeout=E(jn,v,"TestLoadImage: timeout",!1,p,b),h.setTimeout(function(){b.ontimeout&&b.ontimeout()},1e4),b.src=c}else p(!1)}function el(c,p){const v=new ri,b=new AbortController,L=setTimeout(()=>{b.abort(),jn(v,"TestPingServer: timeout",!1,p)},1e4);fetch(c,{signal:b.signal}).then(H=>{clearTimeout(L),H.ok?jn(v,"TestPingServer: ok",!0,p):jn(v,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),jn(v,"TestPingServer: error",!1,p)})}function jn(c,p,v,b,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),b(v)}catch{}}function Rr(){this.g=new Uu}function Ri(c){this.i=c.Sb||null,this.h=c.ab||!1}A(Ri,ju),Ri.prototype.g=function(){return new Is(this.i,this.h)};function Is(c,p){bt.call(this),this.H=c,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}A(Is,bt),s=Is.prototype,s.open=function(c,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=c,this.D=p,this.readyState=1,li(this)},s.send=function(c){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};c&&(p.body=c),(this.H||h).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},s.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,xr(this)),this.readyState=0},s.Pa=function(c){if(this.g&&(this.l=c,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=c.headers,this.readyState=2,li(this)),this.g&&(this.readyState=3,li(this),this.g)))if(this.responseType==="arraybuffer")c.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof h.ReadableStream<"u"&&"body"in c){if(this.j=c.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Ra(this)}else c.text().then(this.Oa.bind(this),this.ga.bind(this))};function Ra(c){c.j.read().then(c.Ma.bind(c)).catch(c.ga.bind(c))}s.Ma=function(c){if(this.g){if(this.o&&c.value)this.response.push(c.value);else if(!this.o){var p=c.value?c.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!c.done}))&&(this.response=this.responseText+=p)}c.done?xr(this):li(this),this.readyState==3&&Ra(this)}},s.Oa=function(c){this.g&&(this.response=this.responseText=c,xr(this))},s.Na=function(c){this.g&&(this.response=c,xr(this))},s.ga=function(){this.g&&xr(this)};function xr(c){c.readyState=4,c.l=null,c.j=null,c.B=null,li(c)}s.setRequestHeader=function(c,p){this.A.append(c,p)},s.getResponseHeader=function(c){return this.h&&this.h.get(c.toLowerCase())||""},s.getAllResponseHeaders=function(){if(!this.h)return"";const c=[],p=this.h.entries();for(var v=p.next();!v.done;)v=v.value,c.push(v[0]+": "+v[1]),v=p.next();return c.join(`\r
`)};function li(c){c.onreadystatechange&&c.onreadystatechange.call(c)}Object.defineProperty(Is.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(c){this.m=c?"include":"same-origin"}});function Bn(c){let p="";return Pt(c,function(v,b){p+=b,p+=":",p+=v,p+=`\r
`}),p}function Rs(c,p,v){t:{for(b in v){var b=!1;break t}b=!0}b||(v=Bn(v),typeof c=="string"?v!=null&&Ki(v):ee(c,p,v))}function ae(c){bt.call(this),this.headers=new Map,this.L=c||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}A(ae,bt);var xi=/^https?$/i,nl=["POST","PUT"];s=ae.prototype,s.Fa=function(c){this.H=c},s.ea=function(c,p,v,b){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+c);p=p?p.toUpperCase():"GET",this.D=c,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():Go.g(),this.g.onreadystatechange=S(y(this.Ca,this));try{this.B=!0,this.g.open(p,String(c),!0),this.B=!1}catch(H){xs(this,H);return}if(c=v||"",v=new Map(this.headers),b)if(Object.getPrototypeOf(b)===Object.prototype)for(var L in b)v.set(L,b[L]);else if(typeof b.keys=="function"&&typeof b.get=="function")for(const H of b.keys())v.set(H,b.get(H));else throw Error("Unknown input type for opt_headers: "+String(b));b=Array.from(v.keys()).find(H=>H.toLowerCase()=="content-type"),L=h.FormData&&c instanceof h.FormData,!(Array.prototype.indexOf.call(nl,p,void 0)>=0)||b||L||v.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[H,it]of v)this.g.setRequestHeader(H,it);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(c),this.v=!1}catch(H){xs(this,H)}};function xs(c,p){c.h=!1,c.g&&(c.j=!0,c.g.abort(),c.j=!1),c.l=p,c.o=5,il(c),Yi(c)}function il(c){c.A||(c.A=!0,dt(c,"complete"),dt(c,"error"))}s.abort=function(c){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=c||7,dt(this,"complete"),dt(this,"abort"),Yi(this))},s.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Yi(this,!0)),ae.Z.N.call(this)},s.Ca=function(){this.u||(this.B||this.v||this.j?Ds(this):this.Xa())},s.Xa=function(){Ds(this)};function Ds(c){if(c.h&&typeof u<"u"){if(c.v&&ui(c)==4)setTimeout(c.Ca.bind(c),0);else if(dt(c,"readystatechange"),ui(c)==4){c.h=!1;try{const H=c.ca();t:switch(H){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break t;default:p=!1}var v;if(!(v=p)){var b;if(b=H===0){let it=String(c.D).match(Yu)[1]||null;!it&&h.self&&h.self.location&&(it=h.self.location.protocol.slice(0,-1)),b=!xi.test(it?it.toLowerCase():"")}v=b}if(v)dt(c,"complete"),dt(c,"success");else{c.o=6;try{var L=ui(c)>2?c.g.statusText:""}catch{L=""}c.l=L+" ["+c.ca()+"]",il(c)}}finally{Yi(c)}}}}function Yi(c,p){if(c.g){c.m&&(clearTimeout(c.m),c.m=null);const v=c.g;c.g=null,p||dt(c,"ready");try{v.onreadystatechange=null}catch{}}}s.isActive=function(){return!!this.g};function ui(c){return c.g?c.g.readyState:0}s.ca=function(){try{return ui(this)>2?this.g.status:-1}catch{return-1}},s.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},s.La=function(c){if(this.g){var p=this.g.responseText;return c&&p.indexOf(c)==0&&(p=p.substring(c.length)),xf(p)}};function Je(c){try{if(!c.g)return null;if("response"in c.g)return c.g.response;switch(c.F){case"":case"text":return c.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in c.g)return c.g.mozResponseArrayBuffer}return null}catch{return null}}function Xi(c){const p={};c=(c.g&&ui(c)>=2&&c.g.getAllResponseHeaders()||"").split(`\r
`);for(let b=0;b<c.length;b++){if(w(c[b]))continue;var v=Gu(c[b]);const L=v[0];if(v=v[1],typeof v!="string")continue;v=v.trim();const H=p[L]||[];p[L]=H,H.push(v)}kt(p,function(b){return b.join(", ")})}s.ya=function(){return this.o},s.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function Di(c,p,v){return v&&v.internalChannelParams&&v.internalChannelParams[c]||p}function Dr(c){this.za=0,this.i=[],this.j=new ri,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=Di("failFast",!1,c),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=Di("baseRetryDelayMs",5e3,c),this.Za=Di("retryDelaySeedMs",1e4,c),this.Ta=Di("forwardChannelMaxRetries",2,c),this.va=Di("forwardChannelRequestTimeoutMs",2e4,c),this.ma=c&&c.xmlHttpFactory||void 0,this.Ua=c&&c.Rb||void 0,this.Aa=c&&c.useFetchStreams||!1,this.O=void 0,this.L=c&&c.supportsCrossDomainXhr||!1,this.M="",this.h=new Qo(c&&c.concurrentRequestLimit),this.Ba=new Rr,this.S=c&&c.fastHandshake||!1,this.R=c&&c.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=c&&c.Pb||!1,c&&c.ua&&this.j.ua(),c&&c.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&c&&c.detectBufferingProxy||!1,this.ia=void 0,c&&c.longPollingTimeout&&c.longPollingTimeout>0&&(this.ia=c.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}s=Dr.prototype,s.ka=8,s.I=1,s.connect=function(c,p,v,b){Ce(0),this.W=c,this.H=p||{},v&&b!==void 0&&(this.H.OSID=v,this.H.OAID=b),this.F=this.X,this.J=sc(this,null,this.W),Ci(this)};function rl(c){if(xa(c),c.I==3){var p=c.V++,v=Me(c.J);if(ee(v,"SID",c.M),ee(v,"RID",p),ee(v,"TYPE","terminate"),Cs(c,v),p=new si(c,c.j,p),p.M=2,p.A=Ss(Me(v)),v=!1,h.navigator&&h.navigator.sendBeacon)try{v=h.navigator.sendBeacon(p.A.toString(),"")}catch{}!v&&h.Image&&(new Image().src=p.A,v=!0),v||(p.g=ac(p.j,null),p.g.ea(p.A)),p.F=Date.now(),Ti(p)}rc(c)}function Cr(c){c.g&&(al(c),c.g.cancel(),c.g=null)}function xa(c){Cr(c),c.v&&(h.clearTimeout(c.v),c.v=null),Ca(c),c.h.cancel(),c.m&&(typeof c.m=="number"&&h.clearTimeout(c.m),c.m=null)}function Ci(c){if(!Ko(c.h)&&!c.m){c.m=!0;var p=c.Ea;St||I(),yt||(St(),yt=!0),D.add(p,c),c.D=0}}function Da(c,p){return Si(c.h)>=c.h.j-(c.m?1:0)?!1:c.m?(c.i=p.G.concat(c.i),!0):c.I==1||c.I==2||c.D>=(c.Sa?0:c.Ta)?!1:(c.m=_i(y(c.Ea,c,p),ic(c,c.D)),c.D++,!0)}s.Ea=function(c){if(this.m)if(this.m=null,this.I==1){if(!c){this.V=Math.floor(Math.random()*1e5),c=this.V++;const L=new si(this,this.j,c);let H=this.o;if(this.U&&(H?(H=O(H),ot(H,this.U)):H=this.U),this.u!==null||this.R||(L.J=H,H=null),this.S)t:{for(var p=0,v=0;v<this.i.length;v++){e:{var b=this.i[v];if("__data__"in b.map&&(b=b.map.__data__,typeof b=="string")){b=b.length;break e}b=void 0}if(b===void 0)break;if(p+=b,p>4096){p=v;break t}if(p===4096||v===this.i.length-1){p=v+1;break t}}p=1e3}else p=1e3;p=Wu(this,L,p),v=Me(this.J),ee(v,"RID",c),ee(v,"CVER",22),this.G&&ee(v,"X-HTTP-Session-Id",this.G),Cs(this,v),H&&(this.R?p="headers="+Ki(Bn(H))+"&"+p:this.u&&Rs(v,this.u,H)),Yo(this.h,L),this.Ra&&ee(v,"TYPE","init"),this.S?(ee(v,"$req",p),ee(v,"SID","null"),L.U=!0,Ei(L,v,null)):Ei(L,v,p),this.I=2}}else this.I==3&&(c?sl(this,c):this.i.length==0||Ko(this.h)||sl(this))};function sl(c,p){var v;p?v=p.l:v=c.V++;const b=Me(c.J);ee(b,"SID",c.M),ee(b,"RID",v),ee(b,"AID",c.K),Cs(c,b),c.u&&c.o&&Rs(b,c.u,c.o),v=new si(c,c.j,v,c.D+1),c.u===null&&(v.J=c.o),p&&(c.i=p.G.concat(c.i)),p=Wu(c,v,1e3),v.H=Math.round(c.va*.5)+Math.round(c.va*.5*Math.random()),Yo(c.h,v),Ei(v,b,p)}function Cs(c,p){c.H&&Pt(c.H,function(v,b){ee(p,b,v)}),c.l&&Pt({},function(v,b){ee(p,b,v)})}function Wu(c,p,v){v=Math.min(c.i.length,v);const b=c.l?y(c.l.Ka,c.l,c):null;t:{var L=c.i;let Ct=-1;for(;;){const we=["count="+v];Ct==-1?v>0?(Ct=L[0].g,we.push("ofs="+Ct)):Ct=0:we.push("ofs="+Ct);let Jt=!0;for(let ge=0;ge<v;ge++){var H=L[ge].g;const qn=L[ge].map;if(H-=Ct,H<0)Ct=Math.max(0,L[ge].g-100),Jt=!1;else try{H="req"+H+"_"||"";try{var it=qn instanceof Map?qn:Object.entries(qn);for(const[Ni,ci]of it){let hi=ci;m(ci)&&(hi=Ar(ci)),we.push(H+Ni+"="+encodeURIComponent(hi))}}catch(Ni){throw we.push(H+"type="+encodeURIComponent("_badmap")),Ni}}catch{b&&b(qn)}}if(Jt){it=we.join("&");break t}}it=void 0}return c=c.i.splice(0,v),p.G=c,it}function tc(c){if(!c.g&&!c.v){c.Y=1;var p=c.Da;St||I(),yt||(St(),yt=!0),D.add(p,c),c.A=0}}function Vs(c){return c.g||c.v||c.A>=3?!1:(c.Y++,c.v=_i(y(c.Da,c),ic(c,c.A)),c.A++,!0)}s.Da=function(){if(this.v=null,ec(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var c=4*this.T;this.j.info("BP detection timer enabled: "+c),this.B=_i(y(this.Wa,this),c)}},s.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Ce(10),Cr(this),ec(this))};function al(c){c.B!=null&&(h.clearTimeout(c.B),c.B=null)}function ec(c){c.g=new si(c,c.j,"rpc",c.Y),c.u===null&&(c.g.J=c.o),c.g.P=0;var p=Me(c.na);ee(p,"RID","rpc"),ee(p,"SID",c.M),ee(p,"AID",c.K),ee(p,"CI",c.F?"0":"1"),!c.F&&c.ia&&ee(p,"TO",c.ia),ee(p,"TYPE","xmlhttp"),Cs(c,p),c.u&&c.o&&Rs(p,c.u,c.o),c.O&&(c.g.H=c.O);var v=c.g;c=c.ba,v.M=1,v.A=Ss(Me(p)),v.u=null,v.R=!0,Ta(v,c)}s.Va=function(){this.C!=null&&(this.C=null,Cr(this),Vs(this),Ce(19))};function Ca(c){c.C!=null&&(h.clearTimeout(c.C),c.C=null)}function nc(c,p){var v=null;if(c.g==p){Ca(c),al(c),c.g=null;var b=2}else if(wi(c.h,p))v=p.G,Xo(c.h,p),b=1;else return;if(c.I!=0){if(p.o)if(b==1){v=p.u?p.u.length:0,p=Date.now()-p.F;var L=c.D;b=Ea(),dt(b,new yi(b,v)),Ci(c)}else tc(c);else if(L=p.m,L==3||L==0&&p.X>0||!(b==1&&Da(c,p)||b==2&&Vs(c)))switch(v&&v.length>0&&(p=c.h,p.i=p.i.concat(v)),L){case 1:Vi(c,5);break;case 4:Vi(c,10);break;case 3:Vi(c,6);break;default:Vi(c,2)}}}function ic(c,p){let v=c.Qa+Math.floor(Math.random()*c.Za);return c.isActive()||(v*=2),v*p}function Vi(c,p){if(c.j.info("Error code "+p),p==2){var v=y(c.bb,c),b=c.Ua;const L=!b;b=new Rn(b||"//www.google.com/images/cleardot.gif"),h.location&&h.location.protocol=="http"||Ge(b,"https"),Ss(b),L?oi(b.toString(),v):el(b.toString(),v)}else Ce(2);c.I=0,c.l&&c.l.pa(p),rc(c),xa(c)}s.bb=function(c){c?(this.j.info("Successfully pinged google.com"),Ce(2)):(this.j.info("Failed to ping google.com"),Ce(1))};function rc(c){if(c.I=0,c.ja=[],c.l){const p=Zo(c.h);(p.length!=0||c.i.length!=0)&&(W(c.ja,p),W(c.ja,c.i),c.h.i.length=0,U(c.i),c.i.length=0),c.l.oa()}}function sc(c,p,v){var b=v instanceof Rn?Me(v):new Rn(v);if(b.g!="")p&&(b.g=p+"."+b.g),br(b,b.u);else{var L=h.location;b=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const H=new Rn(null);b&&Ge(H,b),p&&(H.g=p),L&&br(H,L),v&&(H.h=v),b=H}return v=c.G,p=c.wa,v&&p&&ee(b,v,p),ee(b,"VER",c.ka),Cs(c,b),b}function ac(c,p,v){if(p&&!c.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=c.Aa&&!c.ma?new ae(new Ri({ab:v})):new ae(c.ma),p.Fa(c.L),p}s.isActive=function(){return!!this.l&&this.l.isActive(this)};function oc(){}s=oc.prototype,s.ra=function(){},s.qa=function(){},s.pa=function(){},s.oa=function(){},s.isActive=function(){return!0},s.Ka=function(){};function Vr(){}Vr.prototype.g=function(c,p){return new fn(c,p)};function fn(c,p){bt.call(this),this.g=new Dr(p),this.l=c,this.h=p&&p.messageUrlParams||null,c=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(c?c["X-Client-Protocol"]="webchannel":c={"X-Client-Protocol":"webchannel"}),this.g.o=c,c=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(c?c["X-WebChannel-Content-Type"]=p.messageContentType:c={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(c?c["X-WebChannel-Client-Profile"]=p.sa:c={"X-WebChannel-Client-Profile":p.sa}),this.g.U=c,(c=p&&p.Qb)&&!w(c)&&(this.g.u=c),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!w(p)&&(this.g.G=p,c=this.h,c!==null&&p in c&&(c=this.h,p in c&&delete c[p])),this.j=new Zi(this)}A(fn,bt),fn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},fn.prototype.close=function(){rl(this.g)},fn.prototype.o=function(c){var p=this.g;if(typeof c=="string"){var v={};v.__data__=c,c=v}else this.v&&(v={},v.__data__=Ar(c),c=v);p.i.push(new Ne(p.Ya++,c)),p.I==3&&Ci(p)},fn.prototype.N=function(){this.g.l=null,delete this.j,rl(this.g),delete this.g,fn.Z.N.call(this)};function lc(c){Ze.call(this),c.__headers__&&(this.headers=c.__headers__,this.statusCode=c.__status__,delete c.__headers__,delete c.__status__);var p=c.__sm__;if(p){t:{for(const v in p){c=v;break t}c=void 0}(this.i=c)&&(c=this.i,p=p!==null&&c in p?p[c]:void 0),this.data=p}else this.data=c}A(lc,Ze);function uc(){Ln.call(this),this.status=1}A(uc,Ln);function Zi(c){this.g=c}A(Zi,oc),Zi.prototype.ra=function(){dt(this.g,"a")},Zi.prototype.qa=function(c){dt(this.g,new lc(c))},Zi.prototype.pa=function(c){dt(this.g,new uc)},Zi.prototype.oa=function(){dt(this.g,"b")},Vr.prototype.createWebChannel=Vr.prototype.g,fn.prototype.send=fn.prototype.o,fn.prototype.open=fn.prototype.m,fn.prototype.close=fn.prototype.close,tT=function(){return new Vr},WE=function(){return Ea()},$E=Se,Wm={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},As.NO_ERROR=0,As.TIMEOUT=8,As.HTTP_ERROR=6,Eh=As,Ho.COMPLETE="complete",JE=Ho,Bu.EventType=ii,ii.OPEN="a",ii.CLOSE="b",ii.ERROR="c",ii.MESSAGE="d",bt.prototype.listen=bt.prototype.J,Zl=Bu,ae.prototype.listenOnce=ae.prototype.K,ae.prototype.getLastError=ae.prototype.Ha,ae.prototype.getLastErrorCode=ae.prototype.ya,ae.prototype.getStatus=ae.prototype.ca,ae.prototype.getResponseJson=ae.prototype.La,ae.prototype.getResponseText=ae.prototype.la,ae.prototype.send=ae.prototype.ea,ae.prototype.setWithCredentials=ae.prototype.Fa,ZE=ae}).apply(typeof dh<"u"?dh:typeof self<"u"?self:typeof window<"u"?window:{});const l0="@firebase/firestore",u0="4.9.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rn{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}rn.UNAUTHENTICATED=new rn(null),rn.GOOGLE_CREDENTIALS=new rn("google-credentials-uid"),rn.FIRST_PARTY=new rn("first-party-uid"),rn.MOCK_USER=new rn("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Lo="12.3.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ua=new FE("@firebase/firestore");function mo(){return ua.logLevel}function et(s,...t){if(ua.logLevel<=Qt.DEBUG){const n=t.map(Vg);ua.debug(`Firestore (${Lo}): ${s}`,...n)}}function mn(s,...t){if(ua.logLevel<=Qt.ERROR){const n=t.map(Vg);ua.error(`Firestore (${Lo}): ${s}`,...n)}}function ca(s,...t){if(ua.logLevel<=Qt.WARN){const n=t.map(Vg);ua.warn(`Firestore (${Lo}): ${s}`,...n)}}function Vg(s){if(typeof s=="string")return s;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return(function(n){return JSON.stringify(n)})(s)}catch{return s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ft(s,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,eT(s,r,n)}function eT(s,t,n){let r=`FIRESTORE (${Lo}) INTERNAL ASSERTION FAILED: ${t} (ID: ${s.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw mn(r),new Error(r)}function pt(s,t,n,r){let o="Unexpected state";typeof n=="string"?o=n:r=n,s||eT(t,o,r)}function Rt(s,t){return s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class nt extends ko{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(){this.promise=new Promise(((t,n)=>{this.resolve=t,this.reject=n}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nT{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class Lw{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable((()=>n(rn.UNAUTHENTICATED)))}shutdown(){}}class Uw{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable((()=>n(this.token.user)))}shutdown(){this.changeListener=null}}class jw{constructor(t){this.t=t,this.currentUser=rn.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){pt(this.o===void 0,42304);let r=this.i;const o=g=>this.i!==r?(r=this.i,n(g)):Promise.resolve();let u=new mr;this.o=()=>{this.i++,this.currentUser=this.u(),u.resolve(),u=new mr,t.enqueueRetryable((()=>o(this.currentUser)))};const h=()=>{const g=u;t.enqueueRetryable((async()=>{await g.promise,await o(this.currentUser)}))},m=g=>{et("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=g,this.o&&(this.auth.addAuthTokenListener(this.o),h())};this.t.onInit((g=>m(g))),setTimeout((()=>{if(!this.auth){const g=this.t.getImmediate({optional:!0});g?m(g):(et("FirebaseAuthCredentialsProvider","Auth not yet detected"),u.resolve(),u=new mr)}}),0),h()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then((r=>this.i!==t?(et("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(pt(typeof r.accessToken=="string",31837,{l:r}),new nT(r.accessToken,this.currentUser)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return pt(t===null||typeof t=="string",2055,{h:t}),new rn(t)}}class Bw{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=rn.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class qw{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new Bw(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable((()=>n(rn.FIRST_PARTY)))}shutdown(){}invalidateToken(){}}class c0{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Fw{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Tw(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){pt(this.o===void 0,3512);const r=u=>{u.error!=null&&et("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const h=u.token!==this.m;return this.m=u.token,et("FirebaseAppCheckTokenProvider",`Received ${h?"new":"existing"} token.`),h?n(u.token):Promise.resolve()};this.o=u=>{t.enqueueRetryable((()=>r(u)))};const o=u=>{et("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit((u=>o(u))),setTimeout((()=>{if(!this.appCheck){const u=this.V.getImmediate({optional:!0});u?o(u):et("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}}),0)}getToken(){if(this.p)return Promise.resolve(new c0(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then((n=>n?(pt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new c0(n.token)):null)):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hw(s){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(s);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<s;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const o=Hw(40);for(let u=0;u<o.length;++u)r.length<20&&o[u]<n&&(r+=t.charAt(o[u]%62))}return r}}function It(s,t){return s<t?-1:s>t?1:0}function tg(s,t){const n=Math.min(s.length,t.length);for(let r=0;r<n;r++){const o=s.charAt(r),u=t.charAt(r);if(o!==u)return Pm(o)===Pm(u)?It(o,u):Pm(o)?1:-1}return It(s.length,t.length)}const Gw=55296,Qw=57343;function Pm(s){const t=s.charCodeAt(0);return t>=Gw&&t<=Qw}function bo(s,t,n){return s.length===t.length&&s.every(((r,o)=>n(r,t[o])))}function iT(s){return s+"\0"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0="__name__";class ki{constructor(t,n,r){n===void 0?n=0:n>t.length&&ft(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&ft(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return ki.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof ki?t.forEach((r=>{n.push(r)})):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let o=0;o<r;o++){const u=ki.compareSegments(t.get(o),n.get(o));if(u!==0)return u}return It(t.length,n.length)}static compareSegments(t,n){const r=ki.isNumericId(t),o=ki.isNumericId(n);return r&&!o?-1:!r&&o?1:r&&o?ki.extractNumericId(t).compare(ki.extractNumericId(n)):tg(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return os.fromString(t.substring(4,t.length-2))}}class Wt extends ki{construct(t,n,r){return new Wt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new nt(K.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter((o=>o.length>0)))}return new Wt(n)}static emptyPath(){return new Wt([])}}const Kw=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ee extends ki{construct(t,n,r){return new Ee(t,n,r)}static isValidIdentifier(t){return Kw.test(t)}canonicalString(){return this.toArray().map((t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ee.isValidIdentifier(t)||(t="`"+t+"`"),t))).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===h0}static keyField(){return new Ee([h0])}static fromServerFormat(t){const n=[];let r="",o=0;const u=()=>{if(r.length===0)throw new nt(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let h=!1;for(;o<t.length;){const m=t[o];if(m==="\\"){if(o+1===t.length)throw new nt(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const g=t[o+1];if(g!=="\\"&&g!=="."&&g!=="`")throw new nt(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=g,o+=2}else m==="`"?(h=!h,o++):m!=="."||h?(r+=m,o++):(u(),o++)}if(u(),h)throw new nt(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new Ee(n)}static emptyPath(){return new Ee([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lt{constructor(t){this.path=t}static fromPath(t){return new lt(Wt.fromString(t))}static fromName(t){return new lt(Wt.fromString(t).popFirst(5))}static empty(){return new lt(Wt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&Wt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return Wt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new lt(new Wt(t.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rT(s,t,n){if(!n)throw new nt(K.INVALID_ARGUMENT,`Function ${s}() cannot be called with an empty ${t}.`)}function Yw(s,t,n,r){if(t===!0&&r===!0)throw new nt(K.INVALID_ARGUMENT,`${s} and ${n} cannot be used together.`)}function f0(s){if(!lt.isDocumentKey(s))throw new nt(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${s} has ${s.length}.`)}function d0(s){if(lt.isDocumentKey(s))throw new nt(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${s} has ${s.length}.`)}function sT(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}function Wh(s){if(s===void 0)return"undefined";if(s===null)return"null";if(typeof s=="string")return s.length>20&&(s=`${s.substring(0,20)}...`),JSON.stringify(s);if(typeof s=="number"||typeof s=="boolean")return""+s;if(typeof s=="object"){if(s instanceof Array)return"an array";{const t=(function(r){return r.constructor?r.constructor.name:null})(s);return t?`a custom ${t} object`:"an object"}}return typeof s=="function"?"a function":ft(12329,{type:typeof s})}function Wn(s,t){if("_delegate"in s&&(s=s._delegate),!(s instanceof t)){if(t.name===s.constructor.name)throw new nt(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wh(s);throw new nt(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return s}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ue(s,t){const n={typeString:s};return t&&(n.value=t),n}function wu(s,t){if(!sT(s))throw new nt(K.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in t)if(t[r]){const o=t[r].typeString,u="value"in t[r]?{value:t[r].value}:void 0;if(!(r in s)){n=`JSON missing required field: '${r}'`;break}const h=s[r];if(o&&typeof h!==o){n=`JSON field '${r}' must be a ${o}.`;break}if(u!==void 0&&h!==u.value){n=`Expected '${r}' field to equal '${u.value}'`;break}}if(n)throw new nt(K.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=-62135596800,g0=1e6;class Yt{static now(){return Yt.fromMillis(Date.now())}static fromDate(t){return Yt.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*g0);return new Yt(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new nt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new nt(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<m0)throw new nt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new nt(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/g0}_compareTo(t){return this.seconds===t.seconds?It(this.nanoseconds,t.nanoseconds):It(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Yt._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(t){if(wu(t,Yt._jsonSchema))return new Yt(t.seconds,t.nanoseconds)}valueOf(){const t=this.seconds-m0;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Yt._jsonSchemaVersion="firestore/timestamp/1.0",Yt._jsonSchema={type:Ue("string",Yt._jsonSchemaVersion),seconds:Ue("number"),nanoseconds:Ue("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{static fromTimestamp(t){return new vt(t)}static min(){return new vt(new Yt(0,0))}static max(){return new vt(new Yt(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fu=-1;class kh{constructor(t,n,r,o){this.indexId=t,this.collectionGroup=n,this.fields=r,this.indexState=o}}function eg(s){return s.fields.find((t=>t.kind===2))}function Zs(s){return s.fields.filter((t=>t.kind!==2))}kh.UNKNOWN_ID=-1;class Th{constructor(t,n){this.fieldPath=t,this.kind=n}}class du{constructor(t,n){this.sequenceNumber=t,this.offset=n}static empty(){return new du(0,kn.min())}}function Xw(s,t){const n=s.toTimestamp().seconds,r=s.toTimestamp().nanoseconds+1,o=vt.fromTimestamp(r===1e9?new Yt(n+1,0):new Yt(n,r));return new kn(o,lt.empty(),t)}function aT(s){return new kn(s.readTime,s.key,fu)}class kn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new kn(vt.min(),lt.empty(),fu)}static max(){return new kn(vt.max(),lt.empty(),fu)}}function Mg(s,t){let n=s.readTime.compareTo(t.readTime);return n!==0?n:(n=lt.comparator(s.documentKey,t.documentKey),n!==0?n:It(s.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oT="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lT{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach((t=>t()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ya(s){if(s.code!==K.FAILED_PRECONDITION||s.message!==oT)throw s;et("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t((n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)}),(n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)}))}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ft(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new k(((r,o)=>{this.nextCallback=u=>{this.wrapSuccess(t,u).next(r,o)},this.catchCallback=u=>{this.wrapFailure(n,u).next(r,o)}}))}toPromise(){return new Promise(((t,n)=>{this.next(t,n)}))}wrapUserFunction(t){try{const n=t();return n instanceof k?n:k.resolve(n)}catch(n){return k.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction((()=>t(n))):k.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction((()=>t(n))):k.reject(n)}static resolve(t){return new k(((n,r)=>{n(t)}))}static reject(t){return new k(((n,r)=>{r(t)}))}static waitFor(t){return new k(((n,r)=>{let o=0,u=0,h=!1;t.forEach((m=>{++o,m.next((()=>{++u,h&&u===o&&n()}),(g=>r(g)))})),h=!0,u===o&&n()}))}static or(t){let n=k.resolve(!1);for(const r of t)n=n.next((o=>o?k.resolve(o):r()));return n}static forEach(t,n){const r=[];return t.forEach(((o,u)=>{r.push(n.call(this,o,u))})),this.waitFor(r)}static mapArray(t,n){return new k(((r,o)=>{const u=t.length,h=new Array(u);let m=0;for(let g=0;g<u;g++){const y=g;n(t[y]).next((E=>{h[y]=E,++m,m===u&&r(h)}),(E=>o(E)))}}))}static doWhile(t,n){return new k(((r,o)=>{const u=()=>{t()===!0?n().next((()=>{u()}),o):r()};u()}))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pn="SimpleDb";class tf{static open(t,n,r,o){try{return new tf(n,t.transaction(o,r))}catch(u){throw new nu(n,u)}}constructor(t,n){this.action=t,this.transaction=n,this.aborted=!1,this.S=new mr,this.transaction.oncomplete=()=>{this.S.resolve()},this.transaction.onabort=()=>{n.error?this.S.reject(new nu(t,n.error)):this.S.resolve()},this.transaction.onerror=r=>{const o=Og(r.target.error);this.S.reject(new nu(t,o))}}get D(){return this.S.promise}abort(t){t&&this.S.reject(t),this.aborted||(et(Pn,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}C(){const t=this.transaction;this.aborted||typeof t.commit!="function"||t.commit()}store(t){const n=this.transaction.objectStore(t);return new Jw(n)}}class ls{static delete(t){return et(Pn,"Removing database:",t),$s(zE().indexedDB.deleteDatabase(t)).toPromise()}static v(){if(!BE())return!1;if(ls.F())return!0;const t=Mh(),n=ls.M(t),r=0<n&&n<10,o=uT(t),u=0<o&&o<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||r||u)}static F(){var t;return typeof process<"u"&&((t=process.__PRIVATE_env)==null?void 0:t.__PRIVATE_USE_MOCK_PERSISTENCE)==="YES"}static O(t,n){return t.store(n)}static M(t){const n=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(r)}constructor(t,n,r){this.name=t,this.version=n,this.N=r,this.B=null,ls.M(Mh())===12.2&&mn("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}async L(t){return this.db||(et(Pn,"Opening database:",this.name),this.db=await new Promise(((n,r)=>{const o=indexedDB.open(this.name,this.version);o.onsuccess=u=>{const h=u.target.result;n(h)},o.onblocked=()=>{r(new nu(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},o.onerror=u=>{const h=u.target.error;h.name==="VersionError"?r(new nt(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):h.name==="InvalidStateError"?r(new nt(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h)):r(new nu(t,h))},o.onupgradeneeded=u=>{et(Pn,'Database "'+this.name+'" requires upgrade from version:',u.oldVersion);const h=u.target.result;this.N.k(h,o.transaction,u.oldVersion,this.version).next((()=>{et(Pn,"Database upgrade to version "+this.version+" complete")}))}}))),this.q&&(this.db.onversionchange=n=>this.q(n)),this.db}$(t){this.q=t,this.db&&(this.db.onversionchange=n=>t(n))}async runTransaction(t,n,r,o){const u=n==="readonly";let h=0;for(;;){++h;try{this.db=await this.L(t);const m=tf.open(this.db,t,u?"readonly":"readwrite",r),g=o(m).next((y=>(m.C(),y))).catch((y=>(m.abort(y),k.reject(y)))).toPromise();return g.catch((()=>{})),await m.D,g}catch(m){const g=m,y=g.name!=="FirebaseError"&&h<3;if(et(Pn,"Transaction failed with error:",g.message,"Retrying:",y),this.close(),!y)return Promise.reject(g)}}}close(){this.db&&this.db.close(),this.db=void 0}}function uT(s){const t=s.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}class Zw{constructor(t){this.U=t,this.K=!1,this.W=null}get isDone(){return this.K}get G(){return this.W}set cursor(t){this.U=t}done(){this.K=!0}j(t){this.W=t}delete(){return $s(this.U.delete())}}class nu extends nt{constructor(t,n){super(K.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ms(s){return s.name==="IndexedDbTransactionError"}class Jw{constructor(t){this.store=t}put(t,n){let r;return n!==void 0?(et(Pn,"PUT",this.store.name,t,n),r=this.store.put(n,t)):(et(Pn,"PUT",this.store.name,"<auto-key>",t),r=this.store.put(t)),$s(r)}add(t){return et(Pn,"ADD",this.store.name,t,t),$s(this.store.add(t))}get(t){return $s(this.store.get(t)).next((n=>(n===void 0&&(n=null),et(Pn,"GET",this.store.name,t,n),n)))}delete(t){return et(Pn,"DELETE",this.store.name,t),$s(this.store.delete(t))}count(){return et(Pn,"COUNT",this.store.name),$s(this.store.count())}J(t,n){const r=this.options(t,n),o=r.index?this.store.index(r.index):this.store;if(typeof o.getAll=="function"){const u=o.getAll(r.range);return new k(((h,m)=>{u.onerror=g=>{m(g.target.error)},u.onsuccess=g=>{h(g.target.result)}}))}{const u=this.cursor(r),h=[];return this.H(u,((m,g)=>{h.push(g)})).next((()=>h))}}Y(t,n){const r=this.store.getAll(t,n===null?void 0:n);return new k(((o,u)=>{r.onerror=h=>{u(h.target.error)},r.onsuccess=h=>{o(h.target.result)}}))}Z(t,n){et(Pn,"DELETE ALL",this.store.name);const r=this.options(t,n);r.X=!1;const o=this.cursor(r);return this.H(o,((u,h,m)=>m.delete()))}ee(t,n){let r;n?r=t:(r={},n=t);const o=this.cursor(r);return this.H(o,n)}te(t){const n=this.cursor({});return new k(((r,o)=>{n.onerror=u=>{const h=Og(u.target.error);o(h)},n.onsuccess=u=>{const h=u.target.result;h?t(h.primaryKey,h.value).next((m=>{m?h.continue():r()})):r()}}))}H(t,n){const r=[];return new k(((o,u)=>{t.onerror=h=>{u(h.target.error)},t.onsuccess=h=>{const m=h.target.result;if(!m)return void o();const g=new Zw(m),y=n(m.primaryKey,m.value,g);if(y instanceof k){const E=y.catch((A=>(g.done(),k.reject(A))));r.push(E)}g.isDone?o():g.G===null?m.continue():m.continue(g.G)}})).next((()=>k.waitFor(r)))}options(t,n){let r;return t!==void 0&&(typeof t=="string"?r=t:n=t),{index:r,range:n}}cursor(t){let n="next";if(t.reverse&&(n="prev"),t.index){const r=this.store.index(t.index);return t.X?r.openKeyCursor(t.range,n):r.openCursor(t.range,n)}return this.store.openCursor(t.range,n)}}function $s(s){return new k(((t,n)=>{s.onsuccess=r=>{const o=r.target.result;t(o)},s.onerror=r=>{const o=Og(r.target.error);n(o)}}))}let p0=!1;function Og(s){const t=ls.M(Mh());if(t>=12.2&&t<13){const n="An internal error was encountered in the Indexed Database server";if(s.message.indexOf(n)>=0){const r=new nt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return p0||(p0=!0,setTimeout((()=>{throw r}),0)),r}}return s}const iu="IndexBackfiller";class $w{constructor(t,n){this.asyncQueue=t,this.ne=n,this.task=null}start(){this.re(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}re(t){et(iu,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,(async()=>{this.task=null;try{const n=await this.ne.ie();et(iu,`Documents written: ${n}`)}catch(n){ms(n)?et(iu,"Ignoring IndexedDB error during index backfill: ",n):await ya(n)}await this.re(6e4)}))}}class Ww{constructor(t,n){this.localStore=t,this.persistence=n}async ie(t=50){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",(n=>this.se(n,t)))}se(t,n){const r=new Set;let o=n,u=!0;return k.doWhile((()=>u===!0&&o>0),(()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next((h=>{if(h!==null&&!r.has(h))return et(iu,`Processing collection: ${h}`),this.oe(t,h,o).next((m=>{o-=m,r.add(h)}));u=!1})))).next((()=>n-o))}oe(t,n,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,n).next((o=>this.localStore.localDocuments.getNextDocuments(t,n,o,r).next((u=>{const h=u.changes;return this.localStore.indexManager.updateIndexEntries(t,h).next((()=>this._e(o,u))).next((m=>(et(iu,`Updating offset: ${m}`),this.localStore.indexManager.updateCollectionGroup(t,n,m)))).next((()=>h.size))}))))}_e(t,n){let r=t;return n.changes.forEach(((o,u)=>{const h=aT(u);Mg(h,r)>0&&(r=h)})),new kn(r.readTime,r.documentKey,Math.max(n.batchId,t.largestBatchId))}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $n{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ue&&this.ue(t),t}}$n.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ra=-1;function ef(s){return s==null}function mu(s){return s===0&&1/s==-1/0}function t2(s){return typeof s=="number"&&Number.isInteger(s)&&!mu(s)&&s<=Number.MAX_SAFE_INTEGER&&s>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Lh="";function hn(s){let t="";for(let n=0;n<s.length;n++)t.length>0&&(t=y0(t)),t=e2(s.get(n),t);return y0(t)}function e2(s,t){let n=t;const r=s.length;for(let o=0;o<r;o++){const u=s.charAt(o);switch(u){case"\0":n+="";break;case Lh:n+="";break;default:n+=u}}return n}function y0(s){return s+Lh+""}function Li(s){const t=s.length;if(pt(t>=2,64408,{path:s}),t===2)return pt(s.charAt(0)===Lh&&s.charAt(1)==="",56145,{path:s}),Wt.emptyPath();const n=t-2,r=[];let o="";for(let u=0;u<t;){const h=s.indexOf(Lh,u);switch((h<0||h>n)&&ft(50515,{path:s}),s.charAt(h+1)){case"":const m=s.substring(u,h);let g;o.length===0?g=m:(o+=m,g=o,o=""),r.push(g);break;case"":o+=s.substring(u,h),o+="\0";break;case"":o+=s.substring(u,h+1);break;default:ft(61167,{path:s})}u=h+2}return new Wt(r)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Js="remoteDocuments",Iu="owner",oo="owner",gu="mutationQueues",n2="userId",gi="mutations",_0="batchId",ia="userMutationsIndex",v0=["userId","batchId"];/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ah(s,t){return[s,hn(t)]}function cT(s,t,n){return[s,hn(t),n]}const i2={},So="documentMutations",Uh="remoteDocumentsV14",r2=["prefixPath","collectionGroup","readTime","documentId"],bh="documentKeyIndex",s2=["prefixPath","collectionGroup","documentId"],hT="collectionGroupIndex",a2=["collectionGroup","readTime","prefixPath","documentId"],pu="remoteDocumentGlobal",ng="remoteDocumentGlobalKey",wo="targets",fT="queryTargetsIndex",o2=["canonicalId","targetId"],Io="targetDocuments",l2=["targetId","path"],Pg="documentTargetsIndex",u2=["path","targetId"],jh="targetGlobalKey",sa="targetGlobal",yu="collectionParents",c2=["collectionId","parent"],Ro="clientMetadata",h2="clientId",nf="bundles",f2="bundleId",rf="namedQueries",d2="name",zg="indexConfiguration",m2="indexId",ig="collectionGroupIndex",g2="collectionGroup",ru="indexState",p2=["indexId","uid"],dT="sequenceNumberIndex",y2=["uid","sequenceNumber"],su="indexEntries",_2=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],mT="documentKeyIndex",v2=["indexId","uid","orderedDocumentKey"],sf="documentOverlays",E2=["userId","collectionPath","documentId"],rg="collectionPathOverlayIndex",T2=["userId","collectionPath","largestBatchId"],gT="collectionGroupOverlayIndex",A2=["userId","collectionGroup","largestBatchId"],kg="globals",b2="name",pT=[gu,gi,So,Js,wo,Iu,sa,Io,Ro,pu,yu,nf,rf],S2=[...pT,sf],yT=[gu,gi,So,Uh,wo,Iu,sa,Io,Ro,pu,yu,nf,rf,sf],_T=yT,Lg=[..._T,zg,ru,su],w2=Lg,vT=[...Lg,kg],I2=vT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sg extends lT{constructor(t,n){super(),this.le=t,this.currentSequenceNumber=n}}function Fe(s,t){const n=Rt(s);return ls.O(n.le,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E0(s){let t=0;for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t++;return t}function gs(s,t){for(const n in s)Object.prototype.hasOwnProperty.call(s,n)&&t(n,s[n])}function ET(s){for(const t in s)if(Object.prototype.hasOwnProperty.call(s,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _e{constructor(t,n){this.comparator=t,this.root=n||sn.EMPTY}insert(t,n){return new _e(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,sn.BLACK,null,null))}remove(t){return new _e(this.comparator,this.root.remove(t,this.comparator).copy(null,null,sn.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const o=this.comparator(t,r.key);if(o===0)return n+r.left.size;o<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal(((n,r)=>(t(n,r),!1)))}toString(){const t=[];return this.inorderTraversal(((n,r)=>(t.push(`${n}:${r}`),!1))),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new mh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new mh(this.root,t,this.comparator,!1)}getReverseIterator(){return new mh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new mh(this.root,t,this.comparator,!0)}}class mh{constructor(t,n,r,o){this.isReverse=o,this.nodeStack=[];let u=1;for(;!t.isEmpty();)if(u=n?r(t.key,n):1,n&&o&&(u*=-1),u<0)t=this.isReverse?t.left:t.right;else{if(u===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class sn{constructor(t,n,r,o,u){this.key=t,this.value=n,this.color=r??sn.RED,this.left=o??sn.EMPTY,this.right=u??sn.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,o,u){return new sn(t??this.key,n??this.value,r??this.color,o??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let o=this;const u=r(t,o.key);return o=u<0?o.copy(null,null,null,o.left.insert(t,n,r),null):u===0?o.copy(null,n,null,null,null):o.copy(null,null,null,null,o.right.insert(t,n,r)),o.fixUp()}removeMin(){if(this.left.isEmpty())return sn.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,o=this;if(n(t,o.key)<0)o.left.isEmpty()||o.left.isRed()||o.left.left.isRed()||(o=o.moveRedLeft()),o=o.copy(null,null,null,o.left.remove(t,n),null);else{if(o.left.isRed()&&(o=o.rotateRight()),o.right.isEmpty()||o.right.isRed()||o.right.left.isRed()||(o=o.moveRedRight()),n(t,o.key)===0){if(o.right.isEmpty())return sn.EMPTY;r=o.right.min(),o=o.copy(r.key,r.value,null,null,o.right.removeMin())}o=o.copy(null,null,null,null,o.right.remove(t,n))}return o.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,sn.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,sn.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ft(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ft(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ft(27949);return t+(this.isRed()?0:1)}}sn.EMPTY=null,sn.RED=!0,sn.BLACK=!1;sn.EMPTY=new class{constructor(){this.size=0}get key(){throw ft(57766)}get value(){throw ft(16141)}get color(){throw ft(16727)}get left(){throw ft(29726)}get right(){throw ft(36894)}copy(t,n,r,o,u){return this}insert(t,n,r){return new sn(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t){this.comparator=t,this.data=new _e(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal(((n,r)=>(t(n),!1)))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const o=r.getNext();if(this.comparator(o.key,t[1])>=0)return;n(o.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new T0(this.data.getIterator())}getIteratorFrom(t){return new T0(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach((r=>{n=n.add(r)})),n}isEqual(t){if(!(t instanceof se)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(this.comparator(o,u)!==0)return!1}return!0}toArray(){const t=[];return this.forEach((n=>{t.push(n)})),t}toString(){const t=[];return this.forEach((n=>t.push(n))),"SortedSet("+t.toString()+")"}copy(t){const n=new se(this.comparator);return n.data=t,n}}class T0{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function lo(s){return s.hasNext()?s.getNext():void 0}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sn{constructor(t){this.fields=t,t.sort(Ee.comparator)}static empty(){return new Sn([])}unionWith(t){let n=new se(Ee.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new Sn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return bo(this.fields,t.fields,((n,r)=>n.isEqual(r)))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TT extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.binaryString=t}static fromBase64String(t){const n=(function(o){try{return atob(o)}catch(u){throw typeof DOMException<"u"&&u instanceof DOMException?new TT("Invalid base64 string: "+u):u}})(t);return new Be(n)}static fromUint8Array(t){const n=(function(o){let u="";for(let h=0;h<o.length;++h)u+=String.fromCharCode(o[h]);return u})(t);return new Be(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return(function(n){return btoa(n)})(this.binaryString)}toUint8Array(){return(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return It(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Be.EMPTY_BYTE_STRING=new Be("");const R2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pr(s){if(pt(!!s,39018),typeof s=="string"){let t=0;const n=R2.exec(s);if(pt(!!n,46558,{timestamp:s}),n[1]){let o=n[1];o=(o+"000000000").substr(0,9),t=Number(o)}const r=new Date(s);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:ye(s.seconds),nanos:ye(s.nanos)}}function ye(s){return typeof s=="number"?s:typeof s=="string"?Number(s):0}function yr(s){return typeof s=="string"?Be.fromBase64String(s):Be.fromUint8Array(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AT="server_timestamp",bT="__type__",ST="__previous_value__",wT="__local_write_time__";function Ug(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[bT])==null?void 0:r.stringValue)===AT}function af(s){const t=s.mapValue.fields[ST];return Ug(t)?af(t):t}function _u(s){const t=pr(s.mapValue.fields[wT].timestampValue);return new Yt(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(t,n,r,o,u,h,m,g,y,E){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=o,this.ssl=u,this.forceLongPolling=h,this.autoDetectLongPolling=m,this.longPollingOptions=g,this.useFetchStreams=y,this.isUsingEmulator=E}}const Bh="(default)";class ha{constructor(t,n){this.projectId=t,this.database=n||Bh}static empty(){return new ha("","")}get isDefaultDatabase(){return this.database===Bh}isEqual(t){return t instanceof ha&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jg="__type__",IT="__max__",rs={mapValue:{fields:{__type__:{stringValue:IT}}}},Bg="__vector__",xo="value",Sh={nullValue:"NULL_VALUE"};function cs(s){return"nullValue"in s?0:"booleanValue"in s?1:"integerValue"in s||"doubleValue"in s?2:"timestampValue"in s?3:"stringValue"in s?5:"bytesValue"in s?6:"referenceValue"in s?7:"geoPointValue"in s?8:"arrayValue"in s?9:"mapValue"in s?Ug(s)?4:RT(s)?9007199254740991:of(s)?10:11:ft(28295,{value:s})}function Fi(s,t){if(s===t)return!0;const n=cs(s);if(n!==cs(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return s.booleanValue===t.booleanValue;case 4:return _u(s).isEqual(_u(t));case 3:return(function(o,u){if(typeof o.timestampValue=="string"&&typeof u.timestampValue=="string"&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const h=pr(o.timestampValue),m=pr(u.timestampValue);return h.seconds===m.seconds&&h.nanos===m.nanos})(s,t);case 5:return s.stringValue===t.stringValue;case 6:return(function(o,u){return yr(o.bytesValue).isEqual(yr(u.bytesValue))})(s,t);case 7:return s.referenceValue===t.referenceValue;case 8:return(function(o,u){return ye(o.geoPointValue.latitude)===ye(u.geoPointValue.latitude)&&ye(o.geoPointValue.longitude)===ye(u.geoPointValue.longitude)})(s,t);case 2:return(function(o,u){if("integerValue"in o&&"integerValue"in u)return ye(o.integerValue)===ye(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const h=ye(o.doubleValue),m=ye(u.doubleValue);return h===m?mu(h)===mu(m):isNaN(h)&&isNaN(m)}return!1})(s,t);case 9:return bo(s.arrayValue.values||[],t.arrayValue.values||[],Fi);case 10:case 11:return(function(o,u){const h=o.mapValue.fields||{},m=u.mapValue.fields||{};if(E0(h)!==E0(m))return!1;for(const g in h)if(h.hasOwnProperty(g)&&(m[g]===void 0||!Fi(h[g],m[g])))return!1;return!0})(s,t);default:return ft(52216,{left:s})}}function vu(s,t){return(s.values||[]).find((n=>Fi(n,t)))!==void 0}function hs(s,t){if(s===t)return 0;const n=cs(s),r=cs(t);if(n!==r)return It(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return It(s.booleanValue,t.booleanValue);case 2:return(function(u,h){const m=ye(u.integerValue||u.doubleValue),g=ye(h.integerValue||h.doubleValue);return m<g?-1:m>g?1:m===g?0:isNaN(m)?isNaN(g)?0:-1:1})(s,t);case 3:return A0(s.timestampValue,t.timestampValue);case 4:return A0(_u(s),_u(t));case 5:return tg(s.stringValue,t.stringValue);case 6:return(function(u,h){const m=yr(u),g=yr(h);return m.compareTo(g)})(s.bytesValue,t.bytesValue);case 7:return(function(u,h){const m=u.split("/"),g=h.split("/");for(let y=0;y<m.length&&y<g.length;y++){const E=It(m[y],g[y]);if(E!==0)return E}return It(m.length,g.length)})(s.referenceValue,t.referenceValue);case 8:return(function(u,h){const m=It(ye(u.latitude),ye(h.latitude));return m!==0?m:It(ye(u.longitude),ye(h.longitude))})(s.geoPointValue,t.geoPointValue);case 9:return b0(s.arrayValue,t.arrayValue);case 10:return(function(u,h){var S,U,W,Q;const m=u.fields||{},g=h.fields||{},y=(S=m[xo])==null?void 0:S.arrayValue,E=(U=g[xo])==null?void 0:U.arrayValue,A=It(((W=y==null?void 0:y.values)==null?void 0:W.length)||0,((Q=E==null?void 0:E.values)==null?void 0:Q.length)||0);return A!==0?A:b0(y,E)})(s.mapValue,t.mapValue);case 11:return(function(u,h){if(u===rs.mapValue&&h===rs.mapValue)return 0;if(u===rs.mapValue)return 1;if(h===rs.mapValue)return-1;const m=u.fields||{},g=Object.keys(m),y=h.fields||{},E=Object.keys(y);g.sort(),E.sort();for(let A=0;A<g.length&&A<E.length;++A){const S=tg(g[A],E[A]);if(S!==0)return S;const U=hs(m[g[A]],y[E[A]]);if(U!==0)return U}return It(g.length,E.length)})(s.mapValue,t.mapValue);default:throw ft(23264,{he:n})}}function A0(s,t){if(typeof s=="string"&&typeof t=="string"&&s.length===t.length)return It(s,t);const n=pr(s),r=pr(t),o=It(n.seconds,r.seconds);return o!==0?o:It(n.nanos,r.nanos)}function b0(s,t){const n=s.values||[],r=t.values||[];for(let o=0;o<n.length&&o<r.length;++o){const u=hs(n[o],r[o]);if(u)return u}return It(n.length,r.length)}function Do(s){return ag(s)}function ag(s){return"nullValue"in s?"null":"booleanValue"in s?""+s.booleanValue:"integerValue"in s?""+s.integerValue:"doubleValue"in s?""+s.doubleValue:"timestampValue"in s?(function(n){const r=pr(n);return`time(${r.seconds},${r.nanos})`})(s.timestampValue):"stringValue"in s?s.stringValue:"bytesValue"in s?(function(n){return yr(n).toBase64()})(s.bytesValue):"referenceValue"in s?(function(n){return lt.fromName(n).toString()})(s.referenceValue):"geoPointValue"in s?(function(n){return`geo(${n.latitude},${n.longitude})`})(s.geoPointValue):"arrayValue"in s?(function(n){let r="[",o=!0;for(const u of n.values||[])o?o=!1:r+=",",r+=ag(u);return r+"]"})(s.arrayValue):"mapValue"in s?(function(n){const r=Object.keys(n.fields||{}).sort();let o="{",u=!0;for(const h of r)u?u=!1:o+=",",o+=`${h}:${ag(n.fields[h])}`;return o+"}"})(s.mapValue):ft(61005,{value:s})}function wh(s){switch(cs(s)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=af(s);return t?16+wh(t):16;case 5:return 2*s.stringValue.length;case 6:return yr(s.bytesValue).approximateByteSize();case 7:return s.referenceValue.length;case 9:return(function(r){return(r.values||[]).reduce(((o,u)=>o+wh(u)),0)})(s.arrayValue);case 10:case 11:return(function(r){let o=0;return gs(r.fields,((u,h)=>{o+=u.length+wh(h)})),o})(s.mapValue);default:throw ft(13486,{value:s})}}function Eu(s,t){return{referenceValue:`projects/${s.projectId}/databases/${s.database}/documents/${t.path.canonicalString()}`}}function og(s){return!!s&&"integerValue"in s}function Tu(s){return!!s&&"arrayValue"in s}function S0(s){return!!s&&"nullValue"in s}function w0(s){return!!s&&"doubleValue"in s&&isNaN(Number(s.doubleValue))}function Ih(s){return!!s&&"mapValue"in s}function of(s){var n,r;return((r=(((n=s==null?void 0:s.mapValue)==null?void 0:n.fields)||{})[jg])==null?void 0:r.stringValue)===Bg}function au(s){if(s.geoPointValue)return{geoPointValue:{...s.geoPointValue}};if(s.timestampValue&&typeof s.timestampValue=="object")return{timestampValue:{...s.timestampValue}};if(s.mapValue){const t={mapValue:{fields:{}}};return gs(s.mapValue.fields,((n,r)=>t.mapValue.fields[n]=au(r))),t}if(s.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(s.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=au(s.arrayValue.values[n]);return t}return{...s}}function RT(s){return(((s.mapValue||{}).fields||{}).__type__||{}).stringValue===IT}const xT={mapValue:{fields:{[jg]:{stringValue:Bg},[xo]:{arrayValue:{}}}}};function D2(s){return"nullValue"in s?Sh:"booleanValue"in s?{booleanValue:!1}:"integerValue"in s||"doubleValue"in s?{doubleValue:NaN}:"timestampValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in s?{stringValue:""}:"bytesValue"in s?{bytesValue:""}:"referenceValue"in s?Eu(ha.empty(),lt.empty()):"geoPointValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in s?{arrayValue:{}}:"mapValue"in s?of(s)?xT:{mapValue:{}}:ft(35942,{value:s})}function C2(s){return"nullValue"in s?{booleanValue:!1}:"booleanValue"in s?{doubleValue:NaN}:"integerValue"in s||"doubleValue"in s?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in s?{stringValue:""}:"stringValue"in s?{bytesValue:""}:"bytesValue"in s?Eu(ha.empty(),lt.empty()):"referenceValue"in s?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in s?{arrayValue:{}}:"arrayValue"in s?xT:"mapValue"in s?of(s)?{mapValue:{}}:rs:ft(61959,{value:s})}function I0(s,t){const n=hs(s.value,t.value);return n!==0?n:s.inclusive&&!t.inclusive?-1:!s.inclusive&&t.inclusive?1:0}function R0(s,t){const n=hs(s.value,t.value);return n!==0?n:s.inclusive&&!t.inclusive?1:!s.inclusive&&t.inclusive?-1:0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(t){this.value=t}static empty(){return new un({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!Ih(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=au(n)}setAll(t){let n=Ee.emptyPath(),r={},o=[];t.forEach(((h,m)=>{if(!n.isImmediateParentOf(m)){const g=this.getFieldsMap(n);this.applyChanges(g,r,o),r={},o=[],n=m.popLast()}h?r[m.lastSegment()]=au(h):o.push(m.lastSegment())}));const u=this.getFieldsMap(n);this.applyChanges(u,r,o)}delete(t){const n=this.field(t.popLast());Ih(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Fi(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let o=n.mapValue.fields[t.get(r)];Ih(o)&&o.mapValue.fields||(o={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=o),n=o}return n.mapValue.fields}applyChanges(t,n,r){gs(n,((o,u)=>t[o]=u));for(const o of r)delete t[o]}clone(){return new un(au(this.value))}}function DT(s){const t=[];return gs(s.fields,((n,r)=>{const o=new Ee([n]);if(Ih(r)){const u=DT(r.mapValue).fields;if(u.length===0)t.push(o);else for(const h of u)t.push(o.child(h))}else t.push(o)})),new Sn(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class be{constructor(t,n,r,o,u,h,m){this.key=t,this.documentType=n,this.version=r,this.readTime=o,this.createTime=u,this.data=h,this.documentState=m}static newInvalidDocument(t){return new be(t,0,vt.min(),vt.min(),vt.min(),un.empty(),0)}static newFoundDocument(t,n,r,o){return new be(t,1,n,vt.min(),r,o,0)}static newNoDocument(t,n){return new be(t,2,n,vt.min(),vt.min(),un.empty(),0)}static newUnknownDocument(t,n){return new be(t,3,n,vt.min(),vt.min(),un.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(vt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=un.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=un.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=vt.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof be&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new be(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co{constructor(t,n){this.position=t,this.inclusive=n}}function x0(s,t,n){let r=0;for(let o=0;o<s.position.length;o++){const u=t[o],h=s.position[o];if(u.field.isKeyField()?r=lt.comparator(lt.fromName(h.referenceValue),n.key):r=hs(h,n.data.field(u.field)),u.dir==="desc"&&(r*=-1),r!==0)break}return r}function D0(s,t){if(s===null)return t===null;if(t===null||s.inclusive!==t.inclusive||s.position.length!==t.position.length)return!1;for(let n=0;n<s.position.length;n++)if(!Fi(s.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au{constructor(t,n="asc"){this.field=t,this.dir=n}}function V2(s,t){return s.dir===t.dir&&s.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CT{}class Ft extends CT{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new N2(t,n,r):n==="array-contains"?new P2(t,r):n==="in"?new zT(t,r):n==="not-in"?new z2(t,r):n==="array-contains-any"?new k2(t,r):new Ft(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new M2(t,r):new O2(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(hs(n,this.value)):n!==null&&cs(this.value)===cs(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ft(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class re extends CT{constructor(t,n){super(),this.filters=t,this.op=n,this.Pe=null}static create(t,n){return new re(t,n)}matches(t){return Vo(this)?this.filters.find((n=>!n.matches(t)))===void 0:this.filters.find((n=>n.matches(t)))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce(((t,n)=>t.concat(n.getFlattenedFilters())),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function Vo(s){return s.op==="and"}function lg(s){return s.op==="or"}function qg(s){return VT(s)&&Vo(s)}function VT(s){for(const t of s.filters)if(t instanceof re)return!1;return!0}function ug(s){if(s instanceof Ft)return s.field.canonicalString()+s.op.toString()+Do(s.value);if(qg(s))return s.filters.map((t=>ug(t))).join(",");{const t=s.filters.map((n=>ug(n))).join(",");return`${s.op}(${t})`}}function NT(s,t){return s instanceof Ft?(function(r,o){return o instanceof Ft&&r.op===o.op&&r.field.isEqual(o.field)&&Fi(r.value,o.value)})(s,t):s instanceof re?(function(r,o){return o instanceof re&&r.op===o.op&&r.filters.length===o.filters.length?r.filters.reduce(((u,h,m)=>u&&NT(h,o.filters[m])),!0):!1})(s,t):void ft(19439)}function MT(s,t){const n=s.filters.concat(t);return re.create(n,s.op)}function OT(s){return s instanceof Ft?(function(n){return`${n.field.canonicalString()} ${n.op} ${Do(n.value)}`})(s):s instanceof re?(function(n){return n.op.toString()+" {"+n.getFilters().map(OT).join(" ,")+"}"})(s):"Filter"}class N2 extends Ft{constructor(t,n,r){super(t,n,r),this.key=lt.fromName(r.referenceValue)}matches(t){const n=lt.comparator(t.key,this.key);return this.matchesComparison(n)}}class M2 extends Ft{constructor(t,n){super(t,"in",n),this.keys=PT("in",n)}matches(t){return this.keys.some((n=>n.isEqual(t.key)))}}class O2 extends Ft{constructor(t,n){super(t,"not-in",n),this.keys=PT("not-in",n)}matches(t){return!this.keys.some((n=>n.isEqual(t.key)))}}function PT(s,t){var n;return(((n=t.arrayValue)==null?void 0:n.values)||[]).map((r=>lt.fromName(r.referenceValue)))}class P2 extends Ft{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return Tu(n)&&vu(n.arrayValue,this.value)}}class zT extends Ft{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&vu(this.value.arrayValue,n)}}class z2 extends Ft{constructor(t,n){super(t,"not-in",n)}matches(t){if(vu(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!vu(this.value.arrayValue,n)}}class k2 extends Ft{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!Tu(n)||!n.arrayValue.values)&&n.arrayValue.values.some((r=>vu(this.value.arrayValue,r)))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class L2{constructor(t,n=null,r=[],o=[],u=null,h=null,m=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=o,this.limit=u,this.startAt=h,this.endAt=m,this.Te=null}}function cg(s,t=null,n=[],r=[],o=null,u=null,h=null){return new L2(s,t,n,r,o,u,h)}function fa(s){const t=Rt(s);if(t.Te===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map((r=>ug(r))).join(","),n+="|ob:",n+=t.orderBy.map((r=>(function(u){return u.field.canonicalString()+u.dir})(r))).join(","),ef(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map((r=>Do(r))).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map((r=>Do(r))).join(",")),t.Te=n}return t.Te}function Ru(s,t){if(s.limit!==t.limit||s.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<s.orderBy.length;n++)if(!V2(s.orderBy[n],t.orderBy[n]))return!1;if(s.filters.length!==t.filters.length)return!1;for(let n=0;n<s.filters.length;n++)if(!NT(s.filters[n],t.filters[n]))return!1;return s.collectionGroup===t.collectionGroup&&!!s.path.isEqual(t.path)&&!!D0(s.startAt,t.startAt)&&D0(s.endAt,t.endAt)}function qh(s){return lt.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}function Fh(s,t){return s.filters.filter((n=>n instanceof Ft&&n.field.isEqual(t)))}function C0(s,t,n){let r=Sh,o=!0;for(const u of Fh(s,t)){let h=Sh,m=!0;switch(u.op){case"<":case"<=":h=D2(u.value);break;case"==":case"in":case">=":h=u.value;break;case">":h=u.value,m=!1;break;case"!=":case"not-in":h=Sh}I0({value:r,inclusive:o},{value:h,inclusive:m})<0&&(r=h,o=m)}if(n!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=n.position[u];I0({value:r,inclusive:o},{value:h,inclusive:n.inclusive})<0&&(r=h,o=n.inclusive);break}}return{value:r,inclusive:o}}function V0(s,t,n){let r=rs,o=!0;for(const u of Fh(s,t)){let h=rs,m=!0;switch(u.op){case">=":case">":h=C2(u.value),m=!1;break;case"==":case"in":case"<=":h=u.value;break;case"<":h=u.value,m=!1;break;case"!=":case"not-in":h=rs}R0({value:r,inclusive:o},{value:h,inclusive:m})>0&&(r=h,o=m)}if(n!==null){for(let u=0;u<s.orderBy.length;++u)if(s.orderBy[u].field.isEqual(t)){const h=n.position[u];R0({value:r,inclusive:o},{value:h,inclusive:n.inclusive})>0&&(r=h,o=n.inclusive);break}}return{value:r,inclusive:o}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uo{constructor(t,n=null,r=[],o=[],u=null,h="F",m=null,g=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=o,this.limit=u,this.limitType=h,this.startAt=m,this.endAt=g,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function U2(s,t,n,r,o,u,h,m){return new Uo(s,t,n,r,o,u,h,m)}function lf(s){return new Uo(s)}function N0(s){return s.filters.length===0&&s.limit===null&&s.startAt==null&&s.endAt==null&&(s.explicitOrderBy.length===0||s.explicitOrderBy.length===1&&s.explicitOrderBy[0].field.isKeyField())}function kT(s){return s.collectionGroup!==null}function ou(s){const t=Rt(s);if(t.Ie===null){t.Ie=[];const n=new Set;for(const u of t.explicitOrderBy)t.Ie.push(u),n.add(u.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(h){let m=new se(Ee.comparator);return h.filters.forEach((g=>{g.getFlattenedFilters().forEach((y=>{y.isInequality()&&(m=m.add(y.field))}))})),m})(t).forEach((u=>{n.has(u.canonicalString())||u.isKeyField()||t.Ie.push(new Au(u,r))})),n.has(Ee.keyField().canonicalString())||t.Ie.push(new Au(Ee.keyField(),r))}return t.Ie}function ti(s){const t=Rt(s);return t.Ee||(t.Ee=j2(t,ou(s))),t.Ee}function j2(s,t){if(s.limitType==="F")return cg(s.path,s.collectionGroup,t,s.filters,s.limit,s.startAt,s.endAt);{t=t.map((o=>{const u=o.dir==="desc"?"asc":"desc";return new Au(o.field,u)}));const n=s.endAt?new Co(s.endAt.position,s.endAt.inclusive):null,r=s.startAt?new Co(s.startAt.position,s.startAt.inclusive):null;return cg(s.path,s.collectionGroup,t,s.filters,s.limit,n,r)}}function hg(s,t){const n=s.filters.concat([t]);return new Uo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),n,s.limit,s.limitType,s.startAt,s.endAt)}function fg(s,t,n){return new Uo(s.path,s.collectionGroup,s.explicitOrderBy.slice(),s.filters.slice(),t,n,s.startAt,s.endAt)}function uf(s,t){return Ru(ti(s),ti(t))&&s.limitType===t.limitType}function LT(s){return`${fa(ti(s))}|lt:${s.limitType}`}function go(s){return`Query(target=${(function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map((o=>OT(o))).join(", ")}]`),ef(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map((o=>(function(h){return`${h.field.canonicalString()} (${h.dir})`})(o))).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map((o=>Do(o))).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map((o=>Do(o))).join(",")),`Target(${r})`})(ti(s))}; limitType=${s.limitType})`}function xu(s,t){return t.isFoundDocument()&&(function(r,o){const u=o.key.path;return r.collectionGroup!==null?o.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(u):lt.isDocumentKey(r.path)?r.path.isEqual(u):r.path.isImmediateParentOf(u)})(s,t)&&(function(r,o){for(const u of ou(r))if(!u.field.isKeyField()&&o.data.field(u.field)===null)return!1;return!0})(s,t)&&(function(r,o){for(const u of r.filters)if(!u.matches(o))return!1;return!0})(s,t)&&(function(r,o){return!(r.startAt&&!(function(h,m,g){const y=x0(h,m,g);return h.inclusive?y<=0:y<0})(r.startAt,ou(r),o)||r.endAt&&!(function(h,m,g){const y=x0(h,m,g);return h.inclusive?y>=0:y>0})(r.endAt,ou(r),o))})(s,t)}function B2(s){return s.collectionGroup||(s.path.length%2==1?s.path.lastSegment():s.path.get(s.path.length-2))}function UT(s){return(t,n)=>{let r=!1;for(const o of ou(s)){const u=q2(o,t,n);if(u!==0)return u;r=r||o.field.isKeyField()}return 0}}function q2(s,t,n){const r=s.field.isKeyField()?lt.comparator(t.key,n.key):(function(u,h,m){const g=h.data.field(u),y=m.data.field(u);return g!==null&&y!==null?hs(g,y):ft(42886)})(s.field,t,n);switch(s.dir){case"asc":return r;case"desc":return-1*r;default:return ft(19790,{direction:s.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vr{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[o,u]of r)if(this.equalsFn(o,t))return u}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),o=this.inner[r];if(o===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],t))return void(o[u]=[t,n]);o.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let o=0;o<r.length;o++)if(this.equalsFn(r[o][0],t))return r.length===1?delete this.inner[n]:r.splice(o,1),this.innerSize--,!0;return!1}forEach(t){gs(this.inner,((n,r)=>{for(const[o,u]of r)t(o,u)}))}isEmpty(){return ET(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new _e(lt.comparator);function zn(){return F2}const jT=new _e(lt.comparator);function Jl(...s){let t=jT;for(const n of s)t=t.insert(n.key,n);return t}function BT(s){let t=jT;return s.forEach(((n,r)=>t=t.insert(n,r.overlayedDocument))),t}function Ui(){return lu()}function qT(){return lu()}function lu(){return new vr((s=>s.toString()),((s,t)=>s.isEqual(t)))}const H2=new _e(lt.comparator),G2=new se(lt.comparator);function zt(...s){let t=G2;for(const n of s)t=t.add(n);return t}const Q2=new se(It);function K2(){return Q2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fg(s,t){if(s.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:mu(t)?"-0":t}}function FT(s){return{integerValue:""+s}}function Y2(s,t){return t2(t)?FT(t):Fg(s,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this._=void 0}}function X2(s,t,n){return s instanceof No?(function(o,u){const h={fields:{[bT]:{stringValue:AT},[wT]:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&Ug(u)&&(u=af(u)),u&&(h.fields[ST]=u),{mapValue:h}})(n,t):s instanceof Mo?GT(s,t):s instanceof Oo?QT(s,t):(function(o,u){const h=HT(o,u),m=M0(h)+M0(o.Ae);return og(h)&&og(o.Ae)?FT(m):Fg(o.serializer,m)})(s,t)}function Z2(s,t,n){return s instanceof Mo?GT(s,t):s instanceof Oo?QT(s,t):n}function HT(s,t){return s instanceof bu?(function(r){return og(r)||(function(u){return!!u&&"doubleValue"in u})(r)})(t)?t:{integerValue:0}:null}class No extends cf{}class Mo extends cf{constructor(t){super(),this.elements=t}}function GT(s,t){const n=KT(t);for(const r of s.elements)n.some((o=>Fi(o,r)))||n.push(r);return{arrayValue:{values:n}}}class Oo extends cf{constructor(t){super(),this.elements=t}}function QT(s,t){let n=KT(t);for(const r of s.elements)n=n.filter((o=>!Fi(o,r)));return{arrayValue:{values:n}}}class bu extends cf{constructor(t,n){super(),this.serializer=t,this.Ae=n}}function M0(s){return ye(s.integerValue||s.doubleValue)}function KT(s){return Tu(s)&&s.arrayValue.values?s.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(t,n){this.field=t,this.transform=n}}function J2(s,t){return s.field.isEqual(t.field)&&(function(r,o){return r instanceof Mo&&o instanceof Mo||r instanceof Oo&&o instanceof Oo?bo(r.elements,o.elements,Fi):r instanceof bu&&o instanceof bu?Fi(r.Ae,o.Ae):r instanceof No&&o instanceof No})(s.transform,t.transform)}class $2{constructor(t,n){this.version=t,this.transformResults=n}}class Ye{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new Ye}static exists(t){return new Ye(void 0,t)}static updateTime(t){return new Ye(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function Rh(s,t){return s.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(s.updateTime):s.exists===void 0||s.exists===t.isFoundDocument()}class hf{}function XT(s,t){if(!s.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return s.isNoDocument()?new Du(s.key,Ye.none()):new jo(s.key,s.data,Ye.none());{const n=s.data,r=un.empty();let o=new se(Ee.comparator);for(let u of t.fields)if(!o.has(u)){let h=n.field(u);h===null&&u.length>1&&(u=u.popLast(),h=n.field(u)),h===null?r.delete(u):r.set(u,h),o=o.add(u)}return new Er(s.key,r,new Sn(o.toArray()),Ye.none())}}function W2(s,t,n){s instanceof jo?(function(o,u,h){const m=o.value.clone(),g=P0(o.fieldTransforms,u,h.transformResults);m.setAll(g),u.convertToFoundDocument(h.version,m).setHasCommittedMutations()})(s,t,n):s instanceof Er?(function(o,u,h){if(!Rh(o.precondition,u))return void u.convertToUnknownDocument(h.version);const m=P0(o.fieldTransforms,u,h.transformResults),g=u.data;g.setAll(ZT(o)),g.setAll(m),u.convertToFoundDocument(h.version,g).setHasCommittedMutations()})(s,t,n):(function(o,u,h){u.convertToNoDocument(h.version).setHasCommittedMutations()})(0,t,n)}function uu(s,t,n,r){return s instanceof jo?(function(u,h,m,g){if(!Rh(u.precondition,h))return m;const y=u.value.clone(),E=z0(u.fieldTransforms,g,h);return y.setAll(E),h.convertToFoundDocument(h.version,y).setHasLocalMutations(),null})(s,t,n,r):s instanceof Er?(function(u,h,m,g){if(!Rh(u.precondition,h))return m;const y=z0(u.fieldTransforms,g,h),E=h.data;return E.setAll(ZT(u)),E.setAll(y),h.convertToFoundDocument(h.version,E).setHasLocalMutations(),m===null?null:m.unionWith(u.fieldMask.fields).unionWith(u.fieldTransforms.map((A=>A.field)))})(s,t,n,r):(function(u,h,m){return Rh(u.precondition,h)?(h.convertToNoDocument(h.version).setHasLocalMutations(),null):m})(s,t,n)}function tI(s,t){let n=null;for(const r of s.fieldTransforms){const o=t.data.field(r.field),u=HT(r.transform,o||null);u!=null&&(n===null&&(n=un.empty()),n.set(r.field,u))}return n||null}function O0(s,t){return s.type===t.type&&!!s.key.isEqual(t.key)&&!!s.precondition.isEqual(t.precondition)&&!!(function(r,o){return r===void 0&&o===void 0||!(!r||!o)&&bo(r,o,((u,h)=>J2(u,h)))})(s.fieldTransforms,t.fieldTransforms)&&(s.type===0?s.value.isEqual(t.value):s.type!==1||s.data.isEqual(t.data)&&s.fieldMask.isEqual(t.fieldMask))}class jo extends hf{constructor(t,n,r,o=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=o,this.type=0}getFieldMask(){return null}}class Er extends hf{constructor(t,n,r,o,u=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=o,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function ZT(s){const t=new Map;return s.fieldMask.fields.forEach((n=>{if(!n.isEmpty()){const r=s.data.field(n);t.set(n,r)}})),t}function P0(s,t,n){const r=new Map;pt(s.length===n.length,32656,{Re:n.length,Ve:s.length});for(let o=0;o<n.length;o++){const u=s[o],h=u.transform,m=t.data.field(u.field);r.set(u.field,Z2(h,m,n[o]))}return r}function z0(s,t,n){const r=new Map;for(const o of s){const u=o.transform,h=n.data.field(o.field);r.set(o.field,X2(u,h,t))}return r}class Du extends hf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JT extends hf{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hg{constructor(t,n,r,o){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=o}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let o=0;o<this.mutations.length;o++){const u=this.mutations[o];u.key.isEqual(t.key)&&W2(u,t,r[o])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=uu(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=uu(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=qT();return this.mutations.forEach((o=>{const u=t.get(o.key),h=u.overlayedDocument;let m=this.applyToLocalView(h,u.mutatedFields);m=n.has(o.key)?null:m;const g=XT(h,m);g!==null&&r.set(o.key,g),h.isValidDocument()||h.convertToNoDocument(vt.min())})),r}keys(){return this.mutations.reduce(((t,n)=>t.add(n.key)),zt())}isEqual(t){return this.batchId===t.batchId&&bo(this.mutations,t.mutations,((n,r)=>O0(n,r)))&&bo(this.baseMutations,t.baseMutations,((n,r)=>O0(n,r)))}}class Gg{constructor(t,n,r,o){this.batch=t,this.commitVersion=n,this.mutationResults=r,this.docVersions=o}static from(t,n,r){pt(t.mutations.length===r.length,58842,{me:t.mutations.length,fe:r.length});let o=(function(){return H2})();const u=t.mutations;for(let h=0;h<u.length;h++)o=o.insert(u[h].key,r[h].version);return new Gg(t,n,r,o)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eI{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Le,Gt;function nI(s){switch(s){case K.OK:return ft(64938);case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return ft(15467,{code:s})}}function $T(s){if(s===void 0)return mn("GRPC error has no .code"),K.UNKNOWN;switch(s){case Le.OK:return K.OK;case Le.CANCELLED:return K.CANCELLED;case Le.UNKNOWN:return K.UNKNOWN;case Le.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case Le.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case Le.INTERNAL:return K.INTERNAL;case Le.UNAVAILABLE:return K.UNAVAILABLE;case Le.UNAUTHENTICATED:return K.UNAUTHENTICATED;case Le.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case Le.NOT_FOUND:return K.NOT_FOUND;case Le.ALREADY_EXISTS:return K.ALREADY_EXISTS;case Le.PERMISSION_DENIED:return K.PERMISSION_DENIED;case Le.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case Le.ABORTED:return K.ABORTED;case Le.OUT_OF_RANGE:return K.OUT_OF_RANGE;case Le.UNIMPLEMENTED:return K.UNIMPLEMENTED;case Le.DATA_LOSS:return K.DATA_LOSS;default:return ft(39323,{code:s})}}(Gt=Le||(Le={}))[Gt.OK=0]="OK",Gt[Gt.CANCELLED=1]="CANCELLED",Gt[Gt.UNKNOWN=2]="UNKNOWN",Gt[Gt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Gt[Gt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Gt[Gt.NOT_FOUND=5]="NOT_FOUND",Gt[Gt.ALREADY_EXISTS=6]="ALREADY_EXISTS",Gt[Gt.PERMISSION_DENIED=7]="PERMISSION_DENIED",Gt[Gt.UNAUTHENTICATED=16]="UNAUTHENTICATED",Gt[Gt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Gt[Gt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Gt[Gt.ABORTED=10]="ABORTED",Gt[Gt.OUT_OF_RANGE=11]="OUT_OF_RANGE",Gt[Gt.UNIMPLEMENTED=12]="UNIMPLEMENTED",Gt[Gt.INTERNAL=13]="INTERNAL",Gt[Gt.UNAVAILABLE=14]="UNAVAILABLE",Gt[Gt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iI(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rI=new os([4294967295,4294967295],0);function k0(s){const t=iI().encode(s),n=new XE;return n.update(t),new Uint8Array(n.digest())}function L0(s){const t=new DataView(s.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),o=t.getUint32(8,!0),u=t.getUint32(12,!0);return[new os([n,r],0),new os([o,u],0)]}class Kg{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new $l(`Invalid padding: ${n}`);if(r<0)throw new $l(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new $l(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new $l(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*t.length-n,this.pe=os.fromNumber(this.ge)}ye(t,n,r){let o=t.add(n.multiply(os.fromNumber(r)));return o.compare(rI)===1&&(o=new os([o.getBits(0),o.getBits(1)],0)),o.modulo(this.pe).toNumber()}we(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.ge===0)return!1;const n=k0(t),[r,o]=L0(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);if(!this.we(h))return!1}return!0}static create(t,n,r){const o=t%8==0?0:8-t%8,u=new Uint8Array(Math.ceil(t/8)),h=new Kg(u,o,n);return r.forEach((m=>h.insert(m))),h}insert(t){if(this.ge===0)return;const n=k0(t),[r,o]=L0(n);for(let u=0;u<this.hashCount;u++){const h=this.ye(r,o,u);this.Se(h)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class $l extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ff{constructor(t,n,r,o,u){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=o,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const o=new Map;return o.set(t,Cu.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new ff(vt.min(),o,new _e(It),zn(),zt())}}class Cu{constructor(t,n,r,o,u){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=o,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Cu(r,n,zt(),zt(),zt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(t,n,r,o){this.be=t,this.removedTargetIds=n,this.key=r,this.De=o}}class WT{constructor(t,n){this.targetId=t,this.Ce=n}}class t1{constructor(t,n,r=Be.EMPTY_BYTE_STRING,o=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=o}}class U0{constructor(){this.ve=0,this.Fe=j0(),this.Me=Be.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(t){t.approximateByteSize()>0&&(this.Oe=!0,this.Me=t)}ke(){let t=zt(),n=zt(),r=zt();return this.Fe.forEach(((o,u)=>{switch(u){case 0:t=t.add(o);break;case 2:n=n.add(o);break;case 1:r=r.add(o);break;default:ft(38017,{changeType:u})}})),new Cu(this.Me,this.xe,t,n,r)}qe(){this.Oe=!1,this.Fe=j0()}Qe(t,n){this.Oe=!0,this.Fe=this.Fe.insert(t,n)}$e(t){this.Oe=!0,this.Fe=this.Fe.remove(t)}Ue(){this.ve+=1}Ke(){this.ve-=1,pt(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class sI{constructor(t){this.Ge=t,this.ze=new Map,this.je=zn(),this.Je=gh(),this.He=gh(),this.Ye=new _e(It)}Ze(t){for(const n of t.be)t.De&&t.De.isFoundDocument()?this.Xe(n,t.De):this.et(n,t.key,t.De);for(const n of t.removedTargetIds)this.et(n,t.key,t.De)}tt(t){this.forEachTarget(t,(n=>{const r=this.nt(n);switch(t.state){case 0:this.rt(n)&&r.Le(t.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(t.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(t.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(t.resumeToken));break;default:ft(56790,{state:t.state})}}))}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.ze.forEach(((r,o)=>{this.rt(o)&&n(o)}))}st(t){const n=t.targetId,r=t.Ce.count,o=this.ot(n);if(o){const u=o.target;if(qh(u))if(r===0){const h=new lt(u.path);this.et(n,h,be.newNoDocument(h,vt.min()))}else pt(r===1,20013,{expectedCount:r});else{const h=this._t(n);if(h!==r){const m=this.ut(t),g=m?this.ct(m,t,h):1;if(g!==0){this.it(n);const y=g===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,y)}}}}}ut(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:o=0},hashCount:u=0}=n;let h,m;try{h=yr(r).toUint8Array()}catch(g){if(g instanceof TT)return ca("Decoding the base64 bloom filter in existence filter failed ("+g.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw g}try{m=new Kg(h,o,u)}catch(g){return ca(g instanceof $l?"BloomFilter error: ":"Applying bloom filter failed: ",g),null}return m.ge===0?null:m}ct(t,n,r){return n.Ce.count===r-this.Pt(t,n.targetId)?0:2}Pt(t,n){const r=this.Ge.getRemoteKeysForTarget(n);let o=0;return r.forEach((u=>{const h=this.Ge.ht(),m=`projects/${h.projectId}/databases/${h.database}/documents/${u.path.canonicalString()}`;t.mightContain(m)||(this.et(n,u,null),o++)})),o}Tt(t){const n=new Map;this.ze.forEach(((u,h)=>{const m=this.ot(h);if(m){if(u.current&&qh(m.target)){const g=new lt(m.target.path);this.It(g).has(h)||this.Et(h,g)||this.et(h,g,be.newNoDocument(g,t))}u.Be&&(n.set(h,u.ke()),u.qe())}}));let r=zt();this.He.forEach(((u,h)=>{let m=!0;h.forEachWhile((g=>{const y=this.ot(g);return!y||y.purpose==="TargetPurposeLimboResolution"||(m=!1,!1)})),m&&(r=r.add(u))})),this.je.forEach(((u,h)=>h.setReadTime(t)));const o=new ff(t,n,this.Ye,this.je,r);return this.je=zn(),this.Je=gh(),this.He=gh(),this.Ye=new _e(It),o}Xe(t,n){if(!this.rt(t))return;const r=this.Et(t,n.key)?2:0;this.nt(t).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(t)),this.He=this.He.insert(n.key,this.dt(n.key).add(t))}et(t,n,r){if(!this.rt(t))return;const o=this.nt(t);this.Et(t,n)?o.Qe(n,1):o.$e(n),this.He=this.He.insert(n,this.dt(n).delete(t)),this.He=this.He.insert(n,this.dt(n).add(t)),r&&(this.je=this.je.insert(n,r))}removeTarget(t){this.ze.delete(t)}_t(t){const n=this.nt(t).ke();return this.Ge.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ue(t){this.nt(t).Ue()}nt(t){let n=this.ze.get(t);return n||(n=new U0,this.ze.set(t,n)),n}dt(t){let n=this.He.get(t);return n||(n=new se(It),this.He=this.He.insert(t,n)),n}It(t){let n=this.Je.get(t);return n||(n=new se(It),this.Je=this.Je.insert(t,n)),n}rt(t){const n=this.ot(t)!==null;return n||et("WatchChangeAggregator","Detected inactive target",t),n}ot(t){const n=this.ze.get(t);return n&&n.Ne?null:this.Ge.At(t)}it(t){this.ze.set(t,new U0),this.Ge.getRemoteKeysForTarget(t).forEach((n=>{this.et(t,n,null)}))}Et(t,n){return this.Ge.getRemoteKeysForTarget(t).has(n)}}function gh(){return new _e(lt.comparator)}function j0(){return new _e(lt.comparator)}const aI={asc:"ASCENDING",desc:"DESCENDING"},oI={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},lI={and:"AND",or:"OR"};class uI{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function dg(s,t){return s.useProto3Json||ef(t)?t:{value:t}}function Po(s,t){return s.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function e1(s,t){return s.useProto3Json?t.toBase64():t.toUint8Array()}function cI(s,t){return Po(s,t.toTimestamp())}function gn(s){return pt(!!s,49232),vt.fromTimestamp((function(n){const r=pr(n);return new Yt(r.seconds,r.nanos)})(s))}function Yg(s,t){return mg(s,t).canonicalString()}function mg(s,t){const n=(function(o){return new Wt(["projects",o.projectId,"databases",o.database])})(s).child("documents");return t===void 0?n:n.child(t)}function n1(s){const t=Wt.fromString(s);return pt(h1(t),10190,{key:t.toString()}),t}function Hh(s,t){return Yg(s.databaseId,t.path)}function aa(s,t){const n=n1(t);if(n.get(1)!==s.databaseId.projectId)throw new nt(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+s.databaseId.projectId);if(n.get(3)!==s.databaseId.database)throw new nt(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+s.databaseId.database);return new lt(s1(n))}function i1(s,t){return Yg(s.databaseId,t)}function r1(s){const t=n1(s);return t.length===4?Wt.emptyPath():s1(t)}function gg(s){return new Wt(["projects",s.databaseId.projectId,"databases",s.databaseId.database]).canonicalString()}function s1(s){return pt(s.length>4&&s.get(4)==="documents",29091,{key:s.toString()}),s.popFirst(5)}function B0(s,t,n){return{name:Hh(s,t),fields:n.value.mapValue.fields}}function hI(s,t,n){const r=aa(s,t.name),o=gn(t.updateTime),u=t.createTime?gn(t.createTime):vt.min(),h=new un({mapValue:{fields:t.fields}}),m=be.newFoundDocument(r,o,u,h);return n&&m.setHasCommittedMutations(),n?m.setHasCommittedMutations():m}function fI(s,t){let n;if("targetChange"in t){t.targetChange;const r=(function(y){return y==="NO_CHANGE"?0:y==="ADD"?1:y==="REMOVE"?2:y==="CURRENT"?3:y==="RESET"?4:ft(39313,{state:y})})(t.targetChange.targetChangeType||"NO_CHANGE"),o=t.targetChange.targetIds||[],u=(function(y,E){return y.useProto3Json?(pt(E===void 0||typeof E=="string",58123),Be.fromBase64String(E||"")):(pt(E===void 0||E instanceof Buffer||E instanceof Uint8Array,16193),Be.fromUint8Array(E||new Uint8Array))})(s,t.targetChange.resumeToken),h=t.targetChange.cause,m=h&&(function(y){const E=y.code===void 0?K.UNKNOWN:$T(y.code);return new nt(E,y.message||"")})(h);n=new t1(r,o,u,m||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const o=aa(s,r.document.name),u=gn(r.document.updateTime),h=r.document.createTime?gn(r.document.createTime):vt.min(),m=new un({mapValue:{fields:r.document.fields}}),g=be.newFoundDocument(o,u,h,m),y=r.targetIds||[],E=r.removedTargetIds||[];n=new xh(y,E,g.key,g)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const o=aa(s,r.document),u=r.readTime?gn(r.readTime):vt.min(),h=be.newNoDocument(o,u),m=r.removedTargetIds||[];n=new xh([],m,h.key,h)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const o=aa(s,r.document),u=r.removedTargetIds||[];n=new xh([],u,o,null)}else{if(!("filter"in t))return ft(11601,{Rt:t});{t.filter;const r=t.filter;r.targetId;const{count:o=0,unchangedNames:u}=r,h=new eI(o,u),m=r.targetId;n=new WT(m,h)}}return n}function Gh(s,t){let n;if(t instanceof jo)n={update:B0(s,t.key,t.value)};else if(t instanceof Du)n={delete:Hh(s,t.key)};else if(t instanceof Er)n={update:B0(s,t.key,t.data),updateMask:_I(t.fieldMask)};else{if(!(t instanceof JT))return ft(16599,{Vt:t.type});n={verify:Hh(s,t.key)}}return t.fieldTransforms.length>0&&(n.updateTransforms=t.fieldTransforms.map((r=>(function(u,h){const m=h.transform;if(m instanceof No)return{fieldPath:h.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(m instanceof Mo)return{fieldPath:h.field.canonicalString(),appendMissingElements:{values:m.elements}};if(m instanceof Oo)return{fieldPath:h.field.canonicalString(),removeAllFromArray:{values:m.elements}};if(m instanceof bu)return{fieldPath:h.field.canonicalString(),increment:m.Ae};throw ft(20930,{transform:h.transform})})(0,r)))),t.precondition.isNone||(n.currentDocument=(function(o,u){return u.updateTime!==void 0?{updateTime:cI(o,u.updateTime)}:u.exists!==void 0?{exists:u.exists}:ft(27497)})(s,t.precondition)),n}function pg(s,t){const n=t.currentDocument?(function(u){return u.updateTime!==void 0?Ye.updateTime(gn(u.updateTime)):u.exists!==void 0?Ye.exists(u.exists):Ye.none()})(t.currentDocument):Ye.none(),r=t.updateTransforms?t.updateTransforms.map((o=>(function(h,m){let g=null;if("setToServerValue"in m)pt(m.setToServerValue==="REQUEST_TIME",16630,{proto:m}),g=new No;else if("appendMissingElements"in m){const E=m.appendMissingElements.values||[];g=new Mo(E)}else if("removeAllFromArray"in m){const E=m.removeAllFromArray.values||[];g=new Oo(E)}else"increment"in m?g=new bu(h,m.increment):ft(16584,{proto:m});const y=Ee.fromServerFormat(m.fieldPath);return new YT(y,g)})(s,o))):[];if(t.update){t.update.name;const o=aa(s,t.update.name),u=new un({mapValue:{fields:t.update.fields}});if(t.updateMask){const h=(function(g){const y=g.fieldPaths||[];return new Sn(y.map((E=>Ee.fromServerFormat(E))))})(t.updateMask);return new Er(o,u,h,n,r)}return new jo(o,u,n,r)}if(t.delete){const o=aa(s,t.delete);return new Du(o,n)}if(t.verify){const o=aa(s,t.verify);return new JT(o,n)}return ft(1463,{proto:t})}function dI(s,t){return s&&s.length>0?(pt(t!==void 0,14353),s.map((n=>(function(o,u){let h=o.updateTime?gn(o.updateTime):gn(u);return h.isEqual(vt.min())&&(h=gn(u)),new $2(h,o.transformResults||[])})(n,t)))):[]}function a1(s,t){return{documents:[i1(s,t.path)]}}function o1(s,t){const n={structuredQuery:{}},r=t.path;let o;t.collectionGroup!==null?(o=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(o=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=i1(s,o);const u=(function(y){if(y.length!==0)return c1(re.create(y,"and"))})(t.filters);u&&(n.structuredQuery.where=u);const h=(function(y){if(y.length!==0)return y.map((E=>(function(S){return{field:po(S.field),direction:gI(S.dir)}})(E)))})(t.orderBy);h&&(n.structuredQuery.orderBy=h);const m=dg(s,t.limit);return m!==null&&(n.structuredQuery.limit=m),t.startAt&&(n.structuredQuery.startAt=(function(y){return{before:y.inclusive,values:y.position}})(t.startAt)),t.endAt&&(n.structuredQuery.endAt=(function(y){return{before:!y.inclusive,values:y.position}})(t.endAt)),{ft:n,parent:o}}function l1(s){let t=r1(s.parent);const n=s.structuredQuery,r=n.from?n.from.length:0;let o=null;if(r>0){pt(r===1,65062);const E=n.from[0];E.allDescendants?o=E.collectionId:t=t.child(E.collectionId)}let u=[];n.where&&(u=(function(A){const S=u1(A);return S instanceof re&&qg(S)?S.getFilters():[S]})(n.where));let h=[];n.orderBy&&(h=(function(A){return A.map((S=>(function(W){return new Au(yo(W.field),(function(X){switch(X){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}})(W.direction))})(S)))})(n.orderBy));let m=null;n.limit&&(m=(function(A){let S;return S=typeof A=="object"?A.value:A,ef(S)?null:S})(n.limit));let g=null;n.startAt&&(g=(function(A){const S=!!A.before,U=A.values||[];return new Co(U,S)})(n.startAt));let y=null;return n.endAt&&(y=(function(A){const S=!A.before,U=A.values||[];return new Co(U,S)})(n.endAt)),U2(t,o,h,u,m,"F",g,y)}function mI(s,t){const n=(function(o){switch(o){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ft(28987,{purpose:o})}})(t.purpose);return n==null?null:{"goog-listen-tags":n}}function u1(s){return s.unaryFilter!==void 0?(function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=yo(n.unaryFilter.field);return Ft.create(r,"==",{doubleValue:NaN});case"IS_NULL":const o=yo(n.unaryFilter.field);return Ft.create(o,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const u=yo(n.unaryFilter.field);return Ft.create(u,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const h=yo(n.unaryFilter.field);return Ft.create(h,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ft(61313);default:return ft(60726)}})(s):s.fieldFilter!==void 0?(function(n){return Ft.create(yo(n.fieldFilter.field),(function(o){switch(o){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ft(58110);default:return ft(50506)}})(n.fieldFilter.op),n.fieldFilter.value)})(s):s.compositeFilter!==void 0?(function(n){return re.create(n.compositeFilter.filters.map((r=>u1(r))),(function(o){switch(o){case"AND":return"and";case"OR":return"or";default:return ft(1026)}})(n.compositeFilter.op))})(s):ft(30097,{filter:s})}function gI(s){return aI[s]}function pI(s){return oI[s]}function yI(s){return lI[s]}function po(s){return{fieldPath:s.canonicalString()}}function yo(s){return Ee.fromServerFormat(s.fieldPath)}function c1(s){return s instanceof Ft?(function(n){if(n.op==="=="){if(w0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NAN"}};if(S0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(w0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NAN"}};if(S0(n.value))return{unaryFilter:{field:po(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:po(n.field),op:pI(n.op),value:n.value}}})(s):s instanceof re?(function(n){const r=n.getFilters().map((o=>c1(o)));return r.length===1?r[0]:{compositeFilter:{op:yI(n.op),filters:r}}})(s):ft(54877,{filter:s})}function _I(s){const t=[];return s.fields.forEach((n=>t.push(n.canonicalString()))),{fieldPaths:t}}function h1(s){return s.length>=4&&s.get(0)==="projects"&&s.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(t,n,r,o,u=vt.min(),h=vt.min(),m=Be.EMPTY_BYTE_STRING,g=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=o,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=h,this.resumeToken=m,this.expectedCount=g}withSequenceNumber(t){return new dr(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new dr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f1{constructor(t){this.yt=t}}function vI(s,t){let n;if(t.document)n=hI(s.yt,t.document,!!t.hasCommittedMutations);else if(t.noDocument){const r=lt.fromSegments(t.noDocument.path),o=ma(t.noDocument.readTime);n=be.newNoDocument(r,o),t.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!t.unknownDocument)return ft(56709);{const r=lt.fromSegments(t.unknownDocument.path),o=ma(t.unknownDocument.version);n=be.newUnknownDocument(r,o)}}return t.readTime&&n.setReadTime((function(o){const u=new Yt(o[0],o[1]);return vt.fromTimestamp(u)})(t.readTime)),n}function q0(s,t){const n=t.key,r={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Qh(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())r.document=(function(u,h){return{name:Hh(u,h.key),fields:h.data.value.mapValue.fields,updateTime:Po(u,h.version.toTimestamp()),createTime:Po(u,h.createTime.toTimestamp())}})(s.yt,t);else if(t.isNoDocument())r.noDocument={path:n.path.toArray(),readTime:da(t.version)};else{if(!t.isUnknownDocument())return ft(57904,{document:t});r.unknownDocument={path:n.path.toArray(),version:da(t.version)}}return r}function Qh(s){const t=s.toTimestamp();return[t.seconds,t.nanoseconds]}function da(s){const t=s.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function ma(s){const t=new Yt(s.seconds,s.nanoseconds);return vt.fromTimestamp(t)}function Ws(s,t){const n=(t.baseMutations||[]).map((u=>pg(s.yt,u)));for(let u=0;u<t.mutations.length-1;++u){const h=t.mutations[u];if(u+1<t.mutations.length&&t.mutations[u+1].transform!==void 0){const m=t.mutations[u+1];h.updateTransforms=m.transform.fieldTransforms,t.mutations.splice(u+1,1),++u}}const r=t.mutations.map((u=>pg(s.yt,u))),o=Yt.fromMillis(t.localWriteTimeMs);return new Hg(t.batchId,o,n,r)}function Wl(s){const t=ma(s.readTime),n=s.lastLimboFreeSnapshotVersion!==void 0?ma(s.lastLimboFreeSnapshotVersion):vt.min();let r;return r=(function(u){return u.documents!==void 0})(s.query)?(function(u){const h=u.documents.length;return pt(h===1,1966,{count:h}),ti(lf(r1(u.documents[0])))})(s.query):(function(u){return ti(l1(u))})(s.query),new dr(r,s.targetId,"TargetPurposeListen",s.lastListenSequenceNumber,t,n,Be.fromBase64String(s.resumeToken))}function d1(s,t){const n=da(t.snapshotVersion),r=da(t.lastLimboFreeSnapshotVersion);let o;o=qh(t.target)?a1(s.yt,t.target):o1(s.yt,t.target).ft;const u=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:fa(t.target),readTime:n,resumeToken:u,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:o}}function m1(s){const t=l1({parent:s.parent,structuredQuery:s.structuredQuery});return s.limitType==="LAST"?fg(t,t.limit,"L"):t}function zm(s,t){return new Qg(t.largestBatchId,pg(s.yt,t.overlayMutation))}function F0(s,t){const n=t.path.lastSegment();return[s,hn(t.path.popLast()),n]}function H0(s,t,n,r){return{indexId:s,uid:t,sequenceNumber:n,readTime:da(r.readTime),documentKey:hn(r.documentKey.path),largestBatchId:r.largestBatchId}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{getBundleMetadata(t,n){return G0(t).get(n).next((r=>{if(r)return(function(u){return{id:u.bundleId,createTime:ma(u.createTime),version:u.version}})(r)}))}saveBundleMetadata(t,n){return G0(t).put((function(o){return{bundleId:o.id,createTime:da(gn(o.createTime)),version:o.version}})(n))}getNamedQuery(t,n){return Q0(t).get(n).next((r=>{if(r)return(function(u){return{name:u.name,query:m1(u.bundledQuery),readTime:ma(u.readTime)}})(r)}))}saveNamedQuery(t,n){return Q0(t).put((function(o){return{name:o.name,readTime:da(gn(o.readTime)),bundledQuery:o.bundledQuery}})(n))}}function G0(s){return Fe(s,nf)}function Q0(s){return Fe(s,rf)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(t,n){this.serializer=t,this.userId=n}static wt(t,n){const r=n.uid||"";return new df(t,r)}getOverlay(t,n){return Gl(t).get(F0(this.userId,n)).next((r=>r?zm(this.serializer,r):null))}getOverlays(t,n){const r=Ui();return k.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,n,r){const o=[];return r.forEach(((u,h)=>{const m=new Qg(n,h);o.push(this.St(t,m))})),k.waitFor(o)}removeOverlaysForBatchId(t,n,r){const o=new Set;n.forEach((h=>o.add(hn(h.getCollectionPath()))));const u=[];return o.forEach((h=>{const m=IDBKeyRange.bound([this.userId,h,r],[this.userId,h,r+1],!1,!0);u.push(Gl(t).Z(rg,m))})),k.waitFor(u)}getOverlaysForCollection(t,n,r){const o=Ui(),u=hn(n),h=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return Gl(t).J(rg,h).next((m=>{for(const g of m){const y=zm(this.serializer,g);o.set(y.getKey(),y)}return o}))}getOverlaysForCollectionGroup(t,n,r,o){const u=Ui();let h;const m=IDBKeyRange.bound([this.userId,n,r],[this.userId,n,Number.POSITIVE_INFINITY],!0);return Gl(t).ee({index:gT,range:m},((g,y,E)=>{const A=zm(this.serializer,y);u.size()<o||A.largestBatchId===h?(u.set(A.getKey(),A),h=A.largestBatchId):E.done()})).next((()=>u))}St(t,n){return Gl(t).put((function(o,u,h){const[m,g,y]=F0(u,h.mutation.key);return{userId:u,collectionPath:g,documentId:y,collectionGroup:h.mutation.key.getCollectionGroup(),largestBatchId:h.largestBatchId,overlayMutation:Gh(o.yt,h.mutation)}})(this.serializer,this.userId,n))}}function Gl(s){return Fe(s,sf)}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{bt(t){return Fe(t,kg)}getSessionToken(t){return this.bt(t).get("sessionToken").next((n=>{const r=n==null?void 0:n.value;return r?Be.fromUint8Array(r):Be.EMPTY_BYTE_STRING}))}setSessionToken(t,n){return this.bt(t).put({name:"sessionToken",value:n.toUint8Array()})}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ta{constructor(){}Dt(t,n){this.Ct(t,n),n.vt()}Ct(t,n){if("nullValue"in t)this.Ft(n,5);else if("booleanValue"in t)this.Ft(n,10),n.Mt(t.booleanValue?1:0);else if("integerValue"in t)this.Ft(n,15),n.Mt(ye(t.integerValue));else if("doubleValue"in t){const r=ye(t.doubleValue);isNaN(r)?this.Ft(n,13):(this.Ft(n,15),mu(r)?n.Mt(0):n.Mt(r))}else if("timestampValue"in t){let r=t.timestampValue;this.Ft(n,20),typeof r=="string"&&(r=pr(r)),n.xt(`${r.seconds||""}`),n.Mt(r.nanos||0)}else if("stringValue"in t)this.Ot(t.stringValue,n),this.Nt(n);else if("bytesValue"in t)this.Ft(n,30),n.Bt(yr(t.bytesValue)),this.Nt(n);else if("referenceValue"in t)this.Lt(t.referenceValue,n);else if("geoPointValue"in t){const r=t.geoPointValue;this.Ft(n,45),n.Mt(r.latitude||0),n.Mt(r.longitude||0)}else"mapValue"in t?RT(t)?this.Ft(n,Number.MAX_SAFE_INTEGER):of(t)?this.kt(t.mapValue,n):(this.qt(t.mapValue,n),this.Nt(n)):"arrayValue"in t?(this.Qt(t.arrayValue,n),this.Nt(n)):ft(19022,{$t:t})}Ot(t,n){this.Ft(n,25),this.Ut(t,n)}Ut(t,n){n.xt(t)}qt(t,n){const r=t.fields||{};this.Ft(n,55);for(const o of Object.keys(r))this.Ot(o,n),this.Ct(r[o],n)}kt(t,n){var h,m;const r=t.fields||{};this.Ft(n,53);const o=xo,u=((m=(h=r[o].arrayValue)==null?void 0:h.values)==null?void 0:m.length)||0;this.Ft(n,15),n.Mt(ye(u)),this.Ot(o,n),this.Ct(r[o],n)}Qt(t,n){const r=t.values||[];this.Ft(n,50);for(const o of r)this.Ct(o,n)}Lt(t,n){this.Ft(n,37),lt.fromName(t).path.forEach((r=>{this.Ft(n,60),this.Ut(r,n)}))}Ft(t,n){t.Mt(n)}Nt(t){t.Mt(2)}}ta.Kt=new ta;/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law | agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES | CONDITIONS OF ANY KIND, either express | implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uo=255;function AI(s){if(s===0)return 8;let t=0;return s>>4||(t+=4,s<<=4),s>>6||(t+=2,s<<=2),s>>7||(t+=1),t}function K0(s){const t=64-(function(r){let o=0;for(let u=0;u<8;++u){const h=AI(255&r[u]);if(o+=h,h!==8)break}return o})(s);return Math.ceil(t/8)}class bI{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Wt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Gt(r.value),r=n.next();this.zt()}jt(t){const n=t[Symbol.iterator]();let r=n.next();for(;!r.done;)this.Jt(r.value),r=n.next();this.Ht()}Yt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Gt(r);else if(r<2048)this.Gt(960|r>>>6),this.Gt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Gt(480|r>>>12),this.Gt(128|63&r>>>6),this.Gt(128|63&r);else{const o=n.codePointAt(0);this.Gt(240|o>>>18),this.Gt(128|63&o>>>12),this.Gt(128|63&o>>>6),this.Gt(128|63&o)}}this.zt()}Zt(t){for(const n of t){const r=n.charCodeAt(0);if(r<128)this.Jt(r);else if(r<2048)this.Jt(960|r>>>6),this.Jt(128|63&r);else if(n<"\uD800"||"\uDBFF"<n)this.Jt(480|r>>>12),this.Jt(128|63&r>>>6),this.Jt(128|63&r);else{const o=n.codePointAt(0);this.Jt(240|o>>>18),this.Jt(128|63&o>>>12),this.Jt(128|63&o>>>6),this.Jt(128|63&o)}}this.Ht()}Xt(t){const n=this.en(t),r=K0(n);this.tn(1+r),this.buffer[this.position++]=255&r;for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=255&n[o]}nn(t){const n=this.en(t),r=K0(n);this.tn(1+r),this.buffer[this.position++]=~(255&r);for(let o=n.length-r;o<n.length;++o)this.buffer[this.position++]=~(255&n[o])}rn(){this.sn(uo),this.sn(255)}_n(){this.an(uo),this.an(255)}reset(){this.position=0}seed(t){this.tn(t.length),this.buffer.set(t,this.position),this.position+=t.length}un(){return this.buffer.slice(0,this.position)}en(t){const n=(function(u){const h=new DataView(new ArrayBuffer(8));return h.setFloat64(0,u,!1),new Uint8Array(h.buffer)})(t),r=!!(128&n[0]);n[0]^=r?255:128;for(let o=1;o<n.length;++o)n[o]^=r?255:0;return n}Gt(t){const n=255&t;n===0?(this.sn(0),this.sn(255)):n===uo?(this.sn(uo),this.sn(0)):this.sn(n)}Jt(t){const n=255&t;n===0?(this.an(0),this.an(255)):n===uo?(this.an(uo),this.an(0)):this.an(t)}zt(){this.sn(0),this.sn(1)}Ht(){this.an(0),this.an(1)}sn(t){this.tn(1),this.buffer[this.position++]=t}an(t){this.tn(1),this.buffer[this.position++]=~t}tn(t){const n=t+this.position;if(n<=this.buffer.length)return;let r=2*this.buffer.length;r<n&&(r=n);const o=new Uint8Array(r);o.set(this.buffer),this.buffer=o}}class SI{constructor(t){this.cn=t}Bt(t){this.cn.Wt(t)}xt(t){this.cn.Yt(t)}Mt(t){this.cn.Xt(t)}vt(){this.cn.rn()}}class wI{constructor(t){this.cn=t}Bt(t){this.cn.jt(t)}xt(t){this.cn.Zt(t)}Mt(t){this.cn.nn(t)}vt(){this.cn._n()}}class Ql{constructor(){this.cn=new bI,this.ln=new SI(this.cn),this.hn=new wI(this.cn)}seed(t){this.cn.seed(t)}Pn(t){return t===0?this.ln:this.hn}un(){return this.cn.un()}reset(){this.cn.reset()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ea{constructor(t,n,r,o){this.Tn=t,this.In=n,this.En=r,this.dn=o}An(){const t=this.dn.length,n=t===0||this.dn[t-1]===255?t+1:t,r=new Uint8Array(n);return r.set(this.dn,0),n!==t?r.set([0],this.dn.length):++r[r.length-1],new ea(this.Tn,this.In,this.En,r)}Rn(t,n,r){return{indexId:this.Tn,uid:t,arrayValue:Dh(this.En),directionalValue:Dh(this.dn),orderedDocumentKey:Dh(n),documentKey:r.path.toArray()}}Vn(t,n,r){const o=this.Rn(t,n,r);return[o.indexId,o.uid,o.arrayValue,o.directionalValue,o.orderedDocumentKey,o.documentKey]}}function ts(s,t){let n=s.Tn-t.Tn;return n!==0?n:(n=Y0(s.En,t.En),n!==0?n:(n=Y0(s.dn,t.dn),n!==0?n:lt.comparator(s.In,t.In)))}function Y0(s,t){for(let n=0;n<s.length&&n<t.length;++n){const r=s[n]-t[n];if(r!==0)return r}return s.length-t.length}function Dh(s){return jE()?(function(n){let r="";for(let o=0;o<n.length;o++)r+=String.fromCharCode(n[o]);return r})(s):s}function X0(s){return typeof s!="string"?s:(function(n){const r=new Uint8Array(n.length);for(let o=0;o<n.length;o++)r[o]=n.charCodeAt(o);return r})(s)}class Z0{constructor(t){this.mn=new se(((n,r)=>Ee.comparator(n.field,r.field))),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.fn=t.orderBy,this.gn=[];for(const n of t.filters){const r=n;r.isInequality()?this.mn=this.mn.add(r):this.gn.push(r)}}get pn(){return this.mn.size>1}yn(t){if(pt(t.collectionGroup===this.collectionId,49279),this.pn)return!1;const n=eg(t);if(n!==void 0&&!this.wn(n))return!1;const r=Zs(t);let o=new Set,u=0,h=0;for(;u<r.length&&this.wn(r[u]);++u)o=o.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(this.mn.size>0){const m=this.mn.getIterator().getNext();if(!o.has(m.field.canonicalString())){const g=r[u];if(!this.Sn(m,g)||!this.bn(this.fn[h++],g))return!1}++u}for(;u<r.length;++u){const m=r[u];if(h>=this.fn.length||!this.bn(this.fn[h++],m))return!1}return!0}Dn(){if(this.pn)return null;let t=new se(Ee.comparator);const n=[];for(const r of this.gn)if(!r.field.isKeyField())if(r.op==="array-contains"||r.op==="array-contains-any")n.push(new Th(r.field,2));else{if(t.has(r.field))continue;t=t.add(r.field),n.push(new Th(r.field,0))}for(const r of this.fn)r.field.isKeyField()||t.has(r.field)||(t=t.add(r.field),n.push(new Th(r.field,r.dir==="asc"?0:1)));return new kh(kh.UNKNOWN_ID,this.collectionId,n,du.empty())}wn(t){for(const n of this.gn)if(this.Sn(n,t))return!0;return!1}Sn(t,n){if(t===void 0||!t.field.isEqual(n.fieldPath))return!1;const r=t.op==="array-contains"||t.op==="array-contains-any";return n.kind===2===r}bn(t,n){return!!t.field.isEqual(n.fieldPath)&&(n.kind===0&&t.dir==="asc"||n.kind===1&&t.dir==="desc")}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g1(s){var n,r;if(pt(s instanceof Ft||s instanceof re,20012),s instanceof Ft){if(s instanceof zT){const o=((r=(n=s.value.arrayValue)==null?void 0:n.values)==null?void 0:r.map((u=>Ft.create(s.field,"==",u))))||[];return re.create(o,"or")}return s}const t=s.filters.map((o=>g1(o)));return re.create(t,s.op)}function II(s){if(s.getFilters().length===0)return[];const t=vg(g1(s));return pt(p1(t),7391),yg(t)||_g(t)?[t]:t.getFilters()}function yg(s){return s instanceof Ft}function _g(s){return s instanceof re&&qg(s)}function p1(s){return yg(s)||_g(s)||(function(n){if(n instanceof re&&lg(n)){for(const r of n.getFilters())if(!yg(r)&&!_g(r))return!1;return!0}return!1})(s)}function vg(s){if(pt(s instanceof Ft||s instanceof re,34018),s instanceof Ft)return s;if(s.filters.length===1)return vg(s.filters[0]);const t=s.filters.map((r=>vg(r)));let n=re.create(t,s.op);return n=Kh(n),p1(n)?n:(pt(n instanceof re,64498),pt(Vo(n),40251),pt(n.filters.length>1,57927),n.filters.reduce(((r,o)=>Xg(r,o))))}function Xg(s,t){let n;return pt(s instanceof Ft||s instanceof re,38388),pt(t instanceof Ft||t instanceof re,25473),n=s instanceof Ft?t instanceof Ft?(function(o,u){return re.create([o,u],"and")})(s,t):J0(s,t):t instanceof Ft?J0(t,s):(function(o,u){if(pt(o.filters.length>0&&u.filters.length>0,48005),Vo(o)&&Vo(u))return MT(o,u.getFilters());const h=lg(o)?o:u,m=lg(o)?u:o,g=h.filters.map((y=>Xg(y,m)));return re.create(g,"or")})(s,t),Kh(n)}function J0(s,t){if(Vo(t))return MT(t,s.getFilters());{const n=t.filters.map((r=>Xg(s,r)));return re.create(n,"or")}}function Kh(s){if(pt(s instanceof Ft||s instanceof re,11850),s instanceof Ft)return s;const t=s.getFilters();if(t.length===1)return Kh(t[0]);if(VT(s))return s;const n=t.map((o=>Kh(o))),r=[];return n.forEach((o=>{o instanceof Ft?r.push(o):o instanceof re&&(o.op===s.op?r.push(...o.filters):r.push(o))})),r.length===1?r[0]:re.create(r,s.op)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(){this.Cn=new Zg}addToCollectionParentIndex(t,n){return this.Cn.add(n),k.resolve()}getCollectionParents(t,n){return k.resolve(this.Cn.getEntries(n))}addFieldIndex(t,n){return k.resolve()}deleteFieldIndex(t,n){return k.resolve()}deleteAllFieldIndexes(t){return k.resolve()}createTargetIndexes(t,n){return k.resolve()}getDocumentsMatchingTarget(t,n){return k.resolve(null)}getIndexType(t,n){return k.resolve(0)}getFieldIndexes(t,n){return k.resolve([])}getNextCollectionGroupToUpdate(t){return k.resolve(null)}getMinOffset(t,n){return k.resolve(kn.min())}getMinOffsetFromCollectionGroup(t,n){return k.resolve(kn.min())}updateCollectionGroup(t,n,r){return k.resolve()}updateIndexEntries(t,n){return k.resolve()}}class Zg{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n]||new se(Wt.comparator),u=!o.has(r);return this.index[n]=o.add(r),u}has(t){const n=t.lastSegment(),r=t.popLast(),o=this.index[n];return o&&o.has(r)}getEntries(t){return(this.index[t]||new se(Wt.comparator)).toArray()}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $0="IndexedDbIndexManager",ph=new Uint8Array(0);class xI{constructor(t,n){this.databaseId=n,this.vn=new Zg,this.Fn=new vr((r=>fa(r)),((r,o)=>Ru(r,o))),this.uid=t.uid||""}addToCollectionParentIndex(t,n){if(!this.vn.has(n)){const r=n.lastSegment(),o=n.popLast();t.addOnCommittedListener((()=>{this.vn.add(n)}));const u={collectionId:r,parent:hn(o)};return W0(t).put(u)}return k.resolve()}getCollectionParents(t,n){const r=[],o=IDBKeyRange.bound([n,""],[iT(n),""],!1,!0);return W0(t).J(o).next((u=>{for(const h of u){if(h.collectionId!==n)break;r.push(Li(h.parent))}return r}))}addFieldIndex(t,n){const r=Kl(t),o=(function(m){return{indexId:m.indexId,collectionGroup:m.collectionGroup,fields:m.fields.map((g=>[g.fieldPath.canonicalString(),g.kind]))}})(n);delete o.indexId;const u=r.add(o);if(n.indexState){const h=ho(t);return u.next((m=>{h.put(H0(m,this.uid,n.indexState.sequenceNumber,n.indexState.offset))}))}return u.next()}deleteFieldIndex(t,n){const r=Kl(t),o=ho(t),u=co(t);return r.delete(n.indexId).next((()=>o.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))).next((()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))))}deleteAllFieldIndexes(t){const n=Kl(t),r=co(t),o=ho(t);return n.Z().next((()=>r.Z())).next((()=>o.Z()))}createTargetIndexes(t,n){return k.forEach(this.Mn(n),(r=>this.getIndexType(t,r).next((o=>{if(o===0||o===1){const u=new Z0(r).Dn();if(u!=null)return this.addFieldIndex(t,u)}}))))}getDocumentsMatchingTarget(t,n){const r=co(t);let o=!0;const u=new Map;return k.forEach(this.Mn(n),(h=>this.xn(t,h).next((m=>{o&&(o=!!m),u.set(h,m)})))).next((()=>{if(o){let h=zt();const m=[];return k.forEach(u,((g,y)=>{et($0,`Using index ${(function(at){return`id=${at.indexId}|cg=${at.collectionGroup}|f=${at.fields.map((At=>`${At.fieldPath}:${At.kind}`)).join(",")}`})(g)} to execute ${fa(n)}`);const E=(function(at,At){const St=eg(At);if(St===void 0)return null;for(const yt of Fh(at,St.fieldPath))switch(yt.op){case"array-contains-any":return yt.value.arrayValue.values||[];case"array-contains":return[yt.value]}return null})(y,g),A=(function(at,At){const St=new Map;for(const yt of Zs(At))for(const D of Fh(at,yt.fieldPath))switch(D.op){case"==":case"in":St.set(yt.fieldPath.canonicalString(),D.value);break;case"not-in":case"!=":return St.set(yt.fieldPath.canonicalString(),D.value),Array.from(St.values())}return null})(y,g),S=(function(at,At){const St=[];let yt=!0;for(const D of Zs(At)){const I=D.kind===0?C0(at,D.fieldPath,at.startAt):V0(at,D.fieldPath,at.startAt);St.push(I.value),yt&&(yt=I.inclusive)}return new Co(St,yt)})(y,g),U=(function(at,At){const St=[];let yt=!0;for(const D of Zs(At)){const I=D.kind===0?V0(at,D.fieldPath,at.endAt):C0(at,D.fieldPath,at.endAt);St.push(I.value),yt&&(yt=I.inclusive)}return new Co(St,yt)})(y,g),W=this.On(g,y,S),Q=this.On(g,y,U),X=this.Nn(g,y,A),st=this.Bn(g.indexId,E,W,S.inclusive,Q,U.inclusive,X);return k.forEach(st,(rt=>r.Y(rt,n.limit).next((at=>{at.forEach((At=>{const St=lt.fromSegments(At.documentKey);h.has(St)||(h=h.add(St),m.push(St))}))}))))})).next((()=>m))}return k.resolve(null)}))}Mn(t){let n=this.Fn.get(t);return n||(t.filters.length===0?n=[t]:n=II(re.create(t.filters,"and")).map((r=>cg(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt))),this.Fn.set(t,n),n)}Bn(t,n,r,o,u,h,m){const g=(n!=null?n.length:1)*Math.max(r.length,u.length),y=g/(n!=null?n.length:1),E=[];for(let A=0;A<g;++A){const S=n?this.Ln(n[A/y]):ph,U=this.kn(t,S,r[A%y],o),W=this.qn(t,S,u[A%y],h),Q=m.map((X=>this.kn(t,S,X,!0)));E.push(...this.createRange(U,W,Q))}return E}kn(t,n,r,o){const u=new ea(t,lt.empty(),n,r);return o?u:u.An()}qn(t,n,r,o){const u=new ea(t,lt.empty(),n,r);return o?u.An():u}xn(t,n){const r=new Z0(n),o=n.collectionGroup!=null?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(t,o).next((u=>{let h=null;for(const m of u)r.yn(m)&&(!h||m.fields.length>h.fields.length)&&(h=m);return h}))}getIndexType(t,n){let r=2;const o=this.Mn(n);return k.forEach(o,(u=>this.xn(t,u).next((h=>{h?r!==0&&h.fields.length<(function(g){let y=new se(Ee.comparator),E=!1;for(const A of g.filters)for(const S of A.getFlattenedFilters())S.field.isKeyField()||(S.op==="array-contains"||S.op==="array-contains-any"?E=!0:y=y.add(S.field));for(const A of g.orderBy)A.field.isKeyField()||(y=y.add(A.field));return y.size+(E?1:0)})(u)&&(r=1):r=0})))).next((()=>(function(h){return h.limit!==null})(n)&&o.length>1&&r===2?1:r))}Qn(t,n){const r=new Ql;for(const o of Zs(t)){const u=n.data.field(o.fieldPath);if(u==null)return null;const h=r.Pn(o.kind);ta.Kt.Dt(u,h)}return r.un()}Ln(t){const n=new Ql;return ta.Kt.Dt(t,n.Pn(0)),n.un()}$n(t,n){const r=new Ql;return ta.Kt.Dt(Eu(this.databaseId,n),r.Pn((function(u){const h=Zs(u);return h.length===0?0:h[h.length-1].kind})(t))),r.un()}Nn(t,n,r){if(r===null)return[];let o=[];o.push(new Ql);let u=0;for(const h of Zs(t)){const m=r[u++];for(const g of o)if(this.Un(n,h.fieldPath)&&Tu(m))o=this.Kn(o,h,m);else{const y=g.Pn(h.kind);ta.Kt.Dt(m,y)}}return this.Wn(o)}On(t,n,r){return this.Nn(t,n,r.position)}Wn(t){const n=[];for(let r=0;r<t.length;++r)n[r]=t[r].un();return n}Kn(t,n,r){const o=[...t],u=[];for(const h of r.arrayValue.values||[])for(const m of o){const g=new Ql;g.seed(m.un()),ta.Kt.Dt(h,g.Pn(n.kind)),u.push(g)}return u}Un(t,n){return!!t.filters.find((r=>r instanceof Ft&&r.field.isEqual(n)&&(r.op==="in"||r.op==="not-in")))}getFieldIndexes(t,n){const r=Kl(t),o=ho(t);return(n?r.J(ig,IDBKeyRange.bound(n,n)):r.J()).next((u=>{const h=[];return k.forEach(u,(m=>o.get([m.indexId,this.uid]).next((g=>{h.push((function(E,A){const S=A?new du(A.sequenceNumber,new kn(ma(A.readTime),new lt(Li(A.documentKey)),A.largestBatchId)):du.empty(),U=E.fields.map((([W,Q])=>new Th(Ee.fromServerFormat(W),Q)));return new kh(E.indexId,E.collectionGroup,U,S)})(m,g))})))).next((()=>h))}))}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next((n=>n.length===0?null:(n.sort(((r,o)=>{const u=r.indexState.sequenceNumber-o.indexState.sequenceNumber;return u!==0?u:It(r.collectionGroup,o.collectionGroup)})),n[0].collectionGroup)))}updateCollectionGroup(t,n,r){const o=Kl(t),u=ho(t);return this.Gn(t).next((h=>o.J(ig,IDBKeyRange.bound(n,n)).next((m=>k.forEach(m,(g=>u.put(H0(g.indexId,this.uid,h,r))))))))}updateIndexEntries(t,n){const r=new Map;return k.forEach(n,((o,u)=>{const h=r.get(o.collectionGroup);return(h?k.resolve(h):this.getFieldIndexes(t,o.collectionGroup)).next((m=>(r.set(o.collectionGroup,m),k.forEach(m,(g=>this.zn(t,o,g).next((y=>{const E=this.jn(u,g);return y.isEqual(E)?k.resolve():this.Jn(t,u,g,y,E)})))))))}))}Hn(t,n,r,o){return co(t).put(o.Rn(this.uid,this.$n(r,n.key),n.key))}Yn(t,n,r,o){return co(t).delete(o.Vn(this.uid,this.$n(r,n.key),n.key))}zn(t,n,r){const o=co(t);let u=new se(ts);return o.ee({index:mT,range:IDBKeyRange.only([r.indexId,this.uid,Dh(this.$n(r,n))])},((h,m)=>{u=u.add(new ea(r.indexId,n,X0(m.arrayValue),X0(m.directionalValue)))})).next((()=>u))}jn(t,n){let r=new se(ts);const o=this.Qn(n,t);if(o==null)return r;const u=eg(n);if(u!=null){const h=t.data.field(u.fieldPath);if(Tu(h))for(const m of h.arrayValue.values||[])r=r.add(new ea(n.indexId,t.key,this.Ln(m),o))}else r=r.add(new ea(n.indexId,t.key,ph,o));return r}Jn(t,n,r,o,u){et($0,"Updating index entries for document '%s'",n.key);const h=[];return(function(g,y,E,A,S){const U=g.getIterator(),W=y.getIterator();let Q=lo(U),X=lo(W);for(;Q||X;){let st=!1,rt=!1;if(Q&&X){const at=E(Q,X);at<0?rt=!0:at>0&&(st=!0)}else Q!=null?rt=!0:st=!0;st?(A(X),X=lo(W)):rt?(S(Q),Q=lo(U)):(Q=lo(U),X=lo(W))}})(o,u,ts,(m=>{h.push(this.Hn(t,n,r,m))}),(m=>{h.push(this.Yn(t,n,r,m))})),k.waitFor(h)}Gn(t){let n=1;return ho(t).ee({index:dT,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},((r,o,u)=>{u.done(),n=o.sequenceNumber+1})).next((()=>n))}createRange(t,n,r){r=r.sort(((h,m)=>ts(h,m))).filter(((h,m,g)=>!m||ts(h,g[m-1])!==0));const o=[];o.push(t);for(const h of r){const m=ts(h,t),g=ts(h,n);if(m===0)o[0]=t.An();else if(m>0&&g<0)o.push(h),o.push(h.An());else if(g>0)break}o.push(n);const u=[];for(let h=0;h<o.length;h+=2){if(this.Zn(o[h],o[h+1]))return[];const m=o[h].Vn(this.uid,ph,lt.empty()),g=o[h+1].Vn(this.uid,ph,lt.empty());u.push(IDBKeyRange.bound(m,g))}return u}Zn(t,n){return ts(t,n)>0}getMinOffsetFromCollectionGroup(t,n){return this.getFieldIndexes(t,n).next(tE)}getMinOffset(t,n){return k.mapArray(this.Mn(n),(r=>this.xn(t,r).next((o=>o||ft(44426))))).next(tE)}}function W0(s){return Fe(s,yu)}function co(s){return Fe(s,su)}function Kl(s){return Fe(s,zg)}function ho(s){return Fe(s,ru)}function tE(s){pt(s.length!==0,28825);let t=s[0].indexState.offset,n=t.largestBatchId;for(let r=1;r<s.length;r++){const o=s[r].indexState.offset;Mg(o,t)<0&&(t=o),n<o.largestBatchId&&(n=o.largestBatchId)}return new kn(t.readTime,t.documentKey,n)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eE={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},y1=41943040;class ln{static withCacheSize(t){return new ln(t,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _1(s,t,n){const r=s.store(gi),o=s.store(So),u=[],h=IDBKeyRange.only(n.batchId);let m=0;const g=r.ee({range:h},((E,A,S)=>(m++,S.delete())));u.push(g.next((()=>{pt(m===1,47070,{batchId:n.batchId})})));const y=[];for(const E of n.mutations){const A=cT(t,E.key.path,n.batchId);u.push(o.delete(A)),y.push(E.key)}return k.waitFor(u).next((()=>y))}function Yh(s){if(!s)return 0;let t;if(s.document)t=s.document;else if(s.unknownDocument)t=s.unknownDocument;else{if(!s.noDocument)throw ft(14731);t=s.noDocument}return JSON.stringify(t).length}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ln.DEFAULT_COLLECTION_PERCENTILE=10,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ln.DEFAULT=new ln(y1,ln.DEFAULT_COLLECTION_PERCENTILE,ln.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ln.DISABLED=new ln(-1,0,0);class mf{constructor(t,n,r,o){this.userId=t,this.serializer=n,this.indexManager=r,this.referenceDelegate=o,this.Xn={}}static wt(t,n,r,o){pt(t.uid!=="",64387);const u=t.isAuthenticated()?t.uid:"";return new mf(u,n,r,o)}checkEmpty(t){let n=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return es(t).ee({index:ia,range:r},((o,u,h)=>{n=!1,h.done()})).next((()=>n))}addMutationBatch(t,n,r,o){const u=_o(t),h=es(t);return h.add({}).next((m=>{pt(typeof m=="number",49019);const g=new Hg(m,n,r,o),y=(function(U,W,Q){const X=Q.baseMutations.map((rt=>Gh(U.yt,rt))),st=Q.mutations.map((rt=>Gh(U.yt,rt)));return{userId:W,batchId:Q.batchId,localWriteTimeMs:Q.localWriteTime.toMillis(),baseMutations:X,mutations:st}})(this.serializer,this.userId,g),E=[];let A=new se(((S,U)=>It(S.canonicalString(),U.canonicalString())));for(const S of o){const U=cT(this.userId,S.key.path,m);A=A.add(S.key.path.popLast()),E.push(h.put(y)),E.push(u.put(U,i2))}return A.forEach((S=>{E.push(this.indexManager.addToCollectionParentIndex(t,S))})),t.addOnCommittedListener((()=>{this.Xn[m]=g.keys()})),k.waitFor(E).next((()=>g))}))}lookupMutationBatch(t,n){return es(t).get(n).next((r=>r?(pt(r.userId===this.userId,48,"Unexpected user for mutation batch",{userId:r.userId,batchId:n}),Ws(this.serializer,r)):null))}er(t,n){return this.Xn[n]?k.resolve(this.Xn[n]):this.lookupMutationBatch(t,n).next((r=>{if(r){const o=r.keys();return this.Xn[n]=o,o}return null}))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return es(t).ee({index:ia,range:o},((h,m,g)=>{m.userId===this.userId&&(pt(m.batchId>=r,47524,{tr:r}),u=Ws(this.serializer,m)),g.done()})).next((()=>u))}getHighestUnacknowledgedBatchId(t){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=ra;return es(t).ee({index:ia,range:n,reverse:!0},((o,u,h)=>{r=u.batchId,h.done()})).next((()=>r))}getAllMutationBatches(t){const n=IDBKeyRange.bound([this.userId,ra],[this.userId,Number.POSITIVE_INFINITY]);return es(t).J(ia,n).next((r=>r.map((o=>Ws(this.serializer,o)))))}getAllMutationBatchesAffectingDocumentKey(t,n){const r=Ah(this.userId,n.path),o=IDBKeyRange.lowerBound(r),u=[];return _o(t).ee({range:o},((h,m,g)=>{const[y,E,A]=h,S=Li(E);if(y===this.userId&&n.path.isEqual(S))return es(t).get(A).next((U=>{if(!U)throw ft(61480,{nr:h,batchId:A});pt(U.userId===this.userId,10503,"Unexpected user for mutation batch",{userId:U.userId,batchId:A}),u.push(Ws(this.serializer,U))}));g.done()})).next((()=>u))}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new se(It);const o=[];return n.forEach((u=>{const h=Ah(this.userId,u.path),m=IDBKeyRange.lowerBound(h),g=_o(t).ee({range:m},((y,E,A)=>{const[S,U,W]=y,Q=Li(U);S===this.userId&&u.path.isEqual(Q)?r=r.add(W):A.done()}));o.push(g)})),k.waitFor(o).next((()=>this.rr(t,r)))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1,u=Ah(this.userId,r),h=IDBKeyRange.lowerBound(u);let m=new se(It);return _o(t).ee({range:h},((g,y,E)=>{const[A,S,U]=g,W=Li(S);A===this.userId&&r.isPrefixOf(W)?W.length===o&&(m=m.add(U)):E.done()})).next((()=>this.rr(t,m)))}rr(t,n){const r=[],o=[];return n.forEach((u=>{o.push(es(t).get(u).next((h=>{if(h===null)throw ft(35274,{batchId:u});pt(h.userId===this.userId,9748,"Unexpected user for mutation batch",{userId:h.userId,batchId:u}),r.push(Ws(this.serializer,h))})))})),k.waitFor(o).next((()=>r))}removeMutationBatch(t,n){return _1(t.le,this.userId,n).next((r=>(t.addOnCommittedListener((()=>{this.ir(n.batchId)})),k.forEach(r,(o=>this.referenceDelegate.markPotentiallyOrphaned(t,o))))))}ir(t){delete this.Xn[t]}performConsistencyCheck(t){return this.checkEmpty(t).next((n=>{if(!n)return k.resolve();const r=IDBKeyRange.lowerBound((function(h){return[h]})(this.userId)),o=[];return _o(t).ee({range:r},((u,h,m)=>{if(u[0]===this.userId){const g=Li(u[1]);o.push(g)}else m.done()})).next((()=>{pt(o.length===0,56720,{sr:o.map((u=>u.canonicalString()))})}))}))}containsKey(t,n){return v1(t,this.userId,n)}_r(t){return E1(t).get(this.userId).next((n=>n||{userId:this.userId,lastAcknowledgedBatchId:ra,lastStreamToken:""}))}}function v1(s,t,n){const r=Ah(t,n.path),o=r[1],u=IDBKeyRange.lowerBound(r);let h=!1;return _o(s).ee({range:u,X:!0},((m,g,y)=>{const[E,A,S]=m;E===t&&A===o&&(h=!0),y.done()})).next((()=>h))}function es(s){return Fe(s,gi)}function _o(s){return Fe(s,So)}function E1(s){return Fe(s,gu)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ga{constructor(t){this.ar=t}next(){return this.ar+=2,this.ar}static ur(){return new ga(0)}static cr(){return new ga(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(t,n){this.referenceDelegate=t,this.serializer=n}allocateTargetId(t){return this.lr(t).next((n=>{const r=new ga(n.highestTargetId);return n.highestTargetId=r.next(),this.hr(t,n).next((()=>n.highestTargetId))}))}getLastRemoteSnapshotVersion(t){return this.lr(t).next((n=>vt.fromTimestamp(new Yt(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds))))}getHighestSequenceNumber(t){return this.lr(t).next((n=>n.highestListenSequenceNumber))}setTargetsMetadata(t,n,r){return this.lr(t).next((o=>(o.highestListenSequenceNumber=n,r&&(o.lastRemoteSnapshotVersion=r.toTimestamp()),n>o.highestListenSequenceNumber&&(o.highestListenSequenceNumber=n),this.hr(t,o))))}addTargetData(t,n){return this.Pr(t,n).next((()=>this.lr(t).next((r=>(r.targetCount+=1,this.Tr(n,r),this.hr(t,r))))))}updateTargetData(t,n){return this.Pr(t,n)}removeTargetData(t,n){return this.removeMatchingKeysForTargetId(t,n.targetId).next((()=>fo(t).delete(n.targetId))).next((()=>this.lr(t))).next((r=>(pt(r.targetCount>0,8065),r.targetCount-=1,this.hr(t,r))))}removeTargets(t,n,r){let o=0;const u=[];return fo(t).ee(((h,m)=>{const g=Wl(m);g.sequenceNumber<=n&&r.get(g.targetId)===null&&(o++,u.push(this.removeTargetData(t,g)))})).next((()=>k.waitFor(u))).next((()=>o))}forEachTarget(t,n){return fo(t).ee(((r,o)=>{const u=Wl(o);n(u)}))}lr(t){return nE(t).get(jh).next((n=>(pt(n!==null,2888),n)))}hr(t,n){return nE(t).put(jh,n)}Pr(t,n){return fo(t).put(d1(this.serializer,n))}Tr(t,n){let r=!1;return t.targetId>n.highestTargetId&&(n.highestTargetId=t.targetId,r=!0),t.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=t.sequenceNumber,r=!0),r}getTargetCount(t){return this.lr(t).next((n=>n.targetCount))}getTargetData(t,n){const r=fa(n),o=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return fo(t).ee({range:o,index:fT},((h,m,g)=>{const y=Wl(m);Ru(n,y.target)&&(u=y,g.done())})).next((()=>u))}addMatchingKeys(t,n,r){const o=[],u=is(t);return n.forEach((h=>{const m=hn(h.path);o.push(u.put({targetId:r,path:m})),o.push(this.referenceDelegate.addReference(t,r,h))})),k.waitFor(o)}removeMatchingKeys(t,n,r){const o=is(t);return k.forEach(n,(u=>{const h=hn(u.path);return k.waitFor([o.delete([r,h]),this.referenceDelegate.removeReference(t,r,u)])}))}removeMatchingKeysForTargetId(t,n){const r=is(t),o=IDBKeyRange.bound([n],[n+1],!1,!0);return r.delete(o)}getMatchingKeysForTargetId(t,n){const r=IDBKeyRange.bound([n],[n+1],!1,!0),o=is(t);let u=zt();return o.ee({range:r,X:!0},((h,m,g)=>{const y=Li(h[1]),E=new lt(y);u=u.add(E)})).next((()=>u))}containsKey(t,n){const r=hn(n.path),o=IDBKeyRange.bound([r],[iT(r)],!1,!0);let u=0;return is(t).ee({index:Pg,X:!0,range:o},(([h,m],g,y)=>{h!==0&&(u++,y.done())})).next((()=>u>0))}At(t,n){return fo(t).get(n).next((r=>r?Wl(r):null))}}function fo(s){return Fe(s,wo)}function nE(s){return Fe(s,sa)}function is(s){return Fe(s,Io)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE="LruGarbageCollector",CI=1048576;function rE([s,t],[n,r]){const o=It(s,n);return o===0?It(t,r):o}class VI{constructor(t){this.Ir=t,this.buffer=new se(rE),this.Er=0}dr(){return++this.Er}Ar(t){const n=[t,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();rE(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class T1{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(t){et(iE,`Garbage collection scheduled in ${t}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,(async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){ms(n)?et(iE,"Ignoring IndexedDB error during garbage collection: ",n):await ya(n)}await this.Vr(3e5)}))}}class NI{constructor(t,n){this.mr=t,this.params=n}calculateTargetCount(t,n){return this.mr.gr(t).next((r=>Math.floor(n/100*r)))}nthSequenceNumber(t,n){if(n===0)return k.resolve($n.ce);const r=new VI(n);return this.mr.forEachTarget(t,(o=>r.Ar(o.sequenceNumber))).next((()=>this.mr.pr(t,(o=>r.Ar(o))))).next((()=>r.maxValue))}removeTargets(t,n,r){return this.mr.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.mr.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(et("LruGarbageCollector","Garbage collection skipped; disabled"),k.resolve(eE)):this.getCacheSize(t).next((r=>r<this.params.cacheSizeCollectionThreshold?(et("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),eE):this.yr(t,n)))}getCacheSize(t){return this.mr.getCacheSize(t)}yr(t,n){let r,o,u,h,m,g,y;const E=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next((A=>(A>this.params.maximumSequenceNumbersToCollect?(et("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${A}`),o=this.params.maximumSequenceNumbersToCollect):o=A,h=Date.now(),this.nthSequenceNumber(t,o)))).next((A=>(r=A,m=Date.now(),this.removeTargets(t,r,n)))).next((A=>(u=A,g=Date.now(),this.removeOrphanedDocuments(t,r)))).next((A=>(y=Date.now(),mo()<=Qt.DEBUG&&et("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${h-E}ms
	Determined least recently used ${o} in `+(m-h)+`ms
	Removed ${u} targets in `+(g-m)+`ms
	Removed ${A} documents in `+(y-g)+`ms
Total Duration: ${y-E}ms`),k.resolve({didRun:!0,sequenceNumbersCollected:o,targetsRemoved:u,documentsRemoved:A}))))}}function A1(s,t){return new NI(s,t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MI{constructor(t,n){this.db=t,this.garbageCollector=A1(this,n)}gr(t){const n=this.wr(t);return this.db.getTargetCache().getTargetCount(t).next((r=>n.next((o=>r+o))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}forEachTarget(t,n){return this.db.getTargetCache().forEachTarget(t,n)}pr(t,n){return this.Sr(t,((r,o)=>n(o)))}addReference(t,n,r){return yh(t,r)}removeReference(t,n,r){return yh(t,r)}removeTargets(t,n,r){return this.db.getTargetCache().removeTargets(t,n,r)}markPotentiallyOrphaned(t,n){return yh(t,n)}br(t,n){return(function(o,u){let h=!1;return E1(o).te((m=>v1(o,m,u).next((g=>(g&&(h=!0),k.resolve(!g)))))).next((()=>h))})(t,n)}removeOrphanedDocuments(t,n){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),o=[];let u=0;return this.Sr(t,((h,m)=>{if(m<=n){const g=this.br(t,h).next((y=>{if(!y)return u++,r.getEntry(t,h).next((()=>(r.removeEntry(h,vt.min()),is(t).delete((function(A){return[0,hn(A.path)]})(h)))))}));o.push(g)}})).next((()=>k.waitFor(o))).next((()=>r.apply(t))).next((()=>u))}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,r)}updateLimboDocument(t,n){return yh(t,n)}Sr(t,n){const r=is(t);let o,u=$n.ce;return r.ee({index:Pg},(([h,m],{path:g,sequenceNumber:y})=>{h===0?(u!==$n.ce&&n(new lt(Li(o)),u),u=y,o=g):u=$n.ce})).next((()=>{u!==$n.ce&&n(new lt(Li(o)),u)}))}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}}function yh(s,t){return is(s).put((function(r,o){return{targetId:0,path:hn(r.path),sequenceNumber:o}})(t,s.currentSequenceNumber))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b1{constructor(){this.changes=new vr((t=>t.toString()),((t,n)=>t.isEqual(n))),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,be.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?k.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,n,r){return Ys(t).put(r)}removeEntry(t,n,r){return Ys(t).delete((function(u,h){const m=u.path.toArray();return[m.slice(0,m.length-2),m[m.length-2],Qh(h),m[m.length-1]]})(n,r))}updateMetadata(t,n){return this.getMetadata(t).next((r=>(r.byteSize+=n,this.Dr(t,r))))}getEntry(t,n){let r=be.newInvalidDocument(n);return Ys(t).ee({index:bh,range:IDBKeyRange.only(Yl(n))},((o,u)=>{r=this.Cr(n,u)})).next((()=>r))}vr(t,n){let r={size:0,document:be.newInvalidDocument(n)};return Ys(t).ee({index:bh,range:IDBKeyRange.only(Yl(n))},((o,u)=>{r={document:this.Cr(n,u),size:Yh(u)}})).next((()=>r))}getEntries(t,n){let r=zn();return this.Fr(t,n,((o,u)=>{const h=this.Cr(o,u);r=r.insert(o,h)})).next((()=>r))}Mr(t,n){let r=zn(),o=new _e(lt.comparator);return this.Fr(t,n,((u,h)=>{const m=this.Cr(u,h);r=r.insert(u,m),o=o.insert(u,Yh(h))})).next((()=>({documents:r,Or:o})))}Fr(t,n,r){if(n.isEmpty())return k.resolve();let o=new se(oE);n.forEach((g=>o=o.add(g)));const u=IDBKeyRange.bound(Yl(o.first()),Yl(o.last())),h=o.getIterator();let m=h.getNext();return Ys(t).ee({index:bh,range:u},((g,y,E)=>{const A=lt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;m&&oE(m,A)<0;)r(m,null),m=h.getNext();m&&m.isEqual(A)&&(r(m,y),m=h.hasNext()?h.getNext():null),m?E.j(Yl(m)):E.done()})).next((()=>{for(;m;)r(m,null),m=h.hasNext()?h.getNext():null}))}getDocumentsMatchingQuery(t,n,r,o,u){const h=n.path,m=[h.popLast().toArray(),h.lastSegment(),Qh(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],g=[h.popLast().toArray(),h.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Ys(t).J(IDBKeyRange.bound(m,g,!0)).next((y=>{u==null||u.incrementDocumentReadCount(y.length);let E=zn();for(const A of y){const S=this.Cr(lt.fromSegments(A.prefixPath.concat(A.collectionGroup,A.documentId)),A);S.isFoundDocument()&&(xu(n,S)||o.has(S.key))&&(E=E.insert(S.key,S))}return E}))}getAllFromCollectionGroup(t,n,r,o){let u=zn();const h=aE(n,r),m=aE(n,kn.max());return Ys(t).ee({index:hT,range:IDBKeyRange.bound(h,m,!0)},((g,y,E)=>{const A=this.Cr(lt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);u=u.insert(A.key,A),u.size===o&&E.done()})).next((()=>u))}newChangeBuffer(t){return new PI(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next((n=>n.byteSize))}getMetadata(t){return sE(t).get(ng).next((n=>(pt(!!n,20021),n)))}Dr(t,n){return sE(t).put(ng,n)}Cr(t,n){if(n){const r=vI(this.serializer,n);if(!(r.isNoDocument()&&r.version.isEqual(vt.min())))return r}return be.newInvalidDocument(t)}}function S1(s){return new OI(s)}class PI extends b1{constructor(t,n){super(),this.Nr=t,this.trackRemovals=n,this.Br=new vr((r=>r.toString()),((r,o)=>r.isEqual(o)))}applyChanges(t){const n=[];let r=0,o=new se(((u,h)=>It(u.canonicalString(),h.canonicalString())));return this.changes.forEach(((u,h)=>{const m=this.Br.get(u);if(n.push(this.Nr.removeEntry(t,u,m.readTime)),h.isValidDocument()){const g=q0(this.Nr.serializer,h);o=o.add(u.path.popLast());const y=Yh(g);r+=y-m.size,n.push(this.Nr.addEntry(t,u,g))}else if(r-=m.size,this.trackRemovals){const g=q0(this.Nr.serializer,h.convertToNoDocument(vt.min()));n.push(this.Nr.addEntry(t,u,g))}})),o.forEach((u=>{n.push(this.Nr.indexManager.addToCollectionParentIndex(t,u))})),n.push(this.Nr.updateMetadata(t,r)),k.waitFor(n)}getFromCache(t,n){return this.Nr.vr(t,n).next((r=>(this.Br.set(n,{size:r.size,readTime:r.document.readTime}),r.document)))}getAllFromCache(t,n){return this.Nr.Mr(t,n).next((({documents:r,Or:o})=>(o.forEach(((u,h)=>{this.Br.set(u,{size:h,readTime:r.get(u).readTime})})),r)))}}function sE(s){return Fe(s,pu)}function Ys(s){return Fe(s,Uh)}function Yl(s){const t=s.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function aE(s,t){const n=t.documentKey.path.toArray();return[s,Qh(t.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function oE(s,t){const n=s.path.toArray(),r=t.path.toArray();let o=0;for(let u=0;u<n.length-2&&u<r.length-2;++u)if(o=It(n[u],r[u]),o)return o;return o=It(n.length,r.length),o||(o=It(n[n.length-2],r[r.length-2]),o||It(n[n.length-1],r[r.length-1]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zI{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w1{constructor(t,n,r,o){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=o}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next((o=>(r=o,this.remoteDocumentCache.getEntry(t,n)))).next((o=>(r!==null&&uu(r.mutation,o,Sn.empty(),Yt.now()),o)))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.getLocalViewOfDocuments(t,r,zt()).next((()=>r))))}getLocalViewOfDocuments(t,n,r=zt()){const o=Ui();return this.populateOverlays(t,o,n).next((()=>this.computeViews(t,n,o,r).next((u=>{let h=Jl();return u.forEach(((m,g)=>{h=h.insert(m,g.overlayedDocument)})),h}))))}getOverlayedDocuments(t,n){const r=Ui();return this.populateOverlays(t,r,n).next((()=>this.computeViews(t,n,r,zt())))}populateOverlays(t,n,r){const o=[];return r.forEach((u=>{n.has(u)||o.push(u)})),this.documentOverlayCache.getOverlays(t,o).next((u=>{u.forEach(((h,m)=>{n.set(h,m)}))}))}computeViews(t,n,r,o){let u=zn();const h=lu(),m=(function(){return lu()})();return n.forEach(((g,y)=>{const E=r.get(y.key);o.has(y.key)&&(E===void 0||E.mutation instanceof Er)?u=u.insert(y.key,y):E!==void 0?(h.set(y.key,E.mutation.getFieldMask()),uu(E.mutation,y,E.mutation.getFieldMask(),Yt.now())):h.set(y.key,Sn.empty())})),this.recalculateAndSaveOverlays(t,u).next((g=>(g.forEach(((y,E)=>h.set(y,E))),n.forEach(((y,E)=>m.set(y,new zI(E,h.get(y)??null)))),m)))}recalculateAndSaveOverlays(t,n){const r=lu();let o=new _e(((h,m)=>h-m)),u=zt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next((h=>{for(const m of h)m.keys().forEach((g=>{const y=n.get(g);if(y===null)return;let E=r.get(g)||Sn.empty();E=m.applyToLocalView(y,E),r.set(g,E);const A=(o.get(m.batchId)||zt()).add(g);o=o.insert(m.batchId,A)}))})).next((()=>{const h=[],m=o.getReverseIterator();for(;m.hasNext();){const g=m.getNext(),y=g.key,E=g.value,A=qT();E.forEach((S=>{if(!u.has(S)){const U=XT(n.get(S),r.get(S));U!==null&&A.set(S,U),u=u.add(S)}})),h.push(this.documentOverlayCache.saveOverlays(t,y,A))}return k.waitFor(h)})).next((()=>r))}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next((r=>this.recalculateAndSaveOverlays(t,r)))}getDocumentsMatchingQuery(t,n,r,o){return(function(h){return lt.isDocumentKey(h.path)&&h.collectionGroup===null&&h.filters.length===0})(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):kT(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,o):this.getDocumentsMatchingCollectionQuery(t,n,r,o)}getNextDocuments(t,n,r,o){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,o).next((u=>{const h=o-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,o-u.size):k.resolve(Ui());let m=fu,g=u;return h.next((y=>k.forEach(y,((E,A)=>(m<A.largestBatchId&&(m=A.largestBatchId),u.get(E)?k.resolve():this.remoteDocumentCache.getEntry(t,E).next((S=>{g=g.insert(E,S)}))))).next((()=>this.populateOverlays(t,y,u))).next((()=>this.computeViews(t,g,y,zt()))).next((E=>({batchId:m,changes:BT(E)})))))}))}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new lt(n)).next((r=>{let o=Jl();return r.isFoundDocument()&&(o=o.insert(r.key,r)),o}))}getDocumentsMatchingCollectionGroupQuery(t,n,r,o){const u=n.collectionGroup;let h=Jl();return this.indexManager.getCollectionParents(t,u).next((m=>k.forEach(m,(g=>{const y=(function(A,S){return new Uo(S,null,A.explicitOrderBy.slice(),A.filters.slice(),A.limit,A.limitType,A.startAt,A.endAt)})(n,g.child(u));return this.getDocumentsMatchingCollectionQuery(t,y,r,o).next((E=>{E.forEach(((A,S)=>{h=h.insert(A,S)}))}))})).next((()=>h))))}getDocumentsMatchingCollectionQuery(t,n,r,o){let u;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next((h=>(u=h,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,u,o)))).next((h=>{u.forEach(((g,y)=>{const E=y.getKey();h.get(E)===null&&(h=h.insert(E,be.newInvalidDocument(E)))}));let m=Jl();return h.forEach(((g,y)=>{const E=u.get(g);E!==void 0&&uu(E.mutation,y,Sn.empty(),Yt.now()),xu(n,y)&&(m=m.insert(g,y))})),m}))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(t){this.serializer=t,this.Lr=new Map,this.kr=new Map}getBundleMetadata(t,n){return k.resolve(this.Lr.get(n))}saveBundleMetadata(t,n){return this.Lr.set(n.id,(function(o){return{id:o.id,version:o.version,createTime:gn(o.createTime)}})(n)),k.resolve()}getNamedQuery(t,n){return k.resolve(this.kr.get(n))}saveNamedQuery(t,n){return this.kr.set(n.name,(function(o){return{name:o.name,query:m1(o.bundledQuery),readTime:gn(o.readTime)}})(n)),k.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(){this.overlays=new _e(lt.comparator),this.qr=new Map}getOverlay(t,n){return k.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Ui();return k.forEach(n,(o=>this.getOverlay(t,o).next((u=>{u!==null&&r.set(o,u)})))).next((()=>r))}saveOverlays(t,n,r){return r.forEach(((o,u)=>{this.St(t,n,u)})),k.resolve()}removeOverlaysForBatchId(t,n,r){const o=this.qr.get(r);return o!==void 0&&(o.forEach((u=>this.overlays=this.overlays.remove(u))),this.qr.delete(r)),k.resolve()}getOverlaysForCollection(t,n,r){const o=Ui(),u=n.length+1,h=new lt(n.child("")),m=this.overlays.getIteratorFrom(h);for(;m.hasNext();){const g=m.getNext().value,y=g.getKey();if(!n.isPrefixOf(y.path))break;y.path.length===u&&g.largestBatchId>r&&o.set(g.getKey(),g)}return k.resolve(o)}getOverlaysForCollectionGroup(t,n,r,o){let u=new _e(((y,E)=>y-E));const h=this.overlays.getIterator();for(;h.hasNext();){const y=h.getNext().value;if(y.getKey().getCollectionGroup()===n&&y.largestBatchId>r){let E=u.get(y.largestBatchId);E===null&&(E=Ui(),u=u.insert(y.largestBatchId,E)),E.set(y.getKey(),y)}}const m=Ui(),g=u.getIterator();for(;g.hasNext()&&(g.getNext().value.forEach(((y,E)=>m.set(y,E))),!(m.size()>=o)););return k.resolve(m)}St(t,n,r){const o=this.overlays.get(r.key);if(o!==null){const h=this.qr.get(o.largestBatchId).delete(r.key);this.qr.set(o.largestBatchId,h)}this.overlays=this.overlays.insert(r.key,new Qg(n,r));let u=this.qr.get(n);u===void 0&&(u=zt(),this.qr.set(n,u)),this.qr.set(n,u.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UI{constructor(){this.sessionToken=Be.EMPTY_BYTE_STRING}getSessionToken(t){return k.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,k.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jg{constructor(){this.Qr=new se(Ke.$r),this.Ur=new se(Ke.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(t,n){const r=new Ke(t,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(t,n){t.forEach((r=>this.addReference(r,n)))}removeReference(t,n){this.Gr(new Ke(t,n))}zr(t,n){t.forEach((r=>this.removeReference(r,n)))}jr(t){const n=new lt(new Wt([])),r=new Ke(n,t),o=new Ke(n,t+1),u=[];return this.Ur.forEachInRange([r,o],(h=>{this.Gr(h),u.push(h.key)})),u}Jr(){this.Qr.forEach((t=>this.Gr(t)))}Gr(t){this.Qr=this.Qr.delete(t),this.Ur=this.Ur.delete(t)}Hr(t){const n=new lt(new Wt([])),r=new Ke(n,t),o=new Ke(n,t+1);let u=zt();return this.Ur.forEachInRange([r,o],(h=>{u=u.add(h.key)})),u}containsKey(t){const n=new Ke(t,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class Ke{constructor(t,n){this.key=t,this.Yr=n}static $r(t,n){return lt.comparator(t.key,n.key)||It(t.Yr,n.Yr)}static Kr(t,n){return It(t.Yr,n.Yr)||lt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jI{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new se(Ke.$r)}checkEmpty(t){return k.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,o){const u=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const h=new Hg(u,n,r,o);this.mutationQueue.push(h);for(const m of o)this.Zr=this.Zr.add(new Ke(m.key,u)),this.indexManager.addToCollectionParentIndex(t,m.key.path.popLast());return k.resolve(h)}lookupMutationBatch(t,n){return k.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,o=this.ei(r),u=o<0?0:o;return k.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return k.resolve(this.mutationQueue.length===0?ra:this.tr-1)}getAllMutationBatches(t){return k.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new Ke(n,0),o=new Ke(n,Number.POSITIVE_INFINITY),u=[];return this.Zr.forEachInRange([r,o],(h=>{const m=this.Xr(h.Yr);u.push(m)})),k.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new se(It);return n.forEach((o=>{const u=new Ke(o,0),h=new Ke(o,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([u,h],(m=>{r=r.add(m.Yr)}))})),k.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,o=r.length+1;let u=r;lt.isDocumentKey(u)||(u=u.child(""));const h=new Ke(new lt(u),0);let m=new se(It);return this.Zr.forEachWhile((g=>{const y=g.key.path;return!!r.isPrefixOf(y)&&(y.length===o&&(m=m.add(g.Yr)),!0)}),h),k.resolve(this.ti(m))}ti(t){const n=[];return t.forEach((r=>{const o=this.Xr(r);o!==null&&n.push(o)})),n}removeMutationBatch(t,n){pt(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return k.forEach(n.mutations,(o=>{const u=new Ke(o.key,n.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(t,o.key)})).next((()=>{this.Zr=r}))}ir(t){}containsKey(t,n){const r=new Ke(n,0),o=this.Zr.firstAfterOrEqual(r);return k.resolve(n.isEqual(o&&o.key))}performConsistencyCheck(t){return this.mutationQueue.length,k.resolve()}ni(t,n){return this.ei(t)}ei(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}Xr(t){const n=this.ei(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BI{constructor(t){this.ri=t,this.docs=(function(){return new _e(lt.comparator)})(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,o=this.docs.get(r),u=o?o.size:0,h=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:h}),this.size+=h-u,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return k.resolve(r?r.document.mutableCopy():be.newInvalidDocument(n))}getEntries(t,n){let r=zn();return n.forEach((o=>{const u=this.docs.get(o);r=r.insert(o,u?u.document.mutableCopy():be.newInvalidDocument(o))})),k.resolve(r)}getDocumentsMatchingQuery(t,n,r,o){let u=zn();const h=n.path,m=new lt(h.child("__id-9223372036854775808__")),g=this.docs.getIteratorFrom(m);for(;g.hasNext();){const{key:y,value:{document:E}}=g.getNext();if(!h.isPrefixOf(y.path))break;y.path.length>h.length+1||Mg(aT(E),r)<=0||(o.has(E.key)||xu(n,E))&&(u=u.insert(E.key,E.mutableCopy()))}return k.resolve(u)}getAllFromCollectionGroup(t,n,r,o){ft(9500)}ii(t,n){return k.forEach(this.docs,(r=>n(r)))}newChangeBuffer(t){return new qI(this)}getSize(t){return k.resolve(this.size)}}class qI extends b1{constructor(t){super(),this.Nr=t}applyChanges(t){const n=[];return this.changes.forEach(((r,o)=>{o.isValidDocument()?n.push(this.Nr.addEntry(t,o)):this.Nr.removeEntry(r)})),k.waitFor(n)}getFromCache(t,n){return this.Nr.getEntry(t,n)}getAllFromCache(t,n){return this.Nr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(t){this.persistence=t,this.si=new vr((n=>fa(n)),Ru),this.lastRemoteSnapshotVersion=vt.min(),this.highestTargetId=0,this.oi=0,this._i=new Jg,this.targetCount=0,this.ai=ga.ur()}forEachTarget(t,n){return this.si.forEach(((r,o)=>n(o))),k.resolve()}getLastRemoteSnapshotVersion(t){return k.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return k.resolve(this.oi)}allocateTargetId(t){return this.highestTargetId=this.ai.next(),k.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),k.resolve()}Pr(t){this.si.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ai=new ga(n),this.highestTargetId=n),t.sequenceNumber>this.oi&&(this.oi=t.sequenceNumber)}addTargetData(t,n){return this.Pr(n),this.targetCount+=1,k.resolve()}updateTargetData(t,n){return this.Pr(n),k.resolve()}removeTargetData(t,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,k.resolve()}removeTargets(t,n,r){let o=0;const u=[];return this.si.forEach(((h,m)=>{m.sequenceNumber<=n&&r.get(m.targetId)===null&&(this.si.delete(h),u.push(this.removeMatchingKeysForTargetId(t,m.targetId)),o++)})),k.waitFor(u).next((()=>o))}getTargetCount(t){return k.resolve(this.targetCount)}getTargetData(t,n){const r=this.si.get(n)||null;return k.resolve(r)}addMatchingKeys(t,n,r){return this._i.Wr(n,r),k.resolve()}removeMatchingKeys(t,n,r){this._i.zr(n,r);const o=this.persistence.referenceDelegate,u=[];return o&&n.forEach((h=>{u.push(o.markPotentiallyOrphaned(t,h))})),k.waitFor(u)}removeMatchingKeysForTargetId(t,n){return this._i.jr(n),k.resolve()}getMatchingKeysForTargetId(t,n){const r=this._i.Hr(n);return k.resolve(r)}containsKey(t,n){return k.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $g{constructor(t,n){this.ui={},this.overlays={},this.ci=new $n(0),this.li=!1,this.li=!0,this.hi=new UI,this.referenceDelegate=t(this),this.Pi=new FI(this),this.indexManager=new RI,this.remoteDocumentCache=(function(o){return new BI(o)})((r=>this.referenceDelegate.Ti(r))),this.serializer=new f1(n),this.Ii=new kI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new LI,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ui[t.toKey()];return r||(r=new jI(n,this.referenceDelegate),this.ui[t.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(t,n,r){et("MemoryPersistence","Starting transaction:",t);const o=new HI(this.ci.next());return this.referenceDelegate.Ei(),r(o).next((u=>this.referenceDelegate.di(o).next((()=>u)))).toPromise().then((u=>(o.raiseOnCommittedEvent(),u)))}Ai(t,n){return k.or(Object.values(this.ui).map((r=>()=>r.containsKey(t,n))))}}class HI extends lT{constructor(t){super(),this.currentSequenceNumber=t}}class gf{constructor(t){this.persistence=t,this.Ri=new Jg,this.Vi=null}static mi(t){return new gf(t)}get fi(){if(this.Vi)return this.Vi;throw ft(60996)}addReference(t,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),k.resolve()}removeReference(t,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),k.resolve()}markPotentiallyOrphaned(t,n){return this.fi.add(n.toString()),k.resolve()}removeTarget(t,n){this.Ri.jr(n.targetId).forEach((o=>this.fi.add(o.toString())));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next((o=>{o.forEach((u=>this.fi.add(u.toString())))})).next((()=>r.removeTargetData(t,n)))}Ei(){this.Vi=new Set}di(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return k.forEach(this.fi,(r=>{const o=lt.fromPath(r);return this.gi(t,o).next((u=>{u||n.removeEntry(o,vt.min())}))})).next((()=>(this.Vi=null,n.apply(t))))}updateLimboDocument(t,n){return this.gi(t,n).next((r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())}))}Ti(t){return 0}gi(t,n){return k.or([()=>k.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Ai(t,n)])}}class Xh{constructor(t,n){this.persistence=t,this.pi=new vr((r=>hn(r.path)),((r,o)=>r.isEqual(o))),this.garbageCollector=A1(this,n)}static mi(t,n){return new Xh(t,n)}Ei(){}di(t){return k.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}gr(t){const n=this.wr(t);return this.persistence.getTargetCache().getTargetCount(t).next((r=>n.next((o=>r+o))))}wr(t){let n=0;return this.pr(t,(r=>{n++})).next((()=>n))}pr(t,n){return k.forEach(this.pi,((r,o)=>this.br(t,r,o).next((u=>u?k.resolve():n(o)))))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const o=this.persistence.getRemoteDocumentCache(),u=o.newChangeBuffer();return o.ii(t,(h=>this.br(t,h,n).next((m=>{m||(r++,u.removeEntry(h,vt.min()))})))).next((()=>u.apply(t))).next((()=>r))}markPotentiallyOrphaned(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),k.resolve()}removeReference(t,n,r){return this.pi.set(r,t.currentSequenceNumber),k.resolve()}updateLimboDocument(t,n){return this.pi.set(n,t.currentSequenceNumber),k.resolve()}Ti(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=wh(t.data.value)),n}br(t,n,r){return k.or([()=>this.persistence.Ai(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const o=this.pi.get(n);return k.resolve(o!==void 0&&o>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GI{constructor(t){this.serializer=t}k(t,n,r,o){const u=new tf("createOrUpgrade",n);r<1&&o>=1&&((function(g){g.createObjectStore(Iu)})(t),(function(g){g.createObjectStore(gu,{keyPath:n2}),g.createObjectStore(gi,{keyPath:_0,autoIncrement:!0}).createIndex(ia,v0,{unique:!0}),g.createObjectStore(So)})(t),lE(t),(function(g){g.createObjectStore(Js)})(t));let h=k.resolve();return r<3&&o>=3&&(r!==0&&((function(g){g.deleteObjectStore(Io),g.deleteObjectStore(wo),g.deleteObjectStore(sa)})(t),lE(t)),h=h.next((()=>(function(g){const y=g.store(sa),E={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:vt.min().toTimestamp(),targetCount:0};return y.put(jh,E)})(u)))),r<4&&o>=4&&(r!==0&&(h=h.next((()=>(function(g,y){return y.store(gi).J().next((A=>{g.deleteObjectStore(gi),g.createObjectStore(gi,{keyPath:_0,autoIncrement:!0}).createIndex(ia,v0,{unique:!0});const S=y.store(gi),U=A.map((W=>S.put(W)));return k.waitFor(U)}))})(t,u)))),h=h.next((()=>{(function(g){g.createObjectStore(Ro,{keyPath:h2})})(t)}))),r<5&&o>=5&&(h=h.next((()=>this.yi(u)))),r<6&&o>=6&&(h=h.next((()=>((function(g){g.createObjectStore(pu)})(t),this.wi(u))))),r<7&&o>=7&&(h=h.next((()=>this.Si(u)))),r<8&&o>=8&&(h=h.next((()=>this.bi(t,u)))),r<9&&o>=9&&(h=h.next((()=>{(function(g){g.objectStoreNames.contains("remoteDocumentChanges")&&g.deleteObjectStore("remoteDocumentChanges")})(t)}))),r<10&&o>=10&&(h=h.next((()=>this.Di(u)))),r<11&&o>=11&&(h=h.next((()=>{(function(g){g.createObjectStore(nf,{keyPath:f2})})(t),(function(g){g.createObjectStore(rf,{keyPath:d2})})(t)}))),r<12&&o>=12&&(h=h.next((()=>{(function(g){const y=g.createObjectStore(sf,{keyPath:E2});y.createIndex(rg,T2,{unique:!1}),y.createIndex(gT,A2,{unique:!1})})(t)}))),r<13&&o>=13&&(h=h.next((()=>(function(g){const y=g.createObjectStore(Uh,{keyPath:r2});y.createIndex(bh,s2),y.createIndex(hT,a2)})(t))).next((()=>this.Ci(t,u))).next((()=>t.deleteObjectStore(Js)))),r<14&&o>=14&&(h=h.next((()=>this.Fi(t,u)))),r<15&&o>=15&&(h=h.next((()=>(function(g){g.createObjectStore(zg,{keyPath:m2,autoIncrement:!0}).createIndex(ig,g2,{unique:!1}),g.createObjectStore(ru,{keyPath:p2}).createIndex(dT,y2,{unique:!1}),g.createObjectStore(su,{keyPath:_2}).createIndex(mT,v2,{unique:!1})})(t)))),r<16&&o>=16&&(h=h.next((()=>{n.objectStore(ru).clear()})).next((()=>{n.objectStore(su).clear()}))),r<17&&o>=17&&(h=h.next((()=>{(function(g){g.createObjectStore(kg,{keyPath:b2})})(t)}))),r<18&&o>=18&&jE()&&(h=h.next((()=>{n.objectStore(ru).clear()})).next((()=>{n.objectStore(su).clear()}))),h}wi(t){let n=0;return t.store(Js).ee(((r,o)=>{n+=Yh(o)})).next((()=>{const r={byteSize:n};return t.store(pu).put(ng,r)}))}yi(t){const n=t.store(gu),r=t.store(gi);return n.J().next((o=>k.forEach(o,(u=>{const h=IDBKeyRange.bound([u.userId,ra],[u.userId,u.lastAcknowledgedBatchId]);return r.J(ia,h).next((m=>k.forEach(m,(g=>{pt(g.userId===u.userId,18650,"Cannot process batch from unexpected user",{batchId:g.batchId});const y=Ws(this.serializer,g);return _1(t,u.userId,y).next((()=>{}))}))))}))))}Si(t){const n=t.store(Io),r=t.store(Js);return t.store(sa).get(jh).next((o=>{const u=[];return r.ee(((h,m)=>{const g=new Wt(h),y=(function(A){return[0,hn(A)]})(g);u.push(n.get(y).next((E=>E?k.resolve():(A=>n.put({targetId:0,path:hn(A),sequenceNumber:o.highestListenSequenceNumber}))(g))))})).next((()=>k.waitFor(u)))}))}bi(t,n){t.createObjectStore(yu,{keyPath:c2});const r=n.store(yu),o=new Zg,u=h=>{if(o.add(h)){const m=h.lastSegment(),g=h.popLast();return r.put({collectionId:m,parent:hn(g)})}};return n.store(Js).ee({X:!0},((h,m)=>{const g=new Wt(h);return u(g.popLast())})).next((()=>n.store(So).ee({X:!0},(([h,m,g],y)=>{const E=Li(m);return u(E.popLast())}))))}Di(t){const n=t.store(wo);return n.ee(((r,o)=>{const u=Wl(o),h=d1(this.serializer,u);return n.put(h)}))}Ci(t,n){const r=n.store(Js),o=[];return r.ee(((u,h)=>{const m=n.store(Uh),g=(function(A){return A.document?new lt(Wt.fromString(A.document.name).popFirst(5)):A.noDocument?lt.fromSegments(A.noDocument.path):A.unknownDocument?lt.fromSegments(A.unknownDocument.path):ft(36783)})(h).path.toArray(),y={prefixPath:g.slice(0,g.length-2),collectionGroup:g[g.length-2],documentId:g[g.length-1],readTime:h.readTime||[0,0],unknownDocument:h.unknownDocument,noDocument:h.noDocument,document:h.document,hasCommittedMutations:!!h.hasCommittedMutations};o.push(m.put(y))})).next((()=>k.waitFor(o)))}Fi(t,n){const r=n.store(gi),o=S1(this.serializer),u=new $g(gf.mi,this.serializer.yt);return r.J().next((h=>{const m=new Map;return h.forEach((g=>{let y=m.get(g.userId)??zt();Ws(this.serializer,g).keys().forEach((E=>y=y.add(E))),m.set(g.userId,y)})),k.forEach(m,((g,y)=>{const E=new rn(y),A=df.wt(this.serializer,E),S=u.getIndexManager(E),U=mf.wt(E,this.serializer,S,u.referenceDelegate);return new w1(o,U,A,S).recalculateAndSaveOverlaysForDocumentKeys(new sg(n,$n.ce),g).next()}))}))}}function lE(s){s.createObjectStore(Io,{keyPath:l2}).createIndex(Pg,u2,{unique:!0}),s.createObjectStore(wo,{keyPath:"targetId"}).createIndex(fT,o2,{unique:!0}),s.createObjectStore(sa)}const ns="IndexedDbPersistence",km=18e5,Lm=5e3,Um="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",QI="main";class Wg{constructor(t,n,r,o,u,h,m,g,y,E,A=18){if(this.allowTabSynchronization=t,this.persistenceKey=n,this.clientId=r,this.Mi=u,this.window=h,this.document=m,this.xi=y,this.Oi=E,this.Ni=A,this.ci=null,this.li=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Bi=null,this.inForeground=!1,this.Li=null,this.ki=null,this.qi=Number.NEGATIVE_INFINITY,this.Qi=S=>Promise.resolve(),!Wg.v())throw new nt(K.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new MI(this,o),this.$i=n+QI,this.serializer=new f1(g),this.Ui=new ls(this.$i,this.Ni,new GI(this.serializer)),this.hi=new TI,this.Pi=new DI(this.referenceDelegate,this.serializer),this.remoteDocumentCache=S1(this.serializer),this.Ii=new EI,this.window&&this.window.localStorage?this.Ki=this.window.localStorage:(this.Ki=null,E===!1&&mn(ns,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.Wi().then((()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new nt(K.FAILED_PRECONDITION,Um);return this.Gi(),this.zi(),this.ji(),this.runTransaction("getHighestListenSequenceNumber","readonly",(t=>this.Pi.getHighestSequenceNumber(t)))})).then((t=>{this.ci=new $n(t,this.xi)})).then((()=>{this.li=!0})).catch((t=>(this.Ui&&this.Ui.close(),Promise.reject(t))))}Ji(t){return this.Qi=async n=>{if(this.started)return t(n)},t(this.isPrimary)}setDatabaseDeletedListener(t){this.Ui.$((async n=>{n.newVersion===null&&await t()}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.Mi.enqueueAndForget((async()=>{this.started&&await this.Wi()})))}Wi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",(t=>_h(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next((()=>{if(this.isPrimary)return this.Hi(t).next((n=>{n||(this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))))}))})).next((()=>this.Yi(t))).next((n=>this.isPrimary&&!n?this.Zi(t).next((()=>!1)):!!n&&this.Xi(t).next((()=>!0)))))).catch((t=>{if(ms(t))return et(ns,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return et(ns,"Releasing owner lease after error during lease refresh",t),!1})).then((t=>{this.isPrimary!==t&&this.Mi.enqueueRetryable((()=>this.Qi(t))),this.isPrimary=t}))}Hi(t){return Xl(t).get(oo).next((n=>k.resolve(this.es(n))))}ts(t){return _h(t).delete(this.clientId)}async ns(){if(this.isPrimary&&!this.rs(this.qi,km)){this.qi=Date.now();const t=await this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",(n=>{const r=Fe(n,Ro);return r.J().next((o=>{const u=this.ss(o,km),h=o.filter((m=>u.indexOf(m)===-1));return k.forEach(h,(m=>r.delete(m.clientId))).next((()=>h))}))})).catch((()=>[]));if(this.Ki)for(const n of t)this.Ki.removeItem(this._s(n.clientId))}}ji(){this.ki=this.Mi.enqueueAfterDelay("client_metadata_refresh",4e3,(()=>this.Wi().then((()=>this.ns())).then((()=>this.ji()))))}es(t){return!!t&&t.ownerId===this.clientId}Yi(t){return this.Oi?k.resolve(!0):Xl(t).get(oo).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Lm)&&!this.us(n.ownerId)){if(this.es(n)&&this.networkEnabled)return!0;if(!this.es(n)){if(!n.allowTabSynchronization)throw new nt(K.FAILED_PRECONDITION,Um);return!1}}return!(!this.networkEnabled||!this.inForeground)||_h(t).J().next((r=>this.ss(r,Lm).find((o=>{if(this.clientId!==o.clientId){const u=!this.networkEnabled&&o.networkEnabled,h=!this.inForeground&&o.inForeground,m=this.networkEnabled===o.networkEnabled;if(u||h&&m)return!0}return!1}))===void 0))})).next((n=>(this.isPrimary!==n&&et(ns,`Client ${n?"is":"is not"} eligible for a primary lease.`),n)))}async shutdown(){this.li=!1,this.cs(),this.ki&&(this.ki.cancel(),this.ki=null),this.ls(),this.hs(),await this.Ui.runTransaction("shutdown","readwrite",[Iu,Ro],(t=>{const n=new sg(t,$n.ce);return this.Zi(n).next((()=>this.ts(n)))})),this.Ui.close(),this.Ps()}ss(t,n){return t.filter((r=>this.rs(r.updateTimeMs,n)&&!this.us(r.clientId)))}Ts(){return this.runTransaction("getActiveClients","readonly",(t=>_h(t).J().next((n=>this.ss(n,km).map((r=>r.clientId))))))}get started(){return this.li}getGlobalsCache(){return this.hi}getMutationQueue(t,n){return mf.wt(t,this.serializer,n,this.referenceDelegate)}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new xI(t,this.serializer.yt.databaseId)}getDocumentOverlayCache(t){return df.wt(this.serializer,t)}getBundleCache(){return this.Ii}runTransaction(t,n,r){et(ns,"Starting transaction:",t);const o=n==="readonly"?"readonly":"readwrite",u=(function(g){return g===18?I2:g===17?vT:g===16?w2:g===15?Lg:g===14?_T:g===13?yT:g===12?S2:g===11?pT:void ft(60245)})(this.Ni);let h;return this.Ui.runTransaction(t,o,u,(m=>(h=new sg(m,this.ci?this.ci.next():$n.ce),n==="readwrite-primary"?this.Hi(h).next((g=>!!g||this.Yi(h))).next((g=>{if(!g)throw mn(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.Mi.enqueueRetryable((()=>this.Qi(!1))),new nt(K.FAILED_PRECONDITION,oT);return r(h)})).next((g=>this.Xi(h).next((()=>g)))):this.Is(h).next((()=>r(h)))))).then((m=>(h.raiseOnCommittedEvent(),m)))}Is(t){return Xl(t).get(oo).next((n=>{if(n!==null&&this.rs(n.leaseTimestampMs,Lm)&&!this.us(n.ownerId)&&!this.es(n)&&!(this.Oi||this.allowTabSynchronization&&n.allowTabSynchronization))throw new nt(K.FAILED_PRECONDITION,Um)}))}Xi(t){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Xl(t).put(oo,n)}static v(){return ls.v()}Zi(t){const n=Xl(t);return n.get(oo).next((r=>this.es(r)?(et(ns,"Releasing primary lease."),n.delete(oo)):k.resolve()))}rs(t,n){const r=Date.now();return!(t<r-n)&&(!(t>r)||(mn(`Detected an update time that is in the future: ${t} > ${r}`),!1))}Gi(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.Li=()=>{this.Mi.enqueueAndForget((()=>(this.inForeground=this.document.visibilityState==="visible",this.Wi())))},this.document.addEventListener("visibilitychange",this.Li),this.inForeground=this.document.visibilityState==="visible")}ls(){this.Li&&(this.document.removeEventListener("visibilitychange",this.Li),this.Li=null)}zi(){var t;typeof((t=this.window)==null?void 0:t.addEventListener)=="function"&&(this.Bi=()=>{this.cs();const n=/(?:Version|Mobile)\/1[456]/;UE()&&(navigator.appVersion.match(n)||navigator.userAgent.match(n))&&this.Mi.enterRestrictedMode(!0),this.Mi.enqueueAndForget((()=>this.shutdown()))},this.window.addEventListener("pagehide",this.Bi))}hs(){this.Bi&&(this.window.removeEventListener("pagehide",this.Bi),this.Bi=null)}us(t){var n;try{const r=((n=this.Ki)==null?void 0:n.getItem(this._s(t)))!==null;return et(ns,`Client '${t}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return mn(ns,"Failed to get zombied client id.",r),!1}}cs(){if(this.Ki)try{this.Ki.setItem(this._s(this.clientId),String(Date.now()))}catch(t){mn("Failed to set zombie client id.",t)}}Ps(){if(this.Ki)try{this.Ki.removeItem(this._s(this.clientId))}catch{}}_s(t){return`firestore_zombie_${this.persistenceKey}_${t}`}}function Xl(s){return Fe(s,Iu)}function _h(s){return Fe(s,Ro)}function KI(s,t){let n=s.projectId;return s.isDefaultDatabase||(n+="."+s.database),"firestore/"+t+"/"+n+"/"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tp{constructor(t,n,r,o){this.targetId=t,this.fromCache=n,this.Es=r,this.ds=o}static As(t,n){let r=zt(),o=zt();for(const u of n.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:o=o.add(u.doc.key)}return new tp(t,n.fromCache,r,o)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class I1{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=(function(){return UE()?8:uT(Mh())>0?6:4})()}initialize(t,n){this.ps=t,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(t,n,r,o){const u={result:null};return this.ys(t,n).next((h=>{u.result=h})).next((()=>{if(!u.result)return this.ws(t,n,o,r).next((h=>{u.result=h}))})).next((()=>{if(u.result)return;const h=new YI;return this.Ss(t,n,h).next((m=>{if(u.result=m,this.Vs)return this.bs(t,n,h,m.size)}))})).next((()=>u.result))}bs(t,n,r,o){return r.documentReadCount<this.fs?(mo()<=Qt.DEBUG&&et("QueryEngine","SDK will not create cache indexes for query:",go(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),k.resolve()):(mo()<=Qt.DEBUG&&et("QueryEngine","Query:",go(n),"scans",r.documentReadCount,"local documents and returns",o,"documents as results."),r.documentReadCount>this.gs*o?(mo()<=Qt.DEBUG&&et("QueryEngine","The SDK decides to create cache indexes for query:",go(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,ti(n))):k.resolve())}ys(t,n){if(N0(n))return k.resolve(null);let r=ti(n);return this.indexManager.getIndexType(t,r).next((o=>o===0?null:(n.limit!==null&&o===1&&(n=fg(n,null,"F"),r=ti(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next((u=>{const h=zt(...u);return this.ps.getDocuments(t,h).next((m=>this.indexManager.getMinOffset(t,r).next((g=>{const y=this.Ds(n,m);return this.Cs(n,y,h,g.readTime)?this.ys(t,fg(n,null,"F")):this.vs(t,y,n,g)}))))})))))}ws(t,n,r,o){return N0(n)||o.isEqual(vt.min())?k.resolve(null):this.ps.getDocuments(t,r).next((u=>{const h=this.Ds(n,u);return this.Cs(n,h,r,o)?k.resolve(null):(mo()<=Qt.DEBUG&&et("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),go(n)),this.vs(t,h,n,Xw(o,fu)).next((m=>m)))}))}Ds(t,n){let r=new se(UT(t));return n.forEach(((o,u)=>{xu(t,u)&&(r=r.add(u))})),r}Cs(t,n,r,o){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const u=t.limitType==="F"?n.last():n.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(o)>0)}Ss(t,n,r){return mo()<=Qt.DEBUG&&et("QueryEngine","Using full collection scan to execute query:",go(n)),this.ps.getDocumentsMatchingQuery(t,n,kn.min(),r)}vs(t,n,r,o){return this.ps.getDocumentsMatchingQuery(t,r,o).next((u=>(n.forEach((h=>{u=u.insert(h.key,h)})),u)))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ep="LocalStore",XI=3e8;class ZI{constructor(t,n,r,o){this.persistence=t,this.Fs=n,this.serializer=o,this.Ms=new _e(It),this.xs=new vr((u=>fa(u)),Ru),this.Os=new Map,this.Ns=t.getRemoteDocumentCache(),this.Pi=t.getTargetCache(),this.Ii=t.getBundleCache(),this.Bs(r)}Bs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new w1(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",(n=>t.collect(n,this.Ms)))}}function R1(s,t,n,r){return new ZI(s,t,n,r)}async function x1(s,t){const n=Rt(s);return await n.persistence.runTransaction("Handle user change","readonly",(r=>{let o;return n.mutationQueue.getAllMutationBatches(r).next((u=>(o=u,n.Bs(t),n.mutationQueue.getAllMutationBatches(r)))).next((u=>{const h=[],m=[];let g=zt();for(const y of o){h.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}for(const y of u){m.push(y.batchId);for(const E of y.mutations)g=g.add(E.key)}return n.localDocuments.getDocuments(r,g).next((y=>({Ls:y,removedBatchIds:h,addedBatchIds:m})))}))}))}function JI(s,t){const n=Rt(s);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",(r=>{const o=t.batch.keys(),u=n.Ns.newChangeBuffer({trackRemovals:!0});return(function(m,g,y,E){const A=y.batch,S=A.keys();let U=k.resolve();return S.forEach((W=>{U=U.next((()=>E.getEntry(g,W))).next((Q=>{const X=y.docVersions.get(W);pt(X!==null,48541),Q.version.compareTo(X)<0&&(A.applyToRemoteDocument(Q,y),Q.isValidDocument()&&(Q.setReadTime(y.commitVersion),E.addEntry(Q)))}))})),U.next((()=>m.mutationQueue.removeMutationBatch(g,A)))})(n,r,t,u).next((()=>u.apply(r))).next((()=>n.mutationQueue.performConsistencyCheck(r))).next((()=>n.documentOverlayCache.removeOverlaysForBatchId(r,o,t.batch.batchId))).next((()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,(function(m){let g=zt();for(let y=0;y<m.mutationResults.length;++y)m.mutationResults[y].transformResults.length>0&&(g=g.add(m.batch.mutations[y].key));return g})(t)))).next((()=>n.localDocuments.getDocuments(r,o)))}))}function D1(s){const t=Rt(s);return t.persistence.runTransaction("Get last remote snapshot version","readonly",(n=>t.Pi.getLastRemoteSnapshotVersion(n)))}function $I(s,t){const n=Rt(s),r=t.snapshotVersion;let o=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",(u=>{const h=n.Ns.newChangeBuffer({trackRemovals:!0});o=n.Ms;const m=[];t.targetChanges.forEach(((E,A)=>{const S=o.get(A);if(!S)return;m.push(n.Pi.removeMatchingKeys(u,E.removedDocuments,A).next((()=>n.Pi.addMatchingKeys(u,E.addedDocuments,A))));let U=S.withSequenceNumber(u.currentSequenceNumber);t.targetMismatches.get(A)!==null?U=U.withResumeToken(Be.EMPTY_BYTE_STRING,vt.min()).withLastLimboFreeSnapshotVersion(vt.min()):E.resumeToken.approximateByteSize()>0&&(U=U.withResumeToken(E.resumeToken,r)),o=o.insert(A,U),(function(Q,X,st){return Q.resumeToken.approximateByteSize()===0||X.snapshotVersion.toMicroseconds()-Q.snapshotVersion.toMicroseconds()>=XI?!0:st.addedDocuments.size+st.modifiedDocuments.size+st.removedDocuments.size>0})(S,U,E)&&m.push(n.Pi.updateTargetData(u,U))}));let g=zn(),y=zt();if(t.documentUpdates.forEach((E=>{t.resolvedLimboDocuments.has(E)&&m.push(n.persistence.referenceDelegate.updateLimboDocument(u,E))})),m.push(WI(u,h,t.documentUpdates).next((E=>{g=E.ks,y=E.qs}))),!r.isEqual(vt.min())){const E=n.Pi.getLastRemoteSnapshotVersion(u).next((A=>n.Pi.setTargetsMetadata(u,u.currentSequenceNumber,r)));m.push(E)}return k.waitFor(m).next((()=>h.apply(u))).next((()=>n.localDocuments.getLocalViewOfDocuments(u,g,y))).next((()=>g))})).then((u=>(n.Ms=o,u)))}function WI(s,t,n){let r=zt(),o=zt();return n.forEach((u=>r=r.add(u))),t.getEntries(s,r).next((u=>{let h=zn();return n.forEach(((m,g)=>{const y=u.get(m);g.isFoundDocument()!==y.isFoundDocument()&&(o=o.add(m)),g.isNoDocument()&&g.version.isEqual(vt.min())?(t.removeEntry(m,g.readTime),h=h.insert(m,g)):!y.isValidDocument()||g.version.compareTo(y.version)>0||g.version.compareTo(y.version)===0&&y.hasPendingWrites?(t.addEntry(g),h=h.insert(m,g)):et(ep,"Ignoring outdated watch update for ",m,". Current version:",y.version," Watch version:",g.version)})),{ks:h,qs:o}}))}function tR(s,t){const n=Rt(s);return n.persistence.runTransaction("Get next mutation batch","readonly",(r=>(t===void 0&&(t=ra),n.mutationQueue.getNextMutationBatchAfterBatchId(r,t))))}function eR(s,t){const n=Rt(s);return n.persistence.runTransaction("Allocate target","readwrite",(r=>{let o;return n.Pi.getTargetData(r,t).next((u=>u?(o=u,k.resolve(o)):n.Pi.allocateTargetId(r).next((h=>(o=new dr(t,h,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,o).next((()=>o)))))))})).then((r=>{const o=n.Ms.get(r.targetId);return(o===null||r.snapshotVersion.compareTo(o.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(t,r.targetId)),r}))}async function Eg(s,t,n){const r=Rt(s),o=r.Ms.get(t),u=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",u,(h=>r.persistence.referenceDelegate.removeTarget(h,o)))}catch(h){if(!ms(h))throw h;et(ep,`Failed to update sequence numbers for target ${t}: ${h}`)}r.Ms=r.Ms.remove(t),r.xs.delete(o.target)}function uE(s,t,n){const r=Rt(s);let o=vt.min(),u=zt();return r.persistence.runTransaction("Execute query","readwrite",(h=>(function(g,y,E){const A=Rt(g),S=A.xs.get(E);return S!==void 0?k.resolve(A.Ms.get(S)):A.Pi.getTargetData(y,E)})(r,h,ti(t)).next((m=>{if(m)return o=m.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(h,m.targetId).next((g=>{u=g}))})).next((()=>r.Fs.getDocumentsMatchingQuery(h,t,n?o:vt.min(),n?u:zt()))).next((m=>(nR(r,B2(t),m),{documents:m,Qs:u})))))}function nR(s,t,n){let r=s.Os.get(t)||vt.min();n.forEach(((o,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)})),s.Os.set(t,r)}class cE{constructor(){this.activeTargetIds=K2()}zs(t){this.activeTargetIds=this.activeTargetIds.add(t)}js(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Gs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class C1{constructor(){this.Mo=new cE,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.Mo.zs(t),this.xo[t]||"not-current"}updateQueryState(t,n,r){this.xo[t]=n}removeLocalQueryTarget(t){this.Mo.js(t)}isLocalQueryTarget(t){return this.Mo.activeTargetIds.has(t)}clearQueryState(t){delete this.xo[t]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(t){return this.Mo.activeTargetIds.has(t)}start(){return this.Mo=new cE,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iR{Oo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hE="ConnectivityMonitor";class fE{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(t){this.qo.push(t)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){et(hE,"Network connectivity changed: AVAILABLE");for(const t of this.qo)t(0)}ko(){et(hE,"Network connectivity changed: UNAVAILABLE");for(const t of this.qo)t(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vh=null;function Tg(){return vh===null?vh=(function(){return 268435456+Math.round(2147483648*Math.random())})():vh++,"0x"+vh.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jm="RestConnection",rR={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class sR{get $o(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+t.host,this.Ko=`projects/${r}/databases/${o}`,this.Wo=this.databaseId.database===Bh?`project_id=${r}`:`project_id=${r}&database_id=${o}`}Go(t,n,r,o,u){const h=Tg(),m=this.zo(t,n.toUriEncodedString());et(jm,`Sending RPC '${t}' ${h}:`,m,r);const g={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(g,o,u);const{host:y}=new URL(m),E=Dg(y);return this.Jo(t,m,g,r,E).then((A=>(et(jm,`Received RPC '${t}' ${h}: `,A),A)),(A=>{throw ca(jm,`RPC '${t}' ${h} failed with error: `,A,"url: ",m,"request:",r),A}))}Ho(t,n,r,o,u,h){return this.Go(t,n,r,o,u)}jo(t,n,r){t["X-Goog-Api-Client"]=(function(){return"gl-js/ fire/"+Lo})(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach(((o,u)=>t[u]=o)),r&&r.headers.forEach(((o,u)=>t[u]=o))}zo(t,n){const r=rR[t];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aR{constructor(t){this.Yo=t.Yo,this.Zo=t.Zo}Xo(t){this.e_=t}t_(t){this.n_=t}r_(t){this.i_=t}onMessage(t){this.s_=t}close(){this.Zo()}send(t){this.Yo(t)}o_(){this.e_()}__(){this.n_()}a_(t){this.i_(t)}u_(t){this.s_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const on="WebChannelConnection";class oR extends sR{constructor(t){super(t),this.c_=[],this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Jo(t,n,r,o,u){const h=Tg();return new Promise(((m,g)=>{const y=new ZE;y.setWithCredentials(!0),y.listenOnce(JE.COMPLETE,(()=>{try{switch(y.getLastErrorCode()){case Eh.NO_ERROR:const A=y.getResponseJson();et(on,`XHR for RPC '${t}' ${h} received:`,JSON.stringify(A)),m(A);break;case Eh.TIMEOUT:et(on,`RPC '${t}' ${h} timed out`),g(new nt(K.DEADLINE_EXCEEDED,"Request time out"));break;case Eh.HTTP_ERROR:const S=y.getStatus();if(et(on,`RPC '${t}' ${h} failed with status:`,S,"response text:",y.getResponseText()),S>0){let U=y.getResponseJson();Array.isArray(U)&&(U=U[0]);const W=U==null?void 0:U.error;if(W&&W.status&&W.message){const Q=(function(st){const rt=st.toLowerCase().replace(/_/g,"-");return Object.values(K).indexOf(rt)>=0?rt:K.UNKNOWN})(W.status);g(new nt(Q,W.message))}else g(new nt(K.UNKNOWN,"Server responded with status "+y.getStatus()))}else g(new nt(K.UNAVAILABLE,"Connection failed."));break;default:ft(9055,{l_:t,streamId:h,h_:y.getLastErrorCode(),P_:y.getLastError()})}}finally{et(on,`RPC '${t}' ${h} completed.`)}}));const E=JSON.stringify(o);et(on,`RPC '${t}' ${h} sending request:`,o),y.send(n,"POST",E,r,15)}))}T_(t,n,r){const o=Tg(),u=[this.Uo,"/","google.firestore.v1.Firestore","/",t,"/channel"],h=tT(),m=WE(),g={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;y!==void 0&&(g.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(g.useFetchStreams=!0),this.jo(g.initMessageHeaders,n,r),g.encodeInitMessageHeaders=!0;const E=u.join("");et(on,`Creating RPC '${t}' stream ${o}: ${E}`,g);const A=h.createWebChannel(E,g);this.I_(A);let S=!1,U=!1;const W=new aR({Yo:X=>{U?et(on,`Not sending because RPC '${t}' stream ${o} is closed:`,X):(S||(et(on,`Opening RPC '${t}' stream ${o} transport.`),A.open(),S=!0),et(on,`RPC '${t}' stream ${o} sending:`,X),A.send(X))},Zo:()=>A.close()}),Q=(X,st,rt)=>{X.listen(st,(at=>{try{rt(at)}catch(At){setTimeout((()=>{throw At}),0)}}))};return Q(A,Zl.EventType.OPEN,(()=>{U||(et(on,`RPC '${t}' stream ${o} transport opened.`),W.o_())})),Q(A,Zl.EventType.CLOSE,(()=>{U||(U=!0,et(on,`RPC '${t}' stream ${o} transport closed`),W.a_(),this.E_(A))})),Q(A,Zl.EventType.ERROR,(X=>{U||(U=!0,ca(on,`RPC '${t}' stream ${o} transport errored. Name:`,X.name,"Message:",X.message),W.a_(new nt(K.UNAVAILABLE,"The operation could not be completed")))})),Q(A,Zl.EventType.MESSAGE,(X=>{var st;if(!U){const rt=X.data[0];pt(!!rt,16349);const at=rt,At=(at==null?void 0:at.error)||((st=at[0])==null?void 0:st.error);if(At){et(on,`RPC '${t}' stream ${o} received error:`,At);const St=At.status;let yt=(function(C){const R=Le[C];if(R!==void 0)return $T(R)})(St),D=At.message;yt===void 0&&(yt=K.INTERNAL,D="Unknown error status: "+St+" with message "+At.message),U=!0,W.a_(new nt(yt,D)),A.close()}else et(on,`RPC '${t}' stream ${o} received:`,rt),W.u_(rt)}})),Q(m,$E.STAT_EVENT,(X=>{X.stat===Wm.PROXY?et(on,`RPC '${t}' stream ${o} detected buffering proxy`):X.stat===Wm.NOPROXY&&et(on,`RPC '${t}' stream ${o} detected no buffering proxy`)})),setTimeout((()=>{W.__()}),0),W}terminate(){this.c_.forEach((t=>t.close())),this.c_=[]}I_(t){this.c_.push(t)}E_(t){this.c_=this.c_.filter((n=>n===t))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lR(){return typeof window<"u"?window:null}function Ch(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pf(s){return new uI(s,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V1{constructor(t,n,r=1e3,o=1.5,u=6e4){this.Mi=t,this.timerId=n,this.d_=r,this.A_=o,this.R_=u,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(t){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),o=Math.max(0,n-r);o>0&&et("ExponentialBackoff",`Backing off for ${o} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,o,(()=>(this.f_=Date.now(),t()))),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE="PersistentStream";class N1{constructor(t,n,r,o,u,h,m,g){this.Mi=t,this.S_=r,this.b_=o,this.connection=u,this.authCredentialsProvider=h,this.appCheckCredentialsProvider=m,this.listener=g,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new V1(t,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,(()=>this.k_())))}q_(t){this.Q_(),this.stream.send(t)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(t,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,t!==4?this.M_.reset():n&&n.code===K.RESOURCE_EXHAUSTED?(mn(n.toString()),mn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.r_(n)}K_(){}auth(){this.state=1;const t=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then((([r,o])=>{this.D_===n&&this.G_(r,o)}),(r=>{t((()=>{const o=new nt(K.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(o)}))}))}G_(t,n){const r=this.W_(this.D_);this.stream=this.j_(t,n),this.stream.Xo((()=>{r((()=>this.listener.Xo()))})),this.stream.t_((()=>{r((()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,(()=>(this.O_()&&(this.state=3),Promise.resolve()))),this.listener.t_())))})),this.stream.r_((o=>{r((()=>this.z_(o)))})),this.stream.onMessage((o=>{r((()=>++this.F_==1?this.J_(o):this.onNext(o)))}))}N_(){this.state=5,this.M_.p_((async()=>{this.state=0,this.start()}))}z_(t){return et(dE,`close with error: ${t}`),this.stream=null,this.close(4,t)}W_(t){return n=>{this.Mi.enqueueAndForget((()=>this.D_===t?n():(et(dE,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())))}}}class uR extends N1{constructor(t,n,r,o,u,h){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,o,h),this.serializer=u}j_(t,n){return this.connection.T_("Listen",t,n)}J_(t){return this.onNext(t)}onNext(t){this.M_.reset();const n=fI(this.serializer,t),r=(function(u){if(!("targetChange"in u))return vt.min();const h=u.targetChange;return h.targetIds&&h.targetIds.length?vt.min():h.readTime?gn(h.readTime):vt.min()})(t);return this.listener.H_(n,r)}Y_(t){const n={};n.database=gg(this.serializer),n.addTarget=(function(u,h){let m;const g=h.target;if(m=qh(g)?{documents:a1(u,g)}:{query:o1(u,g).ft},m.targetId=h.targetId,h.resumeToken.approximateByteSize()>0){m.resumeToken=e1(u,h.resumeToken);const y=dg(u,h.expectedCount);y!==null&&(m.expectedCount=y)}else if(h.snapshotVersion.compareTo(vt.min())>0){m.readTime=Po(u,h.snapshotVersion.toTimestamp());const y=dg(u,h.expectedCount);y!==null&&(m.expectedCount=y)}return m})(this.serializer,t);const r=mI(this.serializer,t);r&&(n.labels=r),this.q_(n)}Z_(t){const n={};n.database=gg(this.serializer),n.removeTarget=t,this.q_(n)}}class cR extends N1{constructor(t,n,r,o,u,h){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,o,h),this.serializer=u}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(t,n){return this.connection.T_("Write",t,n)}J_(t){return pt(!!t.streamToken,31322),this.lastStreamToken=t.streamToken,pt(!t.writeResults||t.writeResults.length===0,55816),this.listener.ta()}onNext(t){pt(!!t.streamToken,12678),this.lastStreamToken=t.streamToken,this.M_.reset();const n=dI(t.writeResults,t.commitTime),r=gn(t.commitTime);return this.listener.na(r,n)}ra(){const t={};t.database=gg(this.serializer),this.q_(t)}ea(t){const n={streamToken:this.lastStreamToken,writes:t.map((r=>Gh(this.serializer,r)))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hR{}class fR extends hR{constructor(t,n,r,o){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=o,this.ia=!1}sa(){if(this.ia)throw new nt(K.FAILED_PRECONDITION,"The client has already been terminated.")}Go(t,n,r,o){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([u,h])=>this.connection.Go(t,mg(n,r),o,u,h))).catch((u=>{throw u.name==="FirebaseError"?(u.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new nt(K.UNKNOWN,u.toString())}))}Ho(t,n,r,o,u){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then((([h,m])=>this.connection.Ho(t,mg(n,r),o,h,m,u))).catch((h=>{throw h.name==="FirebaseError"?(h.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),h):new nt(K.UNKNOWN,h.toString())}))}terminate(){this.ia=!0,this.connection.terminate()}}class dR{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,(()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve()))))}ha(t){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.ca("Offline")))}set(t){this.Pa(),this.oa=0,t==="Online"&&(this.aa=!1),this.ca(t)}ca(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}la(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(mn(n),this.aa=!1):et("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pa="RemoteStore";class mR{constructor(t,n,r,o,u){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=u,this.Aa.Oo((h=>{r.enqueueAndForget((async()=>{_a(this)&&(et(pa,"Restarting streams for network reachability change."),await(async function(g){const y=Rt(g);y.Ea.add(4),await Vu(y),y.Ra.set("Unknown"),y.Ea.delete(4),await yf(y)})(this))}))})),this.Ra=new dR(r,o)}}async function yf(s){if(_a(s))for(const t of s.da)await t(!0)}async function Vu(s){for(const t of s.da)await t(!1)}function M1(s,t){const n=Rt(s);n.Ia.has(t.targetId)||(n.Ia.set(t.targetId,t),sp(n)?rp(n):Bo(n).O_()&&ip(n,t))}function np(s,t){const n=Rt(s),r=Bo(n);n.Ia.delete(t),r.O_()&&O1(n,t),n.Ia.size===0&&(r.O_()?r.L_():_a(n)&&n.Ra.set("Unknown"))}function ip(s,t){if(s.Va.Ue(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(vt.min())>0){const n=s.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Bo(s).Y_(t)}function O1(s,t){s.Va.Ue(t),Bo(s).Z_(t)}function rp(s){s.Va=new sI({getRemoteKeysForTarget:t=>s.remoteSyncer.getRemoteKeysForTarget(t),At:t=>s.Ia.get(t)||null,ht:()=>s.datastore.serializer.databaseId}),Bo(s).start(),s.Ra.ua()}function sp(s){return _a(s)&&!Bo(s).x_()&&s.Ia.size>0}function _a(s){return Rt(s).Ea.size===0}function P1(s){s.Va=void 0}async function gR(s){s.Ra.set("Online")}async function pR(s){s.Ia.forEach(((t,n)=>{ip(s,t)}))}async function yR(s,t){P1(s),sp(s)?(s.Ra.ha(t),rp(s)):s.Ra.set("Unknown")}async function _R(s,t,n){if(s.Ra.set("Online"),t instanceof t1&&t.state===2&&t.cause)try{await(async function(o,u){const h=u.cause;for(const m of u.targetIds)o.Ia.has(m)&&(await o.remoteSyncer.rejectListen(m,h),o.Ia.delete(m),o.Va.removeTarget(m))})(s,t)}catch(r){et(pa,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await Zh(s,r)}else if(t instanceof xh?s.Va.Ze(t):t instanceof WT?s.Va.st(t):s.Va.tt(t),!n.isEqual(vt.min()))try{const r=await D1(s.localStore);n.compareTo(r)>=0&&await(function(u,h){const m=u.Va.Tt(h);return m.targetChanges.forEach(((g,y)=>{if(g.resumeToken.approximateByteSize()>0){const E=u.Ia.get(y);E&&u.Ia.set(y,E.withResumeToken(g.resumeToken,h))}})),m.targetMismatches.forEach(((g,y)=>{const E=u.Ia.get(g);if(!E)return;u.Ia.set(g,E.withResumeToken(Be.EMPTY_BYTE_STRING,E.snapshotVersion)),O1(u,g);const A=new dr(E.target,g,y,E.sequenceNumber);ip(u,A)})),u.remoteSyncer.applyRemoteEvent(m)})(s,n)}catch(r){et(pa,"Failed to raise snapshot:",r),await Zh(s,r)}}async function Zh(s,t,n){if(!ms(t))throw t;s.Ea.add(1),await Vu(s),s.Ra.set("Offline"),n||(n=()=>D1(s.localStore)),s.asyncQueue.enqueueRetryable((async()=>{et(pa,"Retrying IndexedDB access"),await n(),s.Ea.delete(1),await yf(s)}))}function z1(s,t){return t().catch((n=>Zh(s,n,t)))}async function Nu(s){const t=Rt(s),n=fs(t);let r=t.Ta.length>0?t.Ta[t.Ta.length-1].batchId:ra;for(;vR(t);)try{const o=await tR(t.localStore,r);if(o===null){t.Ta.length===0&&n.L_();break}r=o.batchId,ER(t,o)}catch(o){await Zh(t,o)}k1(t)&&L1(t)}function vR(s){return _a(s)&&s.Ta.length<10}function ER(s,t){s.Ta.push(t);const n=fs(s);n.O_()&&n.X_&&n.ea(t.mutations)}function k1(s){return _a(s)&&!fs(s).x_()&&s.Ta.length>0}function L1(s){fs(s).start()}async function TR(s){fs(s).ra()}async function AR(s){const t=fs(s);for(const n of s.Ta)t.ea(n.mutations)}async function bR(s,t,n){const r=s.Ta.shift(),o=Gg.from(r,t,n);await z1(s,(()=>s.remoteSyncer.applySuccessfulWrite(o))),await Nu(s)}async function SR(s,t){t&&fs(s).X_&&await(async function(r,o){if((function(h){return nI(h)&&h!==K.ABORTED})(o.code)){const u=r.Ta.shift();fs(r).B_(),await z1(r,(()=>r.remoteSyncer.rejectFailedWrite(u.batchId,o))),await Nu(r)}})(s,t),k1(s)&&L1(s)}async function mE(s,t){const n=Rt(s);n.asyncQueue.verifyOperationInProgress(),et(pa,"RemoteStore received new credentials");const r=_a(n);n.Ea.add(3),await Vu(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.Ea.delete(3),await yf(n)}async function wR(s,t){const n=Rt(s);t?(n.Ea.delete(2),await yf(n)):t||(n.Ea.add(2),await Vu(n),n.Ra.set("Unknown"))}function Bo(s){return s.ma||(s.ma=(function(n,r,o){const u=Rt(n);return u.sa(),new uR(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:gR.bind(null,s),t_:pR.bind(null,s),r_:yR.bind(null,s),H_:_R.bind(null,s)}),s.da.push((async t=>{t?(s.ma.B_(),sp(s)?rp(s):s.Ra.set("Unknown")):(await s.ma.stop(),P1(s))}))),s.ma}function fs(s){return s.fa||(s.fa=(function(n,r,o){const u=Rt(n);return u.sa(),new cR(r,u.connection,u.authCredentials,u.appCheckCredentials,u.serializer,o)})(s.datastore,s.asyncQueue,{Xo:()=>Promise.resolve(),t_:TR.bind(null,s),r_:SR.bind(null,s),ta:AR.bind(null,s),na:bR.bind(null,s)}),s.da.push((async t=>{t?(s.fa.B_(),await Nu(s)):(await s.fa.stop(),s.Ta.length>0&&(et(pa,`Stopping write stream with ${s.Ta.length} pending writes`),s.Ta=[]))}))),s.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ap{constructor(t,n,r,o,u){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=o,this.removalCallback=u,this.deferred=new mr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch((h=>{}))}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,o,u){const h=Date.now()+r,m=new ap(t,n,h,o,u);return m.start(r),m}start(t){this.timerHandle=setTimeout((()=>this.handleDelayElapsed()),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new nt(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget((()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then((t=>this.deferred.resolve(t)))):Promise.resolve()))}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function op(s,t){if(mn("AsyncQueue",`${t}: ${s}`),ms(s))return new nt(K.UNAVAILABLE,`${t}: ${s}`);throw s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ao{static emptySet(t){return new Ao(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||lt.comparator(n.key,r.key):(n,r)=>lt.comparator(n.key,r.key),this.keyedMap=Jl(),this.sortedSet=new _e(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal(((n,r)=>(t(n),!1)))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof Ao)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const o=n.getNext().key,u=r.getNext().key;if(!o.isEqual(u))return!1}return!0}toString(){const t=[];return this.forEach((n=>{t.push(n.toString())})),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new Ao;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.ga=new _e(lt.comparator)}track(t){const n=t.doc.key,r=this.ga.get(n);r?t.type!==0&&r.type===3?this.ga=this.ga.insert(n,t):t.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.ga=this.ga.remove(n):t.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:t.doc}):ft(63341,{Rt:t,pa:r}):this.ga=this.ga.insert(n,t)}ya(){const t=[];return this.ga.inorderTraversal(((n,r)=>{t.push(r)})),t}}class zo{constructor(t,n,r,o,u,h,m,g,y){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=o,this.mutatedKeys=u,this.fromCache=h,this.syncStateChanged=m,this.excludesMetadataChanges=g,this.hasCachedResults=y}static fromInitialDocuments(t,n,r,o,u){const h=[];return n.forEach((m=>{h.push({type:0,doc:m})})),new zo(t,n,Ao.emptySet(n),h,r,o,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&uf(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let o=0;o<n.length;o++)if(n[o].type!==r[o].type||!n[o].doc.isEqual(r[o].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IR{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some((t=>t.Da()))}}class RR{constructor(){this.queries=pE(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const o=Rt(n),u=o.queries;o.queries=pE(),u.forEach(((h,m)=>{for(const g of m.Sa)g.onError(r)}))})(this,new nt(K.ABORTED,"Firestore shutting down"))}}function pE(){return new vr((s=>LT(s)),uf)}async function U1(s,t){const n=Rt(s);let r=3;const o=t.query;let u=n.queries.get(o);u?!u.ba()&&t.Da()&&(r=2):(u=new IR,r=t.Da()?0:1);try{switch(r){case 0:u.wa=await n.onListen(o,!0);break;case 1:u.wa=await n.onListen(o,!1);break;case 2:await n.onFirstRemoteStoreListen(o)}}catch(h){const m=op(h,`Initialization of query '${go(t.query)}' failed`);return void t.onError(m)}n.queries.set(o,u),u.Sa.push(t),t.va(n.onlineState),u.wa&&t.Fa(u.wa)&&lp(n)}async function j1(s,t){const n=Rt(s),r=t.query;let o=3;const u=n.queries.get(r);if(u){const h=u.Sa.indexOf(t);h>=0&&(u.Sa.splice(h,1),u.Sa.length===0?o=t.Da()?0:1:!u.ba()&&t.Da()&&(o=2))}switch(o){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xR(s,t){const n=Rt(s);let r=!1;for(const o of t){const u=o.query,h=n.queries.get(u);if(h){for(const m of h.Sa)m.Fa(o)&&(r=!0);h.wa=o}}r&&lp(n)}function DR(s,t,n){const r=Rt(s),o=r.queries.get(t);if(o)for(const u of o.Sa)u.onError(n);r.queries.delete(t)}function lp(s){s.Ca.forEach((t=>{t.next()}))}var Ag,yE;(yE=Ag||(Ag={})).Ma="default",yE.Cache="cache";class B1{constructor(t,n,r){this.query=t,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(t){if(!this.options.includeMetadataChanges){const r=[];for(const o of t.docChanges)o.type!==3&&r.push(o);t=new zo(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.Oa?this.Ba(t)&&(this.xa.next(t),n=!0):this.La(t,this.onlineState)&&(this.ka(t),n=!0),this.Na=t,n}onError(t){this.xa.error(t)}va(t){this.onlineState=t;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,t)&&(this.ka(this.Na),n=!0),n}La(t,n){if(!t.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Ba(t){if(t.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(t){t=zo.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.Oa=!0,this.xa.next(t)}Da(){return this.options.source!==Ag.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q1{constructor(t){this.key=t}}class F1{constructor(t){this.key=t}}class CR{constructor(t,n){this.query=t,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=zt(),this.mutatedKeys=zt(),this.eu=UT(t),this.tu=new Ao(this.eu)}get nu(){return this.Ya}ru(t,n){const r=n?n.iu:new gE,o=n?n.tu:this.tu;let u=n?n.mutatedKeys:this.mutatedKeys,h=o,m=!1;const g=this.query.limitType==="F"&&o.size===this.query.limit?o.last():null,y=this.query.limitType==="L"&&o.size===this.query.limit?o.first():null;if(t.inorderTraversal(((E,A)=>{const S=o.get(E),U=xu(this.query,A)?A:null,W=!!S&&this.mutatedKeys.has(S.key),Q=!!U&&(U.hasLocalMutations||this.mutatedKeys.has(U.key)&&U.hasCommittedMutations);let X=!1;S&&U?S.data.isEqual(U.data)?W!==Q&&(r.track({type:3,doc:U}),X=!0):this.su(S,U)||(r.track({type:2,doc:U}),X=!0,(g&&this.eu(U,g)>0||y&&this.eu(U,y)<0)&&(m=!0)):!S&&U?(r.track({type:0,doc:U}),X=!0):S&&!U&&(r.track({type:1,doc:S}),X=!0,(g||y)&&(m=!0)),X&&(U?(h=h.add(U),u=Q?u.add(E):u.delete(E)):(h=h.delete(E),u=u.delete(E)))})),this.query.limit!==null)for(;h.size>this.query.limit;){const E=this.query.limitType==="F"?h.last():h.first();h=h.delete(E.key),u=u.delete(E.key),r.track({type:1,doc:E})}return{tu:h,iu:r,Cs:m,mutatedKeys:u}}su(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,o){const u=this.tu;this.tu=t.tu,this.mutatedKeys=t.mutatedKeys;const h=t.iu.ya();h.sort(((E,A)=>(function(U,W){const Q=X=>{switch(X){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ft(20277,{Rt:X})}};return Q(U)-Q(W)})(E.type,A.type)||this.eu(E.doc,A.doc))),this.ou(r),o=o??!1;const m=n&&!o?this._u():[],g=this.Xa.size===0&&this.current&&!o?1:0,y=g!==this.Za;return this.Za=g,h.length!==0||y?{snapshot:new zo(this.query,t.tu,u,h,t.mutatedKeys,g===0,y,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:m}:{au:m}}va(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new gE,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(t){return!this.Ya.has(t)&&!!this.tu.has(t)&&!this.tu.get(t).hasLocalMutations}ou(t){t&&(t.addedDocuments.forEach((n=>this.Ya=this.Ya.add(n))),t.modifiedDocuments.forEach((n=>{})),t.removedDocuments.forEach((n=>this.Ya=this.Ya.delete(n))),this.current=t.current)}_u(){if(!this.current)return[];const t=this.Xa;this.Xa=zt(),this.tu.forEach((r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))}));const n=[];return t.forEach((r=>{this.Xa.has(r)||n.push(new F1(r))})),this.Xa.forEach((r=>{t.has(r)||n.push(new q1(r))})),n}cu(t){this.Ya=t.Qs,this.Xa=zt();const n=this.ru(t.documents);return this.applyChanges(n,!0)}lu(){return zo.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const up="SyncEngine";class VR{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class NR{constructor(t){this.key=t,this.hu=!1}}class MR{constructor(t,n,r,o,u,h){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=o,this.currentUser=u,this.maxConcurrentLimboResolutions=h,this.Pu={},this.Tu=new vr((m=>LT(m)),uf),this.Iu=new Map,this.Eu=new Set,this.du=new _e(lt.comparator),this.Au=new Map,this.Ru=new Jg,this.Vu={},this.mu=new Map,this.fu=ga.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function OR(s,t,n=!0){const r=X1(s);let o;const u=r.Tu.get(t);return u?(r.sharedClientState.addLocalQueryTarget(u.targetId),o=u.view.lu()):o=await H1(r,t,n,!0),o}async function PR(s,t){const n=X1(s);await H1(n,t,!0,!1)}async function H1(s,t,n,r){const o=await eR(s.localStore,ti(t)),u=o.targetId,h=s.sharedClientState.addLocalQueryTarget(u,n);let m;return r&&(m=await zR(s,t,u,h==="current",o.resumeToken)),s.isPrimaryClient&&n&&M1(s.remoteStore,o),m}async function zR(s,t,n,r,o){s.pu=(A,S,U)=>(async function(Q,X,st,rt){let at=X.view.ru(st);at.Cs&&(at=await uE(Q.localStore,X.query,!1).then((({documents:D})=>X.view.ru(D,at))));const At=rt&&rt.targetChanges.get(X.targetId),St=rt&&rt.targetMismatches.get(X.targetId)!=null,yt=X.view.applyChanges(at,Q.isPrimaryClient,At,St);return vE(Q,X.targetId,yt.au),yt.snapshot})(s,A,S,U);const u=await uE(s.localStore,t,!0),h=new CR(t,u.Qs),m=h.ru(u.documents),g=Cu.createSynthesizedTargetChangeForCurrentChange(n,r&&s.onlineState!=="Offline",o),y=h.applyChanges(m,s.isPrimaryClient,g);vE(s,n,y.au);const E=new VR(t,n,h);return s.Tu.set(t,E),s.Iu.has(n)?s.Iu.get(n).push(t):s.Iu.set(n,[t]),y.snapshot}async function kR(s,t,n){const r=Rt(s),o=r.Tu.get(t),u=r.Iu.get(o.targetId);if(u.length>1)return r.Iu.set(o.targetId,u.filter((h=>!uf(h,t)))),void r.Tu.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(o.targetId),r.sharedClientState.isActiveQueryTarget(o.targetId)||await Eg(r.localStore,o.targetId,!1).then((()=>{r.sharedClientState.clearQueryState(o.targetId),n&&np(r.remoteStore,o.targetId),bg(r,o.targetId)})).catch(ya)):(bg(r,o.targetId),await Eg(r.localStore,o.targetId,!0))}async function LR(s,t){const n=Rt(s),r=n.Tu.get(t),o=n.Iu.get(r.targetId);n.isPrimaryClient&&o.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),np(n.remoteStore,r.targetId))}async function UR(s,t,n){const r=Z1(s);try{const o=await(function(h,m){const g=Rt(h),y=Yt.now(),E=m.reduce(((U,W)=>U.add(W.key)),zt());let A,S;return g.persistence.runTransaction("Locally write mutations","readwrite",(U=>{let W=zn(),Q=zt();return g.Ns.getEntries(U,E).next((X=>{W=X,W.forEach(((st,rt)=>{rt.isValidDocument()||(Q=Q.add(st))}))})).next((()=>g.localDocuments.getOverlayedDocuments(U,W))).next((X=>{A=X;const st=[];for(const rt of m){const at=tI(rt,A.get(rt.key).overlayedDocument);at!=null&&st.push(new Er(rt.key,at,DT(at.value.mapValue),Ye.exists(!0)))}return g.mutationQueue.addMutationBatch(U,y,st,m)})).next((X=>{S=X;const st=X.applyToLocalDocumentSet(A,Q);return g.documentOverlayCache.saveOverlays(U,X.batchId,st)}))})).then((()=>({batchId:S.batchId,changes:BT(A)})))})(r.localStore,t);r.sharedClientState.addPendingMutation(o.batchId),(function(h,m,g){let y=h.Vu[h.currentUser.toKey()];y||(y=new _e(It)),y=y.insert(m,g),h.Vu[h.currentUser.toKey()]=y})(r,o.batchId,n),await Mu(r,o.changes),await Nu(r.remoteStore)}catch(o){const u=op(o,"Failed to persist write");n.reject(u)}}async function G1(s,t){const n=Rt(s);try{const r=await $I(n.localStore,t);t.targetChanges.forEach(((o,u)=>{const h=n.Au.get(u);h&&(pt(o.addedDocuments.size+o.modifiedDocuments.size+o.removedDocuments.size<=1,22616),o.addedDocuments.size>0?h.hu=!0:o.modifiedDocuments.size>0?pt(h.hu,14607):o.removedDocuments.size>0&&(pt(h.hu,42227),h.hu=!1))})),await Mu(n,r,t)}catch(r){await ya(r)}}function _E(s,t,n){const r=Rt(s);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const o=[];r.Tu.forEach(((u,h)=>{const m=h.view.va(t);m.snapshot&&o.push(m.snapshot)})),(function(h,m){const g=Rt(h);g.onlineState=m;let y=!1;g.queries.forEach(((E,A)=>{for(const S of A.Sa)S.va(m)&&(y=!0)})),y&&lp(g)})(r.eventManager,t),o.length&&r.Pu.H_(o),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function jR(s,t,n){const r=Rt(s);r.sharedClientState.updateQueryState(t,"rejected",n);const o=r.Au.get(t),u=o&&o.key;if(u){let h=new _e(lt.comparator);h=h.insert(u,be.newNoDocument(u,vt.min()));const m=zt().add(u),g=new ff(vt.min(),new Map,new _e(It),h,m);await G1(r,g),r.du=r.du.remove(u),r.Au.delete(t),cp(r)}else await Eg(r.localStore,t,!1).then((()=>bg(r,t,n))).catch(ya)}async function BR(s,t){const n=Rt(s),r=t.batch.batchId;try{const o=await JI(n.localStore,t);K1(n,r,null),Q1(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Mu(n,o)}catch(o){await ya(o)}}async function qR(s,t,n){const r=Rt(s);try{const o=await(function(h,m){const g=Rt(h);return g.persistence.runTransaction("Reject batch","readwrite-primary",(y=>{let E;return g.mutationQueue.lookupMutationBatch(y,m).next((A=>(pt(A!==null,37113),E=A.keys(),g.mutationQueue.removeMutationBatch(y,A)))).next((()=>g.mutationQueue.performConsistencyCheck(y))).next((()=>g.documentOverlayCache.removeOverlaysForBatchId(y,E,m))).next((()=>g.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(y,E))).next((()=>g.localDocuments.getDocuments(y,E)))}))})(r.localStore,t);K1(r,t,n),Q1(r,t),r.sharedClientState.updateMutationState(t,"rejected",n),await Mu(r,o)}catch(o){await ya(o)}}function Q1(s,t){(s.mu.get(t)||[]).forEach((n=>{n.resolve()})),s.mu.delete(t)}function K1(s,t,n){const r=Rt(s);let o=r.Vu[r.currentUser.toKey()];if(o){const u=o.get(t);u&&(n?u.reject(n):u.resolve(),o=o.remove(t)),r.Vu[r.currentUser.toKey()]=o}}function bg(s,t,n=null){s.sharedClientState.removeLocalQueryTarget(t);for(const r of s.Iu.get(t))s.Tu.delete(r),n&&s.Pu.yu(r,n);s.Iu.delete(t),s.isPrimaryClient&&s.Ru.jr(t).forEach((r=>{s.Ru.containsKey(r)||Y1(s,r)}))}function Y1(s,t){s.Eu.delete(t.path.canonicalString());const n=s.du.get(t);n!==null&&(np(s.remoteStore,n),s.du=s.du.remove(t),s.Au.delete(n),cp(s))}function vE(s,t,n){for(const r of n)r instanceof q1?(s.Ru.addReference(r.key,t),FR(s,r)):r instanceof F1?(et(up,"Document no longer in limbo: "+r.key),s.Ru.removeReference(r.key,t),s.Ru.containsKey(r.key)||Y1(s,r.key)):ft(19791,{wu:r})}function FR(s,t){const n=t.key,r=n.path.canonicalString();s.du.get(n)||s.Eu.has(r)||(et(up,"New document in limbo: "+n),s.Eu.add(r),cp(s))}function cp(s){for(;s.Eu.size>0&&s.du.size<s.maxConcurrentLimboResolutions;){const t=s.Eu.values().next().value;s.Eu.delete(t);const n=new lt(Wt.fromString(t)),r=s.fu.next();s.Au.set(r,new NR(n)),s.du=s.du.insert(n,r),M1(s.remoteStore,new dr(ti(lf(n.path)),r,"TargetPurposeLimboResolution",$n.ce))}}async function Mu(s,t,n){const r=Rt(s),o=[],u=[],h=[];r.Tu.isEmpty()||(r.Tu.forEach(((m,g)=>{h.push(r.pu(g,t,n).then((y=>{var E;if((y||n)&&r.isPrimaryClient){const A=y?!y.fromCache:(E=n==null?void 0:n.targetChanges.get(g.targetId))==null?void 0:E.current;r.sharedClientState.updateQueryState(g.targetId,A?"current":"not-current")}if(y){o.push(y);const A=tp.As(g.targetId,y);u.push(A)}})))})),await Promise.all(h),r.Pu.H_(o),await(async function(g,y){const E=Rt(g);try{await E.persistence.runTransaction("notifyLocalViewChanges","readwrite",(A=>k.forEach(y,(S=>k.forEach(S.Es,(U=>E.persistence.referenceDelegate.addReference(A,S.targetId,U))).next((()=>k.forEach(S.ds,(U=>E.persistence.referenceDelegate.removeReference(A,S.targetId,U)))))))))}catch(A){if(!ms(A))throw A;et(ep,"Failed to update sequence numbers: "+A)}for(const A of y){const S=A.targetId;if(!A.fromCache){const U=E.Ms.get(S),W=U.snapshotVersion,Q=U.withLastLimboFreeSnapshotVersion(W);E.Ms=E.Ms.insert(S,Q)}}})(r.localStore,u))}async function HR(s,t){const n=Rt(s);if(!n.currentUser.isEqual(t)){et(up,"User change. New user:",t.toKey());const r=await x1(n.localStore,t);n.currentUser=t,(function(u,h){u.mu.forEach((m=>{m.forEach((g=>{g.reject(new nt(K.CANCELLED,h))}))})),u.mu.clear()})(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await Mu(n,r.Ls)}}function GR(s,t){const n=Rt(s),r=n.Au.get(t);if(r&&r.hu)return zt().add(r.key);{let o=zt();const u=n.Iu.get(t);if(!u)return o;for(const h of u){const m=n.Tu.get(h);o=o.unionWith(m.view.nu)}return o}}function X1(s){const t=Rt(s);return t.remoteStore.remoteSyncer.applyRemoteEvent=G1.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=GR.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=jR.bind(null,t),t.Pu.H_=xR.bind(null,t.eventManager),t.Pu.yu=DR.bind(null,t.eventManager),t}function Z1(s){const t=Rt(s);return t.remoteStore.remoteSyncer.applySuccessfulWrite=BR.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=qR.bind(null,t),t}class Su{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=pf(t.databaseInfo.databaseId),this.sharedClientState=this.Du(t),this.persistence=this.Cu(t),await this.persistence.start(),this.localStore=this.vu(t),this.gcScheduler=this.Fu(t,this.localStore),this.indexBackfillerScheduler=this.Mu(t,this.localStore)}Fu(t,n){return null}Mu(t,n){return null}vu(t){return R1(this.persistence,new I1,t.initialUser,this.serializer)}Cu(t){return new $g(gf.mi,this.serializer)}Du(t){return new C1}async terminate(){var t,n;(t=this.gcScheduler)==null||t.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Su.provider={build:()=>new Su};class QR extends Su{constructor(t){super(),this.cacheSizeBytes=t}Fu(t,n){pt(this.persistence.referenceDelegate instanceof Xh,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new T1(r,t.asyncQueue,n)}Cu(t){const n=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new $g((r=>Xh.mi(r,n)),this.serializer)}}class KR extends Su{constructor(t,n,r){super(),this.xu=t,this.cacheSizeBytes=n,this.forceOwnership=r,this.kind="persistent",this.synchronizeTabs=!1}async initialize(t){await super.initialize(t),await this.xu.initialize(this,t),await Z1(this.xu.syncEngine),await Nu(this.xu.remoteStore),await this.persistence.Ji((()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve())))}vu(t){return R1(this.persistence,new I1,t.initialUser,this.serializer)}Fu(t,n){const r=this.persistence.referenceDelegate.garbageCollector;return new T1(r,t.asyncQueue,n)}Mu(t,n){const r=new Ww(n,this.persistence);return new $w(t.asyncQueue,r)}Cu(t){const n=KI(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),r=this.cacheSizeBytes!==void 0?ln.withCacheSize(this.cacheSizeBytes):ln.DEFAULT;return new Wg(this.synchronizeTabs,n,t.clientId,r,t.asyncQueue,lR(),Ch(),this.serializer,this.sharedClientState,!!this.forceOwnership)}Du(t){return new C1}}class Jh{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>_E(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=HR.bind(null,this.syncEngine),await wR(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return(function(){return new RR})()}createDatastore(t){const n=pf(t.databaseInfo.databaseId),r=(function(u){return new oR(u)})(t.databaseInfo);return(function(u,h,m,g){return new fR(u,h,m,g)})(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return(function(r,o,u,h,m){return new mR(r,o,u,h,m)})(this.localStore,this.datastore,t.asyncQueue,(n=>_E(this.syncEngine,n,0)),(function(){return fE.v()?new fE:new iR})())}createSyncEngine(t,n){return(function(o,u,h,m,g,y,E){const A=new MR(o,u,h,m,g,y);return E&&(A.gu=!0),A})(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await(async function(o){const u=Rt(o);et(pa,"RemoteStore shutting down."),u.Ea.add(5),await Vu(u),u.Aa.shutdown(),u.Ra.set("Unknown")})(this.remoteStore),(t=this.datastore)==null||t.terminate(),(n=this.eventManager)==null||n.terminate()}}Jh.provider={build:()=>new Jh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J1{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.Ou(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.Ou(this.observer.error,t):mn("Uncaught Error in snapshot listener:",t.toString()))}Nu(){this.muted=!0}Ou(t,n){setTimeout((()=>{this.muted||t(n)}),0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="FirestoreClient";class YR{constructor(t,n,r,o,u){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=o,this.user=rn.UNAUTHENTICATED,this.clientId=Ng.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=u,this.authCredentials.start(r,(async h=>{et(ds,"Received user=",h.uid),await this.authCredentialListener(h),this.user=h})),this.appCheckCredentials.start(r,(h=>(et(ds,"Received new app check token=",h),this.appCheckCredentialListener(h,this.user))))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new mr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=op(n,"Failed to shutdown persistence");t.reject(r)}})),t.promise}}async function Bm(s,t){s.asyncQueue.verifyOperationInProgress(),et(ds,"Initializing OfflineComponentProvider");const n=s.configuration;await t.initialize(n);let r=n.initialUser;s.setCredentialChangeListener((async o=>{r.isEqual(o)||(await x1(t.localStore,o),r=o)})),t.persistence.setDatabaseDeletedListener((()=>s.terminate())),s._offlineComponents=t}async function EE(s,t){s.asyncQueue.verifyOperationInProgress();const n=await XR(s);et(ds,"Initializing OnlineComponentProvider"),await t.initialize(n,s.configuration),s.setCredentialChangeListener((r=>mE(t.remoteStore,r))),s.setAppCheckTokenChangeListener(((r,o)=>mE(t.remoteStore,o))),s._onlineComponents=t}async function XR(s){if(!s._offlineComponents)if(s._uninitializedComponentsProvider){et(ds,"Using user provided OfflineComponentProvider");try{await Bm(s,s._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!(function(o){return o.name==="FirebaseError"?o.code===K.FAILED_PRECONDITION||o.code===K.UNIMPLEMENTED:!(typeof DOMException<"u"&&o instanceof DOMException)||o.code===22||o.code===20||o.code===11})(n))throw n;ca("Error using user provided cache. Falling back to memory cache: "+n),await Bm(s,new Su)}}else et(ds,"Using default OfflineComponentProvider"),await Bm(s,new QR(void 0));return s._offlineComponents}async function $1(s){return s._onlineComponents||(s._uninitializedComponentsProvider?(et(ds,"Using user provided OnlineComponentProvider"),await EE(s,s._uninitializedComponentsProvider._online)):(et(ds,"Using default OnlineComponentProvider"),await EE(s,new Jh))),s._onlineComponents}function ZR(s){return $1(s).then((t=>t.syncEngine))}async function Sg(s){const t=await $1(s),n=t.eventManager;return n.onListen=OR.bind(null,t.syncEngine),n.onUnlisten=kR.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=PR.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=LR.bind(null,t.syncEngine),n}function JR(s,t,n={}){const r=new mr;return s.asyncQueue.enqueueAndForget((async()=>(function(u,h,m,g,y){const E=new J1({next:S=>{E.Nu(),h.enqueueAndForget((()=>j1(u,A))),S.fromCache&&g.source==="server"?y.reject(new nt(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):y.resolve(S)},error:S=>y.reject(S)}),A=new B1(m,E,{includeMetadataChanges:!0,qa:!0});return U1(u,A)})(await Sg(s),s.asyncQueue,t,n,r))),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W1(s){const t={};return s.timeoutSeconds!==void 0&&(t.timeoutSeconds=s.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TE=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA="firestore.googleapis.com",AE=!0;class bE{constructor(t){if(t.host===void 0){if(t.ssl!==void 0)throw new nt(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=tA,this.ssl=AE}else this.host=t.host,this.ssl=t.ssl??AE;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=y1;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<CI)throw new nt(K.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Yw("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=W1(t.experimentalLongPollingOptions??{}),(function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new nt(K.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}})(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&(function(r,o){return r.timeoutSeconds===o.timeoutSeconds})(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class _f{constructor(t,n,r,o){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new bE({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new nt(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new nt(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new bE(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=(function(r){if(!r)return new Lw;switch(r.type){case"firstParty":return new qw(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new nt(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}})(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return(function(n){const r=TE.get(n);r&&(et("ComponentProvider","Removing Datastore"),TE.delete(n),r.terminate())})(this),Promise.resolve()}}function $R(s,t,n,r={}){var y;s=Wn(s,_f);const o=Dg(t),u=s._getSettings(),h={...u,emulatorOptions:s._getEmulatorOptions()},m=`${t}:${n}`;o&&(gS(`https://${m}`),vS("Firestore",!0)),u.host!==tA&&u.host!==m&&ca("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const g={...u,host:m,ssl:o,emulatorOptions:r};if(!Oh(g,h)&&(s._setSettings(g),r.mockUserToken)){let E,A;if(typeof r.mockUserToken=="string")E=r.mockUserToken,A=rn.MOCK_USER;else{E=pS(r.mockUserToken,(y=s._app)==null?void 0:y.options.projectId);const S=r.mockUserToken.sub||r.mockUserToken.user_id;if(!S)throw new nt(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");A=new rn(S)}s._authCredentials=new Uw(new nT(E,A))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new ps(this.firestore,t,this._query)}}class je{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new us(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new je(this.firestore,t,this._key)}toJSON(){return{type:je._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(t,n,r){if(wu(n,je._jsonSchema))return new je(t,r||null,new lt(Wt.fromString(n.referencePath)))}}je._jsonSchemaVersion="firestore/documentReference/1.0",je._jsonSchema={type:Ue("string",je._jsonSchemaVersion),referencePath:Ue("string")};class us extends ps{constructor(t,n,r){super(t,n,lf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new je(this.firestore,null,new lt(t))}withConverter(t){return new us(this.firestore,t,this._path)}}function cn(s,t,...n){if(s=ei(s),rT("collection","path",t),s instanceof _f){const r=Wt.fromString(t,...n);return d0(r),new us(s,null,r)}{if(!(s instanceof je||s instanceof us))throw new nt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Wt.fromString(t,...n));return d0(r),new us(s.firestore,null,r)}}function ni(s,t,...n){if(s=ei(s),arguments.length===1&&(t=Ng.newId()),rT("doc","path",t),s instanceof _f){const r=Wt.fromString(t,...n);return f0(r),new je(s,null,new lt(r))}{if(!(s instanceof je||s instanceof us))throw new nt(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=s._path.child(Wt.fromString(t,...n));return f0(r),new je(s.firestore,s instanceof us?s.converter:null,new lt(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="AsyncQueue";class wE{constructor(t=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new V1(this,"async_queue_retry"),this._c=()=>{const r=Ch();r&&et(SE,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=t;const n=Ch();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.uc(),this.cc(t)}enterRestrictedMode(t){if(!this.ec){this.ec=!0,this.sc=t||!1;const n=Ch();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(t){if(this.uc(),this.ec)return new Promise((()=>{}));const n=new mr;return this.cc((()=>this.ec&&this.sc?Promise.resolve():(t().then(n.resolve,n.reject),n.promise))).then((()=>n.promise))}enqueueRetryable(t){this.enqueueAndForget((()=>(this.Xu.push(t),this.lc())))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(t){if(!ms(t))throw t;et(SE,"Operation failed with retryable error: "+t)}this.Xu.length>0&&this.M_.p_((()=>this.lc()))}}cc(t){const n=this.ac.then((()=>(this.rc=!0,t().catch((r=>{throw this.nc=r,this.rc=!1,mn("INTERNAL UNHANDLED ERROR: ",IE(r)),r})).then((r=>(this.rc=!1,r))))));return this.ac=n,n}enqueueAfterDelay(t,n,r){this.uc(),this.oc.indexOf(t)>-1&&(n=0);const o=ap.createAndSchedule(this,t,n,r,(u=>this.hc(u)));return this.tc.push(o),o}uc(){this.nc&&ft(47125,{Pc:IE(this.nc)})}verifyOperationInProgress(){}async Tc(){let t;do t=this.ac,await t;while(t!==this.ac)}Ic(t){for(const n of this.tc)if(n.timerId===t)return!0;return!1}Ec(t){return this.Tc().then((()=>{this.tc.sort(((n,r)=>n.targetTimeMs-r.targetTimeMs));for(const n of this.tc)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.Tc()}))}dc(t){this.oc.push(t)}hc(t){const n=this.tc.indexOf(t);this.tc.splice(n,1)}}function IE(s){let t=s.message||"";return s.stack&&(t=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function RE(s){return(function(n,r){if(typeof n!="object"||n===null)return!1;const o=n;for(const u of r)if(u in o&&typeof o[u]=="function")return!0;return!1})(s,["next","error","complete"])}class _r extends _f{constructor(t,n,r,o){super(t,n,r,o),this.type="firestore",this._queue=new wE,this._persistenceKey=(o==null?void 0:o.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new wE(t),this._firestoreClient=void 0,await t}}}function WR(s,t){const n=typeof s=="object"?s:ww(),r=typeof s=="string"?s:Bh,o=Ew(n,"firestore").getImmediate({identifier:r});if(!o._initialized){const u=dS("firestore");u&&$R(o,...u)}return o}function vf(s){if(s._terminated)throw new nt(K.FAILED_PRECONDITION,"The client has already been terminated.");return s._firestoreClient||eA(s),s._firestoreClient}function eA(s){var r,o,u;const t=s._freezeSettings(),n=(function(m,g,y,E){return new x2(m,g,y,E.host,E.ssl,E.experimentalForceLongPolling,E.experimentalAutoDetectLongPolling,W1(E.experimentalLongPollingOptions),E.useFetchStreams,E.isUsingEmulator)})(s._databaseId,((r=s._app)==null?void 0:r.options.appId)||"",s._persistenceKey,t);s._componentsProvider||(o=t.localCache)!=null&&o._offlineComponentProvider&&((u=t.localCache)!=null&&u._onlineComponentProvider)&&(s._componentsProvider={_offline:t.localCache._offlineComponentProvider,_online:t.localCache._onlineComponentProvider}),s._firestoreClient=new YR(s._authCredentials,s._appCheckCredentials,s._queue,n,s._componentsProvider&&(function(m){const g=m==null?void 0:m._online.build();return{_offline:m==null?void 0:m._offline.build(g),_online:g}})(s._componentsProvider))}function tx(s,t){ca("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const n=s._freezeSettings();return ex(s,Jh.provider,{build:r=>new KR(r,n.cacheSizeBytes,t==null?void 0:t.forceOwnership)}),Promise.resolve()}function ex(s,t,n){if((s=Wn(s,_r))._firestoreClient||s._terminated)throw new nt(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(s._componentsProvider||s._getSettings().localCache)throw new nt(K.FAILED_PRECONDITION,"SDK cache is already specified.");s._componentsProvider={_online:t,_offline:n},eA(s)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jn{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Jn(Be.fromBase64String(t))}catch(n){throw new nt(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Jn(Be.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}toJSON(){return{type:Jn._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(t){if(wu(t,Jn._jsonSchema))return Jn.fromBase64String(t.bytes)}}Jn._jsonSchemaVersion="firestore/bytes/1.0",Jn._jsonSchema={type:Ue("string",Jn._jsonSchemaVersion),bytes:Ue("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ou{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new nt(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ee(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ef{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ji{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new nt(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new nt(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}_compareTo(t){return It(this._lat,t._lat)||It(this._long,t._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:ji._jsonSchemaVersion}}static fromJSON(t){if(wu(t,ji._jsonSchema))return new ji(t.latitude,t.longitude)}}ji._jsonSchemaVersion="firestore/geoPoint/1.0",ji._jsonSchema={type:Ue("string",ji._jsonSchemaVersion),latitude:Ue("number"),longitude:Ue("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(t){this._values=(t||[]).map((n=>n))}toArray(){return this._values.map((t=>t))}isEqual(t){return(function(r,o){if(r.length!==o.length)return!1;for(let u=0;u<r.length;++u)if(r[u]!==o[u])return!1;return!0})(this._values,t._values)}toJSON(){return{type:Bi._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(t){if(wu(t,Bi._jsonSchema)){if(Array.isArray(t.vectorValues)&&t.vectorValues.every((n=>typeof n=="number")))return new Bi(t.vectorValues);throw new nt(K.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Bi._jsonSchemaVersion="firestore/vectorValue/1.0",Bi._jsonSchema={type:Ue("string",Bi._jsonSchemaVersion),vectorValues:Ue("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nx=/^__.*__$/;class ix{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return this.fieldMask!==null?new Er(t,this.data,this.fieldMask,n,this.fieldTransforms):new jo(t,this.data,n,this.fieldTransforms)}}class nA{constructor(t,n,r){this.data=t,this.fieldMask=n,this.fieldTransforms=r}toMutation(t,n){return new Er(t,this.data,this.fieldMask,n,this.fieldTransforms)}}function iA(s){switch(s){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ft(40011,{Ac:s})}}class hp{constructor(t,n,r,o,u,h){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=o,u===void 0&&this.Rc(),this.fieldTransforms=u||[],this.fieldMask=h||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(t){return new hp({...this.settings,...t},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.gc(t),r}yc(t){var o;const n=(o=this.path)==null?void 0:o.child(t),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(t){return this.Vc({path:void 0,fc:!0})}Sc(t){return $h(t,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(t){return this.fieldMask.find((n=>t.isPrefixOf(n)))!==void 0||this.fieldTransforms.find((n=>t.isPrefixOf(n.field)))!==void 0}Rc(){if(this.path)for(let t=0;t<this.path.length;t++)this.gc(this.path.get(t))}gc(t){if(t.length===0)throw this.Sc("Document fields must not be empty");if(iA(this.Ac)&&nx.test(t))throw this.Sc('Document fields cannot begin and end with "__"')}}class rx{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||pf(t)}Cc(t,n,r,o=!1){return new hp({Ac:t,methodName:n,Dc:r,path:Ee.emptyPath(),fc:!1,bc:o},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Tf(s){const t=s._freezeSettings(),n=pf(s._databaseId);return new rx(s._databaseId,!!t.ignoreUndefinedProperties,n)}function rA(s,t,n,r,o,u={}){const h=s.Cc(u.merge||u.mergeFields?2:0,t,n,o);dp("Data must be an object, but it was:",h,r);const m=oA(r,h);let g,y;if(u.merge)g=new Sn(h.fieldMask),y=h.fieldTransforms;else if(u.mergeFields){const E=[];for(const A of u.mergeFields){const S=wg(t,A,n);if(!h.contains(S))throw new nt(K.INVALID_ARGUMENT,`Field '${S}' is specified in your field mask but missing from your input data.`);uA(E,S)||E.push(S)}g=new Sn(E),y=h.fieldTransforms.filter((A=>g.covers(A.field)))}else g=null,y=h.fieldTransforms;return new ix(new un(m),g,y)}class Af extends Ef{_toFieldTransform(t){if(t.Ac!==2)throw t.Ac===1?t.Sc(`${this._methodName}() can only appear at the top level of your update data`):t.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return t.fieldMask.push(t.path),null}isEqual(t){return t instanceof Af}}class fp extends Ef{_toFieldTransform(t){return new YT(t.path,new No)}isEqual(t){return t instanceof fp}}function sA(s,t,n,r){const o=s.Cc(1,t,n);dp("Data must be an object, but it was:",o,r);const u=[],h=un.empty();gs(r,((g,y)=>{const E=mp(t,g,n);y=ei(y);const A=o.yc(E);if(y instanceof Af)u.push(E);else{const S=Pu(y,A);S!=null&&(u.push(E),h.set(E,S))}}));const m=new Sn(u);return new nA(h,m,o.fieldTransforms)}function aA(s,t,n,r,o,u){const h=s.Cc(1,t,n),m=[wg(t,r,n)],g=[o];if(u.length%2!=0)throw new nt(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let S=0;S<u.length;S+=2)m.push(wg(t,u[S])),g.push(u[S+1]);const y=[],E=un.empty();for(let S=m.length-1;S>=0;--S)if(!uA(y,m[S])){const U=m[S];let W=g[S];W=ei(W);const Q=h.yc(U);if(W instanceof Af)y.push(U);else{const X=Pu(W,Q);X!=null&&(y.push(U),E.set(U,X))}}const A=new Sn(y);return new nA(E,A,h.fieldTransforms)}function sx(s,t,n,r=!1){return Pu(n,s.Cc(r?4:3,t))}function Pu(s,t){if(lA(s=ei(s)))return dp("Unsupported field value:",t,s),oA(s,t);if(s instanceof Ef)return(function(r,o){if(!iA(o.Ac))throw o.Sc(`${r._methodName}() can only be used with update() and set()`);if(!o.path)throw o.Sc(`${r._methodName}() is not currently supported inside arrays`);const u=r._toFieldTransform(o);u&&o.fieldTransforms.push(u)})(s,t),null;if(s===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),s instanceof Array){if(t.settings.fc&&t.Ac!==4)throw t.Sc("Nested arrays are not supported");return(function(r,o){const u=[];let h=0;for(const m of r){let g=Pu(m,o.wc(h));g==null&&(g={nullValue:"NULL_VALUE"}),u.push(g),h++}return{arrayValue:{values:u}}})(s,t)}return(function(r,o){if((r=ei(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Y2(o.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const u=Yt.fromDate(r);return{timestampValue:Po(o.serializer,u)}}if(r instanceof Yt){const u=new Yt(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Po(o.serializer,u)}}if(r instanceof ji)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Jn)return{bytesValue:e1(o.serializer,r._byteString)};if(r instanceof je){const u=o.databaseId,h=r.firestore._databaseId;if(!h.isEqual(u))throw o.Sc(`Document reference is for database ${h.projectId}/${h.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:Yg(r.firestore._databaseId||o.databaseId,r._key.path)}}if(r instanceof Bi)return(function(h,m){return{mapValue:{fields:{[jg]:{stringValue:Bg},[xo]:{arrayValue:{values:h.toArray().map((y=>{if(typeof y!="number")throw m.Sc("VectorValues must only contain numeric values.");return Fg(m.serializer,y)}))}}}}}})(r,o);throw o.Sc(`Unsupported field value: ${Wh(r)}`)})(s,t)}function oA(s,t){const n={};return ET(s)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):gs(s,((r,o)=>{const u=Pu(o,t.mc(r));u!=null&&(n[r]=u)})),{mapValue:{fields:n}}}function lA(s){return!(typeof s!="object"||s===null||s instanceof Array||s instanceof Date||s instanceof Yt||s instanceof ji||s instanceof Jn||s instanceof je||s instanceof Ef||s instanceof Bi)}function dp(s,t,n){if(!lA(n)||!sT(n)){const r=Wh(n);throw r==="an object"?t.Sc(s+" a custom object"):t.Sc(s+" "+r)}}function wg(s,t,n){if((t=ei(t))instanceof Ou)return t._internalPath;if(typeof t=="string")return mp(s,t);throw $h("Field path arguments must be of type string or ",s,!1,void 0,n)}const ax=new RegExp("[~\\*/\\[\\]]");function mp(s,t,n){if(t.search(ax)>=0)throw $h(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,s,!1,void 0,n);try{return new Ou(...t.split("."))._internalPath}catch{throw $h(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,s,!1,void 0,n)}}function $h(s,t,n,r,o){const u=r&&!r.isEmpty(),h=o!==void 0;let m=`Function ${t}() called with invalid data`;n&&(m+=" (via `toFirestore()`)"),m+=". ";let g="";return(u||h)&&(g+=" (found",u&&(g+=` in field ${r}`),h&&(g+=` in document ${o}`),g+=")"),new nt(K.INVALID_ARGUMENT,m+s+g)}function uA(s,t){return s.some((n=>n.isEqual(t)))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA{constructor(t,n,r,o,u){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=o,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new je(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new ox(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(bf("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class ox extends cA{data(){return super.data()}}function bf(s,t){return typeof t=="string"?mp(s,t):t instanceof Ou?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(s){if(s.limitType==="L"&&s.explicitOrderBy.length===0)throw new nt(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class gp{}class fA extends gp{}function va(s,t,...n){let r=[];t instanceof gp&&r.push(t),r=r.concat(n),(function(u){const h=u.filter((g=>g instanceof yp)).length,m=u.filter((g=>g instanceof Sf)).length;if(h>1||h>0&&m>0)throw new nt(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")})(r);for(const o of r)s=o._apply(s);return s}class Sf extends fA{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new Sf(t,n,r)}_apply(t){const n=this._parse(t);return dA(t._query,n),new ps(t.firestore,t.converter,hg(t._query,n))}_parse(t){const n=Tf(t.firestore);return(function(u,h,m,g,y,E,A){let S;if(y.isKeyField()){if(E==="array-contains"||E==="array-contains-any")throw new nt(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${E}' queries on documentId().`);if(E==="in"||E==="not-in"){DE(A,E);const W=[];for(const Q of A)W.push(xE(g,u,Q));S={arrayValue:{values:W}}}else S=xE(g,u,A)}else E!=="in"&&E!=="not-in"&&E!=="array-contains-any"||DE(A,E),S=sx(m,h,A,E==="in"||E==="not-in");return Ft.create(y,E,S)})(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function pp(s,t,n){const r=t,o=bf("where",s);return Sf._create(o,r,n)}class yp extends gp{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new yp(t,n)}_parse(t){const n=this._queryConstraints.map((r=>r._parse(t))).filter((r=>r.getFilters().length>0));return n.length===1?n[0]:re.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:((function(o,u){let h=o;const m=u.getFlattenedFilters();for(const g of m)dA(h,g),h=hg(h,g)})(t._query,n),new ps(t.firestore,t.converter,hg(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class _p extends fA{constructor(t,n){super(),this._field=t,this._direction=n,this.type="orderBy"}static _create(t,n){return new _p(t,n)}_apply(t){const n=(function(o,u,h){if(o.startAt!==null)throw new nt(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(o.endAt!==null)throw new nt(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Au(u,h)})(t._query,this._field,this._direction);return new ps(t.firestore,t.converter,(function(o,u){const h=o.explicitOrderBy.concat([u]);return new Uo(o.path,o.collectionGroup,h,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)})(t._query,n))}}function wf(s,t="asc"){const n=t,r=bf("orderBy",s);return _p._create(r,n)}function xE(s,t,n){if(typeof(n=ei(n))=="string"){if(n==="")throw new nt(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!kT(t)&&n.indexOf("/")!==-1)throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(Wt.fromString(n));if(!lt.isDocumentKey(r))throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Eu(s,new lt(r))}if(n instanceof je)return Eu(s,n._key);throw new nt(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Wh(n)}.`)}function DE(s,t){if(!Array.isArray(s)||s.length===0)throw new nt(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function dA(s,t){const n=(function(o,u){for(const h of o)for(const m of h.getFlattenedFilters())if(u.indexOf(m.op)>=0)return m.op;return null})(s.filters,(function(o){switch(o){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}})(t.op));if(n!==null)throw n===t.op?new nt(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new nt(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class lx{convertValue(t,n="none"){switch(cs(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ye(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(yr(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ft(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return gs(t,((o,u)=>{r[o]=this.convertValue(u,n)})),r}convertVectorValue(t){var r,o,u;const n=(u=(o=(r=t.fields)==null?void 0:r[xo].arrayValue)==null?void 0:o.values)==null?void 0:u.map((h=>ye(h.doubleValue)));return new Bi(n)}convertGeoPoint(t){return new ji(ye(t.latitude),ye(t.longitude))}convertArray(t,n){return(t.values||[]).map((r=>this.convertValue(r,n)))}convertServerTimestamp(t,n){switch(n){case"previous":const r=af(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(_u(t));default:return null}}convertTimestamp(t){const n=pr(t);return new Yt(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=Wt.fromString(t);pt(h1(r),9688,{name:t});const o=new ha(r.get(1),r.get(3)),u=new lt(r.popFirst(5));return o.isEqual(n)||mn(`Document ${u} contains a document reference within a different database (${o.projectId}/${o.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(s,t,n){let r;return r=s?n&&(n.merge||n.mergeFields)?s.toFirestore(t,n):s.toFirestore(t):t,r}class tu{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class oa extends cA{constructor(t,n,r,o,u,h){super(t,n,r,o,h),this._firestore=t,this._firestoreImpl=t,this.metadata=u}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new Vh(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(bf("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(K.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t=this._document,n={};return n.type=oa._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!t||!t.isValidDocument()||!t.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(t.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}oa._jsonSchemaVersion="firestore/documentSnapshot/1.0",oa._jsonSchema={type:Ue("string",oa._jsonSchemaVersion),bundleSource:Ue("string","DocumentSnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class Vh extends oa{data(t={}){return super.data(t)}}class la{constructor(t,n,r,o){this._firestore=t,this._userDataWriter=n,this._snapshot=o,this.metadata=new tu(o.hasPendingWrites,o.fromCache),this.query=r}get docs(){const t=[];return this.forEach((n=>t.push(n))),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach((r=>{t.call(n,new Vh(this._firestore,this._userDataWriter,r.key,r,new tu(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))}))}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new nt(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=(function(o,u){if(o._snapshot.oldDocs.isEmpty()){let h=0;return o._snapshot.docChanges.map((m=>{const g=new Vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);return m.doc,{type:"added",doc:g,oldIndex:-1,newIndex:h++}}))}{let h=o._snapshot.oldDocs;return o._snapshot.docChanges.filter((m=>u||m.type!==3)).map((m=>{const g=new Vh(o._firestore,o._userDataWriter,m.doc.key,m.doc,new tu(o._snapshot.mutatedKeys.has(m.doc.key),o._snapshot.fromCache),o.query.converter);let y=-1,E=-1;return m.type!==0&&(y=h.indexOf(m.doc.key),h=h.delete(m.doc.key)),m.type!==1&&(h=h.add(m.doc),E=h.indexOf(m.doc.key)),{type:ux(m.type),doc:g,oldIndex:y,newIndex:E}}))}})(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new nt(K.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const t={};t.type=la._jsonSchemaVersion,t.bundleSource="QuerySnapshot",t.bundleName=Ng.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],o=[];return this.docs.forEach((u=>{u._document!==null&&(n.push(u._document),r.push(this._userDataWriter.convertObjectMap(u._document.data.value.mapValue.fields,"previous")),o.push(u.ref.path))})),t.bundle=(this._firestore,this.query._query,t.bundleName,"NOT SUPPORTED"),t}}function ux(s){switch(s){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ft(61501,{type:s})}}la._jsonSchemaVersion="firestore/querySnapshot/1.0",la._jsonSchema={type:Ue("string",la._jsonSchemaVersion),bundleSource:Ue("string","QuerySnapshot"),bundleName:Ue("string"),bundle:Ue("string")};class vp extends lx{constructor(t){super(),this.firestore=t}convertBytes(t){return new Jn(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new je(this.firestore,null,n)}}function na(s){s=Wn(s,ps);const t=Wn(s.firestore,_r),n=vf(t),r=new vp(t);return hA(s._query),JR(n,s._query).then((o=>new la(t,r,s,o)))}function zu(s,t,n,...r){s=Wn(s,je);const o=Wn(s.firestore,_r),u=Tf(o);let h;return h=typeof(t=ei(t))=="string"||t instanceof Ou?aA(u,"updateDoc",s._key,t,n,r):sA(u,"updateDoc",s._key,t),Rf(o,[h.toMutation(s._key,Ye.exists(!0))])}function cx(s){return Rf(Wn(s.firestore,_r),[new Du(s._key,Ye.none())])}function ku(s,t){const n=Wn(s.firestore,_r),r=ni(s),o=mA(s.converter,t);return Rf(n,[rA(Tf(s.firestore),"addDoc",r._key,o,s.converter!==null,{}).toMutation(r._key,Ye.exists(!1))]).then((()=>r))}function If(s,...t){var g,y,E;s=ei(s);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof t[r]!="object"||RE(t[r])||(n=t[r++]);const o={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(RE(t[r])){const A=t[r];t[r]=(g=A.next)==null?void 0:g.bind(A),t[r+1]=(y=A.error)==null?void 0:y.bind(A),t[r+2]=(E=A.complete)==null?void 0:E.bind(A)}let u,h,m;if(s instanceof je)h=Wn(s.firestore,_r),m=lf(s._key.path),u={next:A=>{t[r]&&t[r](hx(h,s,A))},error:t[r+1],complete:t[r+2]};else{const A=Wn(s,ps);h=Wn(A.firestore,_r),m=A._query;const S=new vp(h);u={next:U=>{t[r]&&t[r](new la(h,S,A,U))},error:t[r+1],complete:t[r+2]},hA(s._query)}return(function(S,U,W,Q){const X=new J1(Q),st=new B1(U,X,W);return S.asyncQueue.enqueueAndForget((async()=>U1(await Sg(S),st))),()=>{X.Nu(),S.asyncQueue.enqueueAndForget((async()=>j1(await Sg(S),st)))}})(vf(h),m,o,u)}function Rf(s,t){return(function(r,o){const u=new mr;return r.asyncQueue.enqueueAndForget((async()=>UR(await ZR(r),o,u))),u.promise})(vf(s),t)}function hx(s,t,n){const r=n.docs.get(t._key),o=new vp(s);return new oa(s,o,t._key,r,new tu(n.hasPendingWrites,n.fromCache),t.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fx{constructor(t,n){this._firestore=t,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Tf(t)}set(t,n,r){this._verifyNotCommitted();const o=qm(t,this._firestore),u=mA(o.converter,n,r),h=rA(this._dataReader,"WriteBatch.set",o._key,u,o.converter!==null,r);return this._mutations.push(h.toMutation(o._key,Ye.none())),this}update(t,n,r,...o){this._verifyNotCommitted();const u=qm(t,this._firestore);let h;return h=typeof(n=ei(n))=="string"||n instanceof Ou?aA(this._dataReader,"WriteBatch.update",u._key,n,r,o):sA(this._dataReader,"WriteBatch.update",u._key,n),this._mutations.push(h.toMutation(u._key,Ye.exists(!0))),this}delete(t){this._verifyNotCommitted();const n=qm(t,this._firestore);return this._mutations=this._mutations.concat(new Du(n._key,Ye.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new nt(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function qm(s,t){if((s=ei(s)).firestore!==t)throw new nt(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return s}function qi(){return new fp("serverTimestamp")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lu(s){return vf(s=Wn(s,_r)),new fx(s,(t=>Rf(s,t)))}(function(t,n=!0){(function(o){Lo=o})(Sw),zh(new cu("firestore",((r,{instanceIdentifier:o,options:u})=>{const h=r.getProvider("app").getImmediate(),m=new _r(new jw(r.getProvider("auth-internal")),new Fw(h,r.getProvider("app-check-internal")),(function(y,E){if(!Object.prototype.hasOwnProperty.apply(y.options,["projectId"]))throw new nt(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ha(y.options.projectId,E)})(h,o),h);return u={useFetchStreams:n,...u},m._setSettings(u),m}),"PUBLIC").setMultipleInstances(!0)),To(l0,u0,t),To(l0,u0,"esm2020")})();const dx={apiKey:"AIzaSyDFQRBNsRfpgeEb7-IBhD09Xc5gR9NqRn8",authDomain:"dashboard-469600.firebaseapp.com",projectId:"dashboard-469600",storageBucket:"dashboard-469600.firebasestorage.app",messagingSenderId:"616885689767",appId:"1:616885689767:web:7ba844cf049c0c3f4fea82"},mx=QE(dx),Kt=WR(mx);tx(Kt).catch(s=>{s.code==="failed-precondition"?console.warn("Offline persistence failed: multiple tabs open"):s.code==="unimplemented"?console.warn("Offline persistence not supported by browser"):console.warn("Error enabling offline persistence:",s)});const gx=()=>{const[s,t]=gt.useState([]),[n,r]=gt.useState(!0),[o,u]=gt.useState(null);return gt.useEffect(()=>{const h=cn(Kt,"tasks"),m=va(h,wf("order","asc")),g=If(m,y=>{const E=y.docs.map(A=>{const S=A.data();return{id:A.id,...S,createdAt:S.createdAt instanceof Yt?S.createdAt.toDate():new Date,updatedAt:S.updatedAt instanceof Yt?S.updatedAt.toDate():new Date}});t(E),r(!1)},y=>{console.error("Error fetching tasks:",y),u(y),r(!1)});return()=>g()},[]),{tasks:s,loading:n,error:o}},px=()=>{const[s,t]=gt.useState([]),[n,r]=gt.useState(!0),[o,u]=gt.useState(null);return gt.useEffect(()=>{const h=cn(Kt,"concerns"),m=va(h,wf("createdAt","desc")),g=If(m,y=>{const E=y.docs.map(A=>{const S=A.data();return{id:A.id,...S,createdAt:S.createdAt instanceof Yt?S.createdAt.toDate():new Date,updatedAt:S.updatedAt instanceof Yt?S.updatedAt.toDate():new Date}});t(E),r(!1)},y=>{console.error("Error fetching concerns:",y),u(y),r(!1)});return()=>g()},[]),{concerns:s,loading:n,error:o}},yx=s=>{const[t,n]=gt.useState([]),[r,o]=gt.useState(!0),[u,h]=gt.useState(null);return gt.useEffect(()=>{if(!s){n([]),o(!1);return}const m=cn(Kt,"tasks",s,"steps"),g=va(m,wf("order","asc")),y=If(g,E=>{const A=E.docs.map(S=>({id:S.id,...S.data()}));n(A),o(!1)},E=>{console.error("Error fetching steps:",E),h(E),o(!1)});return()=>y()},[s]),{steps:t,loading:r,error:u}},_x=(s,t)=>{const[n,r]=gt.useState([]),[o,u]=gt.useState(!0),[h,m]=gt.useState(null);return gt.useEffect(()=>{if(!s||!t){r([]),u(!1);return}const g=cn(Kt,"tasks",s,"steps",t,"memos"),y=va(g,wf("timestamp","asc")),E=If(y,A=>{const S=A.docs.map(U=>({id:U.id,...U.data()}));r(S),u(!1)},A=>{console.error("Error fetching memos:",A),m(A),u(!1)});return()=>E()},[s,t]),{memos:n,loading:o,error:h}},vx=async s=>{try{const t=cn(Kt,"tasks");return(await ku(t,{...s,createdAt:qi(),updatedAt:qi()})).id}catch(t){throw console.error("Error adding task:",t),t}},Fm=async(s,t)=>{try{const n=ni(Kt,"tasks",s),{id:r,createdAt:o,updatedAt:u,...h}=t;await zu(n,{...h,updatedAt:qi()})}catch(n){throw console.error("Error updating task:",n),n}},Ex=async s=>{try{const t=Lu(Kt),n=ni(Kt,"tasks",s);t.delete(n);const r=va(cn(Kt,"tasks"),pp("parentTaskId","==",s)),o=await na(r);for(const h of o.docs){t.delete(h.ref);const m=await na(cn(Kt,"tasks",h.id,"steps"));for(const g of m.docs)t.delete(g.ref),(await na(cn(Kt,"tasks",h.id,"steps",g.id,"memos"))).forEach(E=>{t.delete(E.ref)})}const u=await na(cn(Kt,"tasks",s,"steps"));for(const h of u.docs)t.delete(h.ref),(await na(cn(Kt,"tasks",s,"steps",h.id,"memos"))).forEach(g=>{t.delete(g.ref)});await t.commit()}catch(t){throw console.error("Error deleting task:",t),t}},Tx=async s=>{try{const t=cn(Kt,"concerns");return(await ku(t,{...s,createdAt:qi(),updatedAt:qi()})).id}catch(t){throw console.error("Error adding concern:",t),t}},Ax=async(s,t)=>{try{const n=ni(Kt,"concerns",s),{id:r,createdAt:o,updatedAt:u,...h}=t;await zu(n,{...h,updatedAt:qi()})}catch(n){throw console.error("Error updating concern:",n),n}},bx=async s=>{try{const t=Lu(Kt),n=ni(Kt,"concerns",s);t.delete(n);const r=va(cn(Kt,"tasks"),pp("relatedConcernId","==",s));(await na(r)).forEach(u=>{t.update(u.ref,{relatedConcernId:null})}),await t.commit()}catch(t){throw console.error("Error deleting concern:",t),t}},Sx=async(s,t)=>{try{const n=cn(Kt,"tasks",s,"steps");return(await ku(n,t)).id}catch(n){throw console.error("Error adding step:",n),n}},wx=async(s,t,n)=>{try{const r=ni(Kt,"tasks",s,"steps",t),{id:o,...u}=n;await zu(r,u)}catch(r){throw console.error("Error updating step:",r),r}},Ix=async(s,t,n)=>{try{const r=cn(Kt,"tasks",s,"steps",t,"memos");return(await ku(r,n)).id}catch(r){throw console.error("Error adding memo:",r),r}},Rx=async(s,t,n,r)=>{try{const o=ni(Kt,"tasks",s,"steps",t,"memos",n),{id:u,...h}=r;await zu(o,{...h,timestamp:new Date().toISOString()})}catch(o){throw console.error("Error updating memo:",o),o}},xx=async(s,t,n)=>{try{const r=ni(Kt,"tasks",s,"steps",t,"memos",n);await cx(r)}catch(r){throw console.error("Error deleting memo:",r),r}},Dx=async(s,t)=>{try{const n=Lu(Kt);t.forEach((r,o)=>{const u=ni(Kt,"tasks",s,"steps",r.id);n.update(u,{order:o})}),await n.commit()}catch(n){throw console.error("Error reordering steps:",n),n}},Cx=async(s,t)=>{try{const n=Lu(Kt);t.forEach((r,o)=>{const u=ni(Kt,"tasks",r.id);n.update(u,{order:o})}),await n.commit()}catch(n){throw console.error("Error reordering tasks:",n),n}},Vx=async s=>{try{const t=Lu(Kt),n=cn(Kt,"tasks"),r=await ku(n,{parentTaskId:null,relatedConcernId:s.id,title:`[ ] ${s.title}`,description:s.resolutionAction,category:fr.ToDo,status:xe.Pending,progressPercent:0,progressLog:[{timestamp:new Date().toISOString(),log:`'${s.title}'   .`}],order:0,createdAt:qi(),updatedAt:qi()}),o=ni(Kt,"concerns",s.id);return t.update(o,{status:Eo.SolutionDerived,updatedAt:qi()}),await t.commit(),{id:r.id,parentTaskId:null,relatedConcernId:s.id,title:`[ ] ${s.title}`,description:s.resolutionAction,category:fr.ToDo,status:xe.Pending,progressPercent:0,progressLog:[{timestamp:new Date().toISOString(),log:`'${s.title}'   .`}],order:0,createdAt:new Date,updatedAt:new Date}}catch(t){throw console.error("Error deriving task from concern:",t),t}},Nx=async(s,t)=>{try{const n=ni(Kt,"concerns",s),r=await na(va(cn(Kt,"concerns"),pp("__name__","==",s))).then(u=>{var h;return(h=u.docs[0])==null?void 0:h.data()});if(!r)throw new Error("Concern not found");const o=[...r.analysisLog||[],{timestamp:new Date().toISOString(),log:t}];await zu(n,{analysisLog:o,updatedAt:qi()})}catch(n){throw console.error("Error adding analysis log:",n),n}},Mx=()=>{const{tasks:s}=gx(),{concerns:t}=px(),[n,r]=gt.useState(null),[o,u]=gt.useState(null),{steps:h}=yx(n||""),{memos:m}=_x(n||"",o||""),[g,y]=gt.useState([]);gt.useEffect(()=>{(async()=>{const x=[];for(const P of s){const w=h;P.id===n&&x.push(...w)}y(x)})()},[s,h,n]);const E=gt.useCallback(R=>{const x=s.find(wt=>wt.id===R);if(!x)return;let P=0,w=x.status;if(x.parentTaskId){const wt=h.filter(Ot=>Ot.parentTaskId===R);if(wt.length>0){const Ot=wt.filter(q=>q.status===nn.Completed).length;P=Math.round(Ot/wt.length*100),Ot>0&&P<100?w=xe.InProgress:Ot===0&&(w=xe.Pending)}}else{const wt=s.filter(Ot=>Ot.parentTaskId===R);if(wt.length>0){const Ot=wt.reduce((q,tt)=>q+tt.progressPercent,0);P=Math.round(Ot/wt.length)}}if(Fm(R,{...x,progressPercent:P,status:w}),x.parentTaskId){const wt=s.find(Ot=>Ot.id===x.parentTaskId);if(wt){const Ot=s.filter(ct=>ct.parentTaskId===wt.id),q=Ot.reduce((ct,Pt)=>ct+Pt.progressPercent,0),tt=Math.round(q/Ot.length);Fm(wt.id,{...wt,progressPercent:tt})}}},[s,h]);gt.useEffect(()=>{[...new Set(h.map(x=>x.parentTaskId))].forEach(x=>{x&&E(x)})},[h,E]);const A=gt.useCallback((R,x)=>{n&&wx(n,R,{status:x})},[n]),S=gt.useCallback((R,x)=>{const P=h.filter(w=>w.parentTaskId===R);Sx(R,{id:`s${Date.now()}`,parentTaskId:R,title:x,status:nn.Pending,order:P.length})},[h]),U=gt.useCallback((R,x)=>{Nx(R,x)},[]),W=gt.useCallback(async R=>await Vx(R),[]),Q=gt.useCallback((R,x)=>{const P=s.find(w=>w.id===R);P&&(Fm(R,{...P,...x}),E(R),P.parentTaskId&&E(P.parentTaskId))},[s,E]),X=gt.useCallback((R,x)=>{const P=t.find(w=>w.id===R);P&&Ax(R,{...P,...x})},[t]),st=gt.useCallback(R=>{const x=s.filter(w=>w.parentTaskId===R.parentTaskId),P={...R,relatedConcernId:null,progressPercent:0,status:xe.Pending,progressLog:[{timestamp:new Date().toISOString(),log:" ."}],order:x.length};vx(P)},[s]),rt=gt.useCallback(R=>{const x={...R,status:Eo.Analyzing,analysisLog:[{timestamp:new Date().toISOString(),log:" ."}]};Tx(x)},[]),at=gt.useCallback(R=>{Ex(R)},[]),At=gt.useCallback(R=>{bx(R)},[]),St=gt.useCallback((R,x,P)=>{if(!n)return;const w=h.filter(q=>q.parentTaskId===R).sort((q,tt)=>q.status===nn.Completed&&tt.status!==nn.Completed?1:q.status!==nn.Completed&&tt.status===nn.Completed?-1:q.order-tt.order);h.filter(q=>q.parentTaskId!==R);const[wt]=w.splice(x,1);w.splice(P,0,wt);const Ot=w.map((q,tt)=>({...q,order:tt}));Dx(R,Ot)},[h,n]),yt=gt.useCallback((R,x,P)=>{const w=s.filter(q=>q.parentTaskId===R).sort((q,tt)=>q.status===xe.Completed&&tt.status!==xe.Completed?1:q.status!==xe.Completed&&tt.status===xe.Completed?-1:q.order-tt.order);s.filter(q=>q.parentTaskId!==R);const[wt]=w.splice(x,1);w.splice(P,0,wt);const Ot=w.map((q,tt)=>({...q,order:tt}));Cx(R,Ot)},[s]),D=gt.useCallback((R,x)=>{if(!n)return;const P={parentStepId:R,content:x,timestamp:new Date().toISOString()};Ix(n,R,P)},[n]),I=gt.useCallback((R,x)=>{!n||!o||Rx(n,o,R,{content:x,timestamp:new Date().toISOString()})},[n,o]),C=gt.useCallback(R=>{!n||!o||xx(n,o,R)},[n,o]);return{tasks:s,concerns:t,steps:h,memos:m,updateStep:A,addStep:S,addTask:st,addConcern:rt,addAnalysisLog:U,deriveTaskFromConcern:W,updateTask:Q,updateConcern:X,deleteTask:at,deleteConcern:At,reorderSteps:St,reorderSubTasks:yt,addMemo:D,updateMemo:I,deleteMemo:C,setSelectedTaskId:r,setSelectedStepId:u}},Ox=s=>{switch(s){case xe.Completed:case Eo.Resolved:return"bg-green-100 text-green-800";case xe.InProgress:case Eo.Analyzing:return"bg-blue-100 text-blue-800";case xe.Pending:case Eo.SolutionDerived:return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},CE=({item:s,onSelect:t})=>{const n="progressPercent"in s;return N.jsxs("div",{onClick:()=>t(s),className:"bg-white rounded-lg shadow-md p-4 mb-4 hover:shadow-xl hover:-translate-y-1 transition-all duration-200 cursor-pointer",children:[N.jsxs("div",{className:"flex justify-between items-start",children:[N.jsx("h3",{className:"font-bold text-gray-800 mb-2 pr-2",children:s.title}),N.jsx("span",{className:`text-xs font-semibold px-2.5 py-0.5 rounded-full whitespace-nowrap ${Ox(s.status)}`,children:s.status})]}),N.jsx("p",{className:"text-sm text-gray-600 truncate",children:s.description}),n&&N.jsx("div",{className:"mt-4",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("span",{className:"text-sm font-medium text-gray-700",children:""}),N.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s.progressPercent,"%"]})]})})]})},Hm=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 10h16M4 14h16M4 18h16"})}),Gm=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),Qm=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-6 9l2 2 4-4"})}),Px=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.79 4 4s-1.79 4-4 4c-1.742 0-3.223-.835-3.772-2M12 6V4m0 16v-2m8-8h2M4 12H2m15.364 6.364l1.414 1.414M4.222 4.222l1.414 1.414m12.728 0l-1.414 1.414M5.636 18.364l1.414-1.414"})}),Ig=()=>N.jsx("svg",{className:"h-6 w-6",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor","aria-hidden":"true",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M6 18L18 6M6 6l12 12"})}),vo=()=>N.jsx("svg",{className:"h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),zx=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})}),VE=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.5L15.232 5.232z"})}),Km=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),NE=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),kx=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),Lx=()=>N.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:N.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),Ux=({item:s,allTasks:t,allSteps:n,allMemos:r,onClose:o,onUpdateStep:u,onAddStep:h,onAddLog:m,onDeriveTask:g,onUpdateTaskStatus:y,onUpdateTask:E,onUpdateConcern:A,onDeleteItem:S,onSelectItem:U,onAddSubTask:W,onReorderSubTasks:Q,onReorderSteps:X,onAddMemo:st,onUpdateMemo:rt,onDeleteMemo:at})=>{const[At,St]=gt.useState(""),[yt,D]=gt.useState(""),[I,C]=gt.useState(""),[R,x]=gt.useState(!1),[P,w]=gt.useState(null),[wt,Ot]=gt.useState(null),[q,tt]=gt.useState(""),[ct,Pt]=gt.useState(null),[kt,O]=gt.useState({title:s.title,description:s.description,resolutionAction:"resolutionAction"in s?s.resolutionAction:""});gt.useEffect(()=>{x(!1),O({title:s.title,description:s.description,resolutionAction:"resolutionAction"in s?s.resolutionAction:""})},[s]);const J=fe=>{const{name:bt,value:dt}=fe.target;O(Nt=>({...Nt,[bt]:dt}))},ot=()=>{"progressPercent"in s?E(s.id,{title:kt.title,description:kt.description}):A(s.id,{title:kt.title,description:kt.description,resolutionAction:kt.resolutionAction}),x(!1)},ut=()=>{window.confirm(`'${s.title}'   ?     .`)&&S(s)},Et="progressPercent"in s,xt=Et&&s.parentTaskId===null,Lt=Et&&s.parentTaskId!==null,ve=!Et,he=fe=>{fe.preventDefault(),At.trim()&&Lt&&(h(s.id,At.trim()),St(""))},Hi=fe=>{fe.preventDefault(),yt.trim()&&xt&&(W(s.id,yt.trim()),D(""))},Tr=fe=>{fe.preventDefault(),I.trim()&&ve&&(m(s.id,I.trim()),C(""))},Gi=(fe,bt,dt)=>({handleDragStart:(Nt,pn)=>{Nt.dataTransfer.setData("application/json",JSON.stringify({index:pn,parentId:bt,type:fe})),Nt.currentTarget.style.opacity="0.4"},handleDragEnter:(Nt,pn)=>{Nt.preventDefault(),w(pn)},handleDragLeave:Nt=>{Nt.preventDefault(),w(null)},handleDragOver:Nt=>{Nt.preventDefault()},handleDrop:(Nt,pn)=>{Nt.preventDefault(),w(null);try{const te=JSON.parse(Nt.dataTransfer.getData("application/json"));if(te.type!==fe||te.parentId!==bt)return;const{index:De}=te;De!==pn&&dt(bt,De,pn)}catch(te){console.error("Failed to parse drag-and-drop data:",te)}},handleDragEnd:Nt=>{Nt.currentTarget.style.opacity="1",w(null)}}),wn=Gi("subtask",s.id,Q),Xe=Gi("step",s.id,X),ys=()=>{if(!xt)return null;const fe=t.filter(bt=>bt.parentTaskId===s.id).sort((bt,dt)=>bt.status===xe.Completed&&dt.status!==xe.Completed?1:bt.status!==xe.Completed&&dt.status===xe.Completed?-1:bt.order-dt.order);return N.jsxs("div",{className:"mt-4",children:[N.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"  (Level 2)"}),fe.length>0?N.jsx("ul",{className:"space-y-2",children:fe.map((bt,dt)=>N.jsxs("li",{className:`p-3 rounded-md flex justify-between items-center group transition-colors ${P===dt?"bg-indigo-100":"bg-gray-50"}`,draggable:!0,onDragStart:Nt=>wn.handleDragStart(Nt,dt),onDragEnter:Nt=>wn.handleDragEnter(Nt,dt),onDragLeave:wn.handleDragLeave,onDragOver:wn.handleDragOver,onDrop:Nt=>wn.handleDrop(Nt,dt),onDragEnd:wn.handleDragEnd,children:[N.jsxs("div",{className:"flex items-center flex-1",children:[N.jsx("span",{className:"cursor-grab mr-2",children:N.jsx(NE,{})}),N.jsx("div",{className:"flex-1 cursor-pointer",onClick:()=>U(bt),children:N.jsx("p",{className:`font-medium text-gray-800 group-hover:text-indigo-600 transition ${bt.status===xe.Completed?"line-through text-gray-400":""}`,children:bt.title})})]}),N.jsxs("div",{className:"flex items-center",children:[N.jsxs("span",{className:"text-sm font-medium text-gray-700 mr-4",children:[bt.progressPercent,"%"]}),N.jsx("button",{onClick:()=>{window.confirm(`'${bt.title}'    ?`)&&S(bt)},className:"p-1 text-gray-400 hover:text-red-600 rounded-full hover:bg-gray-200 opacity-0 group-hover:opacity-100 transition","aria-label":`Delete task ${bt.title}`,children:N.jsx(Km,{})})]})]},bt.id))}):N.jsx("p",{className:"text-sm text-gray-500",children:"  ."}),N.jsxs("form",{onSubmit:Hi,className:"flex items-center space-x-2 mt-3",children:[N.jsx("input",{type:"text",value:yt,onChange:bt=>D(bt.target.value),className:"flex-grow p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"   ..."}),N.jsx("button",{type:"submit",className:"p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:N.jsx(vo,{})})]})]})},Qi=()=>{if(!Lt)return null;const fe=n.filter(dt=>dt.parentTaskId===s.id).sort((dt,Nt)=>dt.status===nn.Completed&&Nt.status!==nn.Completed?1:dt.status!==nn.Completed&&Nt.status===nn.Completed?-1:dt.order-Nt.order),bt=fe.length>0&&fe.every(dt=>dt.status===nn.Completed);return N.jsxs("div",{className:"mt-4",children:[N.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:"  (Level 3)"}),bt&&s.status!==xe.Completed&&N.jsxs("div",{className:"p-3 bg-green-100 border-l-4 border-green-500 rounded-r-md mb-3",children:[N.jsx("p",{className:"text-green-800 text-sm",children:"   .   '' ."}),N.jsx("button",{onClick:()=>y(s.id,xe.Completed),className:"mt-2 text-sm bg-green-500 text-white font-semibold py-1 px-3 rounded-md hover:bg-green-600 transition",children:"'' "})]}),N.jsx("ul",{className:"space-y-2 mb-3",children:fe.map((dt,Nt)=>{const pn=r.filter(te=>te.parentStepId===dt.id);return N.jsxs("li",{children:[N.jsxs("div",{className:`flex items-center p-2 rounded-md transition-colors ${P===Nt?"bg-indigo-100":"bg-gray-50"}`,draggable:!0,onDragStart:te=>Xe.handleDragStart(te,Nt),onDragEnter:te=>Xe.handleDragEnter(te,Nt),onDragLeave:Xe.handleDragLeave,onDragOver:Xe.handleDragOver,onDrop:te=>Xe.handleDrop(te,Nt),onDragEnd:Xe.handleDragEnd,children:[N.jsx("span",{className:"cursor-grab mr-2",children:N.jsx(NE,{})}),N.jsx("input",{type:"checkbox",className:"h-5 w-5 rounded border-gray-300 text-indigo-600 focus:ring-indigo-500",checked:dt.status===nn.Completed,onChange:()=>u(dt.id,dt.status===nn.Completed?nn.Pending:nn.Completed)}),N.jsx("span",{className:`ml-3 text-gray-700 flex-grow ${dt.status===nn.Completed?"line-through text-gray-400":""}`,children:dt.title}),N.jsxs("button",{onClick:()=>Ot(wt===dt.id?null:dt.id),className:"flex items-center text-gray-500 hover:text-indigo-600 p-1 rounded-full hover:bg-gray-200",children:[N.jsx(kx,{}),N.jsx("span",{className:"text-xs ml-1 font-semibold",children:pn.length})]})]}),wt===dt.id&&N.jsxs("div",{className:"pl-10 pr-2 py-2 bg-gray-50 rounded-b-md",children:[pn.length>0&&N.jsx("ul",{className:"space-y-2 mb-2",children:pn.map(te=>N.jsx("li",{className:"text-sm text-gray-600 group flex items-start",children:(ct==null?void 0:ct.id)===te.id?N.jsxs("div",{className:"flex-grow flex items-center",children:[N.jsx("input",{type:"text",value:ct.content,onChange:De=>Pt({...ct,content:De.target.value}),className:"flex-grow p-1 border border-gray-300 rounded-md"}),N.jsx("button",{onClick:()=>{rt(ct.id,ct.content),Pt(null)},className:"p-1 text-gray-500 hover:text-green-600",children:N.jsx(Lx,{})}),N.jsx("button",{onClick:()=>Pt(null),className:"p-1 text-gray-500 hover:text-gray-800",children:N.jsx(Ig,{})})]}):N.jsxs(N.Fragment,{children:[N.jsxs("p",{className:"flex-grow whitespace-pre-wrap",children:[te.content," ",N.jsxs("span",{className:"text-xs text-gray-400",children:["- ",new Date(te.timestamp).toLocaleDateString()]})]}),N.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition flex-shrink-0",children:[N.jsx("button",{onClick:()=>Pt({id:te.id,content:te.content}),className:"p-1 text-gray-500 hover:text-indigo-600",children:N.jsx(VE,{})}),N.jsx("button",{onClick:()=>{window.confirm("  ?")&&at(te.id)},className:"p-1 text-gray-500 hover:text-red-600",children:N.jsx(Km,{})})]})]})},te.id))}),N.jsxs("form",{onSubmit:te=>{te.preventDefault(),st(dt.id,q),tt("")},className:"flex items-center space-x-2",children:[N.jsx("input",{type:"text",value:q,onChange:te=>tt(te.target.value),className:"flex-grow p-1.5 border border-gray-300 rounded-md text-sm",placeholder:"  ..."}),N.jsx("button",{type:"submit",className:"p-1.5 bg-indigo-500 text-white rounded-md hover:bg-indigo-600",children:N.jsx(vo,{})})]})]})]},dt.id)})}),N.jsxs("form",{onSubmit:he,className:"flex items-center space-x-2",children:[N.jsx("input",{type:"text",value:At,onChange:dt=>St(dt.target.value),className:"flex-grow p-2 border border-gray-300 rounded-md focus:ring-indigo-500 focus:border-indigo-500",placeholder:"   ..."}),N.jsx("button",{type:"submit",className:"p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:N.jsx(vo,{})})]})]})},_s=()=>{if(!ve)return null;const fe=t.filter(dt=>dt.relatedConcernId===s.id),bt=fe.length>0&&fe.every(dt=>dt.status===xe.Completed);return N.jsxs("div",{className:"mt-4",children:[s.status!==" "&&N.jsxs("button",{onClick:()=>g(s),className:"w-full flex items-center justify-center p-2 mb-4 bg-teal-500 text-white font-semibold rounded-md hover:bg-teal-600 transition",children:["    ",N.jsx(zx,{})]}),bt&&s.status!==" "&&N.jsx("div",{className:"p-3 bg-green-100 border-l-4 border-green-500 rounded-r-md mb-3",children:N.jsx("p",{className:"text-green-800 text-sm",children:"     .   ' '   ."})}),N.jsx("h4",{className:"font-semibold text-gray-700 mb-2",children:" "}),N.jsx("div",{className:"max-h-48 overflow-y-auto bg-gray-50 p-3 rounded-md mb-3 space-y-3",children:s.analysisLog.map((dt,Nt)=>N.jsxs("div",{children:[N.jsx("p",{className:"text-xs text-gray-500",children:new Date(dt.timestamp).toLocaleString()}),N.jsx("p",{className:"text-sm text-gray-800",children:dt.log})]},Nt))}),!R&&N.jsxs("form",{onSubmit:Tr,className:"flex items-center space-x-2",children:[N.jsx("input",{type:"text",value:I,onChange:dt=>C(dt.target.value),className:"flex-grow p-2 border border-gray-300 rounded-md",placeholder:"   ..."}),N.jsx("button",{type:"submit",className:"p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:N.jsx(vo,{})})]})]})};return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:N.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-2xl max-h-[90vh] flex flex-col",children:[N.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[R?N.jsx("input",{name:"title",value:kt.title,onChange:J,className:"text-xl font-bold text-gray-800 w-full p-1 -m-1 border-b-2 border-indigo-500 focus:outline-none bg-indigo-50 rounded"}):N.jsx("h2",{className:"text-xl font-bold text-gray-800",children:s.title}),N.jsxs("div",{className:"flex items-center space-x-1 ml-4 flex-shrink-0",children:[!R&&N.jsx("button",{onClick:()=>x(!0),className:"p-2 text-gray-500 hover:text-indigo-600 rounded-full hover:bg-gray-100",children:N.jsx(VE,{})}),N.jsx("button",{onClick:ut,className:"p-2 text-gray-500 hover:text-red-600 rounded-full hover:bg-gray-100",children:N.jsx(Km,{})}),N.jsx("button",{onClick:o,className:"text-gray-400 hover:text-gray-600",children:N.jsx(Ig,{})})]})]}),N.jsxs("div",{className:"p-6 overflow-y-auto",children:[R?N.jsx("textarea",{name:"description",value:kt.description,onChange:J,rows:4,className:"text-gray-600 w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"}):N.jsx("p",{className:"text-gray-600 whitespace-pre-wrap",children:s.description}),Et&&N.jsx("div",{className:"mt-4",children:N.jsxs("div",{className:"flex justify-between items-center",children:[N.jsx("span",{className:"text-sm font-medium text-gray-700",children:""}),N.jsxs("span",{className:"text-sm font-medium text-gray-700",children:[s.progressPercent,"%"]})]})}),!R&&N.jsxs(N.Fragment,{children:[ys(),Qi()]}),ve&&R&&N.jsxs("div",{className:"mt-4",children:[N.jsx("label",{htmlFor:"resolutionAction",className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),N.jsx("textarea",{id:"resolutionAction",name:"resolutionAction",value:kt.resolutionAction,onChange:J,rows:3,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500"})]}),!R&&_s()]}),R&&N.jsxs("div",{className:"p-4 border-t flex justify-end space-x-3 bg-slate-50 rounded-b-lg",children:[N.jsx("button",{onClick:()=>x(!1),className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:""}),N.jsx("button",{onClick:ot,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700",children:""})]})]})})},jx=({mode:s,projects:t,onClose:n,onAddTask:r,onAddConcern:o})=>{const[u,h]=gt.useState(""),[m,g]=gt.useState(""),[y,E]=gt.useState(fr.Now),[A,S]=gt.useState(""),U=u.trim()!==""&&m.trim()!=="",W=st=>{st.preventDefault(),U&&(s==="task"?r({title:u.trim(),description:m.trim(),category:y,parentTaskId:null}):o({title:u.trim(),description:m.trim(),resolutionAction:A.trim()}))},Q=()=>N.jsx(N.Fragment,{children:N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),N.jsx("select",{id:"category",value:y,onChange:st=>E(st.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",children:Object.values(fr).map(st=>N.jsx("option",{value:st,children:st},st))})]})}),X=()=>N.jsxs("div",{children:[N.jsx("label",{htmlFor:"resolutionAction",className:"block text-sm font-medium text-gray-700 mb-1",children:"  "}),N.jsx("textarea",{id:"resolutionAction",value:A,onChange:st=>S(st.target.value),rows:3,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:"      ..."})]});return N.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex justify-center items-center p-4",children:N.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-lg max-h-[90vh] flex flex-col",children:[N.jsxs("div",{className:"flex justify-between items-center p-4 border-b",children:[N.jsx("h2",{className:"text-xl font-bold text-gray-800",children:s==="task"?"   ":"  "}),N.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600",children:N.jsx(Ig,{})})]}),N.jsxs("form",{onSubmit:W,className:"p-6 overflow-y-auto",children:[N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"title",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),N.jsx("input",{type:"text",id:"title",value:u,onChange:st=>h(st.target.value),className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500",placeholder:s==="task"?":   ":":    ",required:!0})]}),N.jsxs("div",{className:"mb-4",children:[N.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700 mb-1",children:""}),N.jsx("textarea",{id:"description",value:m,onChange:st=>g(st.target.value),rows:4,className:"w-full p-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 text-lg font-bold",placeholder:"  .",required:!0})]}),s==="task"?Q():X(),N.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[N.jsx("button",{type:"button",onClick:n,className:"px-4 py-2 bg-gray-200 text-gray-800 rounded-md hover:bg-gray-300",children:""}),N.jsx("button",{type:"submit",disabled:!U,className:"px-4 py-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 disabled:bg-indigo-300 disabled:cursor-not-allowed",children:""})]})]})]})})},Bx=()=>{const[s,t]=gt.useState("tasks"),[n,r]=gt.useState("project"),[o,u]=gt.useState(null),[h,m]=gt.useState(null),g=Mx();gt.useEffect(()=>{if(o)if("progressPercent"in o){const Q=g.tasks.find(X=>X.id===o.id);u(Q||null)}else{const Q=g.concerns.find(X=>X.id===o.id);u(Q||null)}},[g.tasks,g.concerns]);const{projects:y,nowTasks:E,todoTasks:A}=gt.useMemo(()=>{const Q=g.tasks.filter(rt=>rt.category===fr.Project&&!rt.parentTaskId).sort((rt,at)=>rt.order-at.order),X=g.tasks.filter(rt=>rt.category===fr.Now&&!rt.parentTaskId).sort((rt,at)=>rt.order-at.order),st=g.tasks.filter(rt=>rt.category===fr.ToDo&&!rt.parentTaskId).sort((rt,at)=>rt.order-at.order);return{projects:Q,nowTasks:X,todoTasks:st}},[g.tasks]),S=Q=>{"progressPercent"in Q?g.deleteTask(Q.id):g.deleteConcern(Q.id),u(null)},U=(Q,X)=>{const st=g.tasks.find(rt=>rt.id===Q);g.addTask({title:X,description:"",category:(st==null?void 0:st.category)||fr.ToDo,parentTaskId:Q})},W=(Q,X,st)=>N.jsxs("div",{className:"flex-1 min-w-[300px]",children:[N.jsx("div",{className:"sticky top-0 bg-slate-100 z-10 py-2",children:N.jsxs("h2",{className:"text-xl font-bold text-gray-700 flex items-center",children:[st," ",Q," (",X.length,")"]})}),N.jsx("div",{className:"p-1 h-full overflow-y-auto",children:X.map(rt=>N.jsx(CE,{item:rt,onSelect:u},rt.id))})]});return N.jsxs("div",{className:"min-h-screen font-sans text-gray-900",children:[N.jsx("header",{className:"bg-white shadow-md sticky top-0 z-20",children:N.jsxs("div",{className:"container mx-auto px-4 py-4 flex justify-between items-center",children:[N.jsx("h1",{className:"text-2xl font-bold text-indigo-600",children:""}),N.jsxs("nav",{className:"flex space-x-2 bg-slate-200 p-1 rounded-lg",children:[N.jsx("button",{onClick:()=>t("tasks"),className:`px-4 py-2 text-sm font-semibold rounded-md transition ${s==="tasks"?"bg-white shadow text-indigo-600":"text-gray-600"}`,children:""}),N.jsx("button",{onClick:()=>t("concerns"),className:`px-4 py-2 text-sm font-semibold rounded-md transition ${s==="concerns"?"bg-white shadow text-indigo-600":"text-gray-600"}`,children:""})]})]})}),N.jsx("main",{className:"container mx-auto p-4",children:s==="tasks"?N.jsxs(N.Fragment,{children:[N.jsxs("div",{className:"flex justify-between items-center mb-4",children:[N.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:""}),N.jsxs("button",{onClick:()=>m("task"),className:"bg-indigo-600 text-white font-semibold py-2 px-4 rounded-lg hover:bg-indigo-700 transition flex items-center shadow-sm",children:[N.jsx(vo,{})," ",N.jsx("span",{className:"ml-2 hidden sm:inline",children:"   "})]})]}),N.jsxs("div",{className:"hidden md:flex flex-col md:flex-row gap-6",children:[W("",y,N.jsx(Hm,{})),W("",E,N.jsx(Gm,{})),W("",A,N.jsx(Qm,{}))]}),N.jsxs("div",{className:"md:hidden",children:[N.jsxs("div",{className:"flex gap-2 mb-4 bg-slate-200 p-1 rounded-lg",children:[N.jsxs("button",{onClick:()=>r("project"),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-md transition flex items-center justify-center gap-1 ${n==="project"?"bg-white shadow text-indigo-600":"text-gray-600"}`,children:[N.jsx(Hm,{})," ",N.jsx("span",{className:"hidden xs:inline",children:""})]}),N.jsxs("button",{onClick:()=>r("now"),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-md transition flex items-center justify-center gap-1 ${n==="now"?"bg-white shadow text-indigo-600":"text-gray-600"}`,children:[N.jsx(Gm,{})," ",N.jsx("span",{className:"hidden xs:inline",children:""})]}),N.jsxs("button",{onClick:()=>r("todo"),className:`flex-1 px-3 py-2 text-sm font-semibold rounded-md transition flex items-center justify-center gap-1 ${n==="todo"?"bg-white shadow text-indigo-600":"text-gray-600"}`,children:[N.jsx(Qm,{})," ",N.jsx("span",{className:"hidden xs:inline",children:""})]})]}),n==="project"&&W("",y,N.jsx(Hm,{})),n==="now"&&W("",E,N.jsx(Gm,{})),n==="todo"&&W("",A,N.jsx(Qm,{}))]})]}):N.jsxs("div",{className:"max-w-2xl mx-auto",children:[N.jsxs("div",{className:"flex justify-between items-center mb-2",children:[N.jsxs("h2",{className:"text-xl font-bold text-gray-700 flex items-center",children:[N.jsx(Px,{}),"  (",g.concerns.length,")"]}),N.jsxs("button",{onClick:()=>m("concern"),className:"bg-indigo-600 text-white font-semibold py-2 px-3 rounded-lg hover:bg-indigo-700 transition flex items-center shadow-sm",children:[N.jsx(vo,{})," ",N.jsx("span",{className:"ml-2 hidden sm:inline",children:"  "})]})]}),g.concerns.map(Q=>N.jsx(CE,{item:Q,onSelect:u},Q.id))]})}),o&&N.jsx(Ux,{item:o,allTasks:g.tasks,allSteps:g.steps,allMemos:g.memos,onClose:()=>u(null),onUpdateStep:g.updateStep,onAddStep:g.addStep,onAddLog:g.addAnalysisLog,onDeriveTask:Q=>{const X=g.deriveTaskFromConcern(Q);u(X)},onUpdateTaskStatus:(Q,X)=>{g.updateTask(Q,{status:X})},onUpdateTask:g.updateTask,onUpdateConcern:g.updateConcern,onDeleteItem:S,onSelectItem:u,onAddSubTask:U,onReorderSubTasks:g.reorderSubTasks,onReorderSteps:g.reorderSteps,onAddMemo:g.addMemo,onUpdateMemo:g.updateMemo,onDeleteMemo:g.deleteMemo}),h&&N.jsx(jx,{mode:h,projects:y,onClose:()=>m(null),onAddTask:Q=>{g.addTask(Q),m(null)},onAddConcern:Q=>{g.addConcern(Q),m(null)}})]})},gA=document.getElementById("root");if(!gA)throw new Error("Could not find root element to mount to");const qx=iS.createRoot(gA);qx.render(N.jsx(Xb.StrictMode,{children:N.jsx(Bx,{})}));
